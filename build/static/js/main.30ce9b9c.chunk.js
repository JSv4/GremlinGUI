(this.webpackJsonpclusterui=this.webpackJsonpclusterui||[]).push([[0],{1672:function(e,t){},1680:function(e,t){},1682:function(e,t){},1934:function(e,t,n){},1936:function(e,t,n){e.exports=n.p+"static/media/background2.7b81fb4c.jpg"},2026:function(e,t,n){"use strict";n.r(t);n(896),n(897),n(898);var a=n(91),r=n(249),o=n(843),i=n(19),l=n(82),s=n(18),c=n.n(s),d=n(6),u=n.n(d),p=n(17),h=n(20),m=n.n(h),g=n(256),f=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.b.success(e,{position:g.b.POSITION.TOP_CENTER});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.b.error(e,{position:g.b.POSITION.TOP_CENTER});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},b=function(e){return function(t){return t({type:"SELECT_TAB",selectedTabIndex:e}),Promise.resolve(!0)}};var v=n(283),y=n.n(v),S=n(844),w=n.n(S),C=y.a.create({baseURL:"https://gremlin.extract.legal/api/",timeout:1e4});w()(C,(function(e){return y.a.post("https://gremlin.extract.legal/auth/token/refresh/",{refresh:m.a.get("refreshToken")}).then((function(t){return console.log("FailedRequest",e),console.log("Trigger Refresh",t),m.a.set("token",t.data.access),e.response.config.headers.Authorization="Bearer "+t.data.access,Promise.resolve()}))}));var j=C,_=y.a.create({baseURL:"https://gremlin.extract.legal/auth/",timeout:1e4}),O=function(e,t){return j.get("/Results/".concat(e,"/download/"),{responseType:"blob",headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},D=function(e,t){return j.get("/Results/".concat(e,"/get_full_obj/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},P=function(e,t,n){return j.put("/Results/".concat(e,"/test_transform_script/"),{input_transform:t},{headers:{Authorization:"Bearer ".concat(n)},timeout:3e4})},T=function(e,t){return j.get("/Jobs/".concat(e,"/summary_results/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},x=function(e,t,n){return j.post("/ChangePassword/",{old_password:e,new_password:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},timeout:3e4})},k=function(e){return _.post("/RecoverUsername/",{email:e},{headers:{"Content-Type":"application/json"},timeout:3e4})},I=function(e){return _.post("/ResetPassword/",{username:e},{headers:{"Content-Type":"application/json"},timeout:3e4})},N=function(e,t){return j.put("/InviteUser/",Object(i.a)({},e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},timeout:3e4})},L=function(e,t,n){return j.put("/Users/".concat(e,"/change_permissions/"),{role:t},{headers:{Authorization:"Bearer ".concat(n)},timeout:3e4})},R=function(e,t){return j.delete("/Users/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},A=function(e,t,n,a){return j.get("/Users/?text_search=".concat(t,"&role=").concat(n,"&page=").concat(e),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},timeout:3e4})},J=function(e,t,n){var a=new FormData;return a.append("file",e),a.append("name",e.name),a.append("rawText",""),t&&a.append("job",t),j.post("/Documents/",a,{headers:{"Content-Type":"multipart/form-data; boundary=".concat(a._boundary),Authorization:"Bearer ".concat(n)},timeout:3e4})},U=function(e,t){return j.delete("/Documents/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},M=function(e,t){return j.get("/Documents/".concat(e,"/download/"),{responseType:"blob",headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},F=function(e,t,n){return j.get("/Documents/?id=&name=&extracted=&job=".concat(e,"&page=").concat(t),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},timeout:3e4})},z=function(e,t,n){return j.get("/PipelineSteps/".concat(t,"/JobLogs/").concat(e,"/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},timeout:1e4})},B=function(e,t){return j.get("/Jobs/".concat(e,"/logs/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},G=function(e,t,n){return j.get("/Jobs/".concat(e,"/RunToNode/").concat(t,"/"),{headers:{Authorization:"Bearer ".concat(n)},timeout:3e4})},H=function(e,t){return j.post("/Jobs/",Object(i.a)({},e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},V=function(e,t){return j.patch("/Jobs/".concat(e.id,"/"),Object(i.a)({},e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},W=function(e,t,n){return j.get("/Jobs/?page=".concat(e,"&text_search=").concat(t),{headers:{Authorization:"Bearer ".concat(n)},timeout:3e4})},Y=function(e,t){return j.get("/Jobs/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},q=function(e,t){return j.delete("/Jobs/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},K=function(e,t){return j.get("/Jobs/".concat(e,"/download/"),{responseType:"blob",headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},Z=function(e,t){return j.get("/PythonScripts/".concat(e,"/exportArchive/"),{responseType:"blob",headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},Q=function(e,t){var n=new FormData;return n.append("file",e),j.post("/UploadScript/",n,{headers:{"Content-Disposition":"attachment; filename=".concat(e.name),"Content-Type":"multipart/form-data; boundary=".concat(n._boundary),Authorization:"Bearer ".concat(t)},timeout:3e4})},X=function(e,t){return j.delete("/PythonScripts/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},$=function(e,t,n,a){return j.post("/PythonScripts/",{human_name:e,name:e.replace(" ","_").toUpperCase(),type:t,script:n},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},timeout:1e4})},ee=function(e){return j.get("/PythonScripts/",{headers:{Authorization:"Bearer ".concat(e)},timeout:3e4})},te=function(e,t){return j.get("/PythonScripts/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},ne=function(e,t){return j.get("/PythonScripts/".concat(t,"/GetDetails/"),{headers:{Authorization:"Bearer ".concat(e)},timeout:3e4})},ae=function(e,t){return j.put("/PythonScripts/".concat(e.id,"/UpdateDetails/"),Object(i.a)({},e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},re=function(e,t){return j.get("/Pipelines/".concat(e,"/ExportToYAML/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},oe=function(e,t){var n=new FormData;return n.append("file",e),j.post("/UploadPipeline/",n,{headers:{"Content-Disposition":"attachment; filename=".concat(e.name),"Content-Type":"multipart/form-data; boundary=".concat(n._boundary),Authorization:"Bearer ".concat(t)},timeout:3e4})},ie=function(e,t){return j.delete("/Pipelines/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},le=function(e,t){return j.post("/Pipelines/",e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},se=function(e,t){return j.get("/Pipelines/".concat(e,"/get_test_job/"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},ce=function(e,t){return j.get("/Pipelines/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},de=function(e,t){return j.get("/Pipelines/".concat(e,"/get_full_pipeline/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},ue=function(e,t){return j.get("/Pipelines/".concat(e,"/scripts/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},pe=function(e,t){return console.log("CreatePipelineEdges: ",e),j.post("/PipelineEdges/",e,{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},he=function(e,t){return j.delete("/PipelineEdges/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},me=function(e,t,n){return j.get("/Pipelines/?text_search=".concat(e,"&page=").concat(t),{headers:{Authorization:"Bearer ".concat(n)},timeout:3e4})},ge=function(e,t){return j.patch("/Pipelines/".concat(e.id,"/"),Object(i.a)({},e),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},fe=function(e,t){return j.get("/PipelineSteps/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},Ee=function(e,t){return j.delete("/PipelineSteps/".concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},be=function(e){return j.get("/PipelineSteps/",{headers:{Authorization:"Bearer ".concat(e)},timeout:3e4})},ve=function(e,t){return j.get("/PipelineSteps/?id=&name=&parent_pipeline=".concat(e),{headers:{Authorization:"Bearer ".concat(t)},timeout:3e4})},ye=function(e,t){return j.patch("/PipelineSteps/".concat(e.id,"/"),Object(i.a)({},e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},Se=function(e,t){return j.post("/PipelineSteps/",Object(i.a)({},e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},timeout:1e4})},we=function(e){return j.get("/SystemStats/",{headers:{Authorization:"Bearer ".concat(e)},timeout:3e4})},Ce=function(e,t){return _.post("/token/",{username:e,password:t},{headers:{"Content-Type":"application/json"},timeout:1e4})},je=function(e){return j.get("/User/me/",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},timeout:1e4})},_e=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=12;break}return t.prev=1,n({type:"SET_DOCUMENTS_LOADING",loading:!0}),t.next=5,J(e,a().jobs.selectedJobId,m.a.get("token"));case 5:200===t.sent.status&&n({type:"SET_DOCUMENTS_LOADING",loading:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response?n(E(t.t0.response.data.message)):n(E("Something went wrong while uploading this file"));case 12:return t.abrupt("return",Promise.resolve());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=19;break}return t.prev=1,r=m.a.get("token"),t.next=5,U(e,r);case 5:if(204!==t.sent.status){t.next=11;break}return n(ke),t.abrupt("return",Promise.resolve(!0));case 11:n(E("Unable to delete document with ID ".concat(e)));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n(E("Error trying to delete document with ID #".concat(e),t.t0));case 17:t.next=20;break;case 19:n(E("Not logged in!"));case 20:return t.abrupt("return",Promise.resolve(!1));case 21:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,n){return t.apply(this,arguments)}}()},De=function(e){return function(t){return t({type:"CHANGE_DOCUMENT_PAGE",selectedPage:e}),Promise.resolve()}},Pe=function(){return function(e){return e({type:"CLEAR_DOCUMENTS"}),Promise.resolve()}},Te=function(e){return function(t){return t({type:"RECEIVE_DOCUMENTS",response:e}),Promise.resolve()}},xe=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o,i,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=14;break}return t.prev=1,r=m.a.get("token"),t.next=5,M(e,r);case 5:200===(o=t.sent).status&&(i=o.headers.filename,l=new Blob([o.data],{type:o.headers["content-type"]}),(s=document.createElement("a")).href=window.URL.createObjectURL(l),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(E("Error downloading selected document: "+t.t0));case 12:t.next=15;break;case 14:n(E("Not logged in!"));case 15:return t.abrupt("return",Promise.resolve());case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},ke=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=19;break}return e.prev=1,t({type:"SET_DOCUMENTS_LOADING",loading:!0}),a=m.a.get("token"),r=n().jobs.selectedJobId,o=n().documents.selectedPage,e.next=8,F(r,o,a);case 8:if(200!==(i=e.sent).status){e.next=12;break}return t(Te(i.data)),e.abrupt("return",Promise.resolve(!0));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t(E("Error fetching documents: "+e.t0));case 17:e.next=20;break;case 19:t(E("Not logged in!"));case 20:return e.abrupt("return",Promise.resolve(!1));case 21:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()},Ie=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=18;break}return n({type:"SET_TEST_LOADING",loading:!0}),t.prev=2,r=m.a.get("token"),t.next=6,G(a().test_job.test_job.id,e,r);case 6:if(o=t.sent,console.log("Run job to node response: ",o),204!==o.status){t.next=10;break}return t.abrupt("return",!0);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),n(E("Error start job to step: "+t.t0)),n({type:"SET_TEST_LOADING",loading:!1});case 16:t.next=19;break;case 18:n(E("Not logged in!"));case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,n){return t.apply(this,arguments)}}()},Ne=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=20;break}return e.prev=1,t({type:"SET_TEST_DOCUMENTS_LOADING",loading:!0}),a=m.a.get("token"),r=n().test_job.test_job.id,o=n().test_job.document_page,e.next=8,F(r,o,a);case 8:if(200!==(i=e.sent).status){e.next=12;break}return t({type:"RECEIVE_TEST_DOCUMENTS",response:i}),e.abrupt("return",Promise.resolve(!0));case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),t(E("Error fetching test documents: "+e.t0)),t({type:"SET_TEST_DOCUMENTS_LOADING",loading:!1});case 18:e.next=21;break;case 20:t(E("Not logged in!"));case 21:return e.abrupt("return",Promise.resolve(!1));case 22:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()};var Le=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o,i,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=14;break}return t.prev=1,r=m.a.get("token"),t.next=5,O(e,r);case 5:200===(o=t.sent).status&&(i=o.headers.filename,l=new Blob([o.data],{type:o.headers["content-type"]}),(s=document.createElement("a")).href=window.URL.createObjectURL(l),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(E("Error trying to download result: "+t.t0));case 12:t.next=15;break;case 14:n(E("Not logged in!"));case 15:return t.abrupt("return",Promise.resolve());case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},Re=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"CLEAR_RESULTS"}),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ae=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=17;break}return t.prev=1,n({type:"SET_RESULTS_LOADING",loading:!0}),r=m.a.get("token"),t.next=6,T(e,r);case 6:if(200!==(o=t.sent).status){t.next=10;break}return n({type:"RECEIVE_RESULTS",response:o}),t.abrupt("return",Promise.resolve(!0));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(E("Error trying to fetch results: "+t.t0));case 15:t.next=18;break;case 17:n(E("Not logged in!"));case 18:return t.abrupt("return",Promise.resolve(!1));case 19:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()};function Je(e){return{type:"REMOVE_SCRIPT",scriptId:e}}function Ue(e){return{type:"UPDATE_SCRIPT",updatedScript:e}}function Me(e){return{type:"RECIEVE_SCRIPTS",response:e,receivedAt:Date.now()}}var Fe=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=17;break}return e.prev=1,t({type:"SET_SCRIPTS_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,ee(a);case 6:if(200!==(r=e.sent).status){e.next=10;break}return t(Me(r)),e.abrupt("return",Promise.resolve(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t(E("Error fetching scripts: "+e.t0));case 15:e.next=18;break;case 17:t(E("Not logged in!"));case 18:return t({type:"SET_SCRIPTS_LOADING",loading:!1}),e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()};function ze(e){return{type:"RECEIVE_SCRIPT_DETAILS",response:e}}var Be=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn||"LAWYER"===n().auth.user.role){e.next=18;break}return e.prev=1,t({type:"SET_STATS_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,we(a);case 6:if(r=e.sent,console.log("Stats response",r),200!==r.status){e.next=11;break}return t({type:"RECEIVE_STATS",stats:r.data}),e.abrupt("return",Promise.resolve(!0));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(E("Error fetching script details: "+e.t0));case 16:e.next=19;break;case 18:t(E("Not authorized!"));case 19:return t({type:"SET_STATS_LOADING",loading:!1}),e.abrupt("return",Promise.resolve(!1));case 21:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()},Ge=function(){return function(e){return e({type:"CLEAR_STATS"}),Promise.resolve(!0)}},He=function(){return function(e){return e({type:"CLEAR_SELECTED_PIPELINENODE"}),Promise.resolve(!0)}};function Ve(e){return{type:"RECIEVE_PIPELINENODES",response:e}}function We(e){return{type:"REMOVE_PIPELINENODE",pipelineStepId:e}}var Ye=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("addPipelineNode"),t.next=3,n({type:"ADD_PIPELINENODE",newPipelineStep:e});case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},qe=function(e,t,n){return function(){var a=Object(p.a)(u.a.mark((function a(r,o){var i,l,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("requestAddPipelineNode",e,t,n),!o().auth.loggedIn){a.next=22;break}return a.prev=2,i=m.a.get("token"),a.next=6,Se({name:e,script:t,parent_pipeline:o().pipelines.selectedPipelineId,step_settings:JSON.stringify(n)},i);case 6:if(l=a.sent,console.log("requestAddPipelineNode response:",l),201!==l.status){a.next=15;break}return console.log("Success"),a.next=12,r(Ye(l.data));case 12:return s=a.sent,console.log("Successfully added addPipelineNode and response is",s),a.abrupt("return",s);case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(2),r(E("Error adding node to pipeline: "+a.t0));case 20:a.next=23;break;case 22:r(E("Not logged in!"));case 23:return a.abrupt("return",!1);case 24:case"end":return a.stop()}}),a,null,[[2,17]])})));return function(e,t){return a.apply(this,arguments)}}()},Ke=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=16;break}return t.prev=1,r=m.a.get("token"),t.next=5,Ee(e,r);case 5:if(204!==t.sent.status){t.next=9;break}return n(We(e)),t.abrupt("return",Promise.resolve());case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(E("Error deleting pipeline step: "+t.t0));case 14:t.next=17;break;case 16:n(E("Not logged in!"));case 17:return t.abrupt("return",Promise.resolve());case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()},Ze=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=16;break}return e.prev=1,t({type:"SET_PIPELINENODES_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,be(a);case 6:return 200===(r=e.sent).status&&t(Ve(r)),e.abrupt("return",Promise.resolve(!0));case 11:e.prev=11,e.t0=e.catch(1),t(E("Error fetching pipeline steps: "+e.t0));case 14:e.next=17;break;case 16:t(E("Not logged in!"));case 17:return e.abrupt("return",Promise.resolve(!1));case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()};function Qe(e){return{type:"UPDATE_PIPELINENODE",updatedPipelineStep:e}}var Xe=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=14;break}return t.prev=1,r=m.a.get("token"),t.next=5,fe(e,r);case 5:200===(o=t.sent).status&&n(Qe(o.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(E("Error trying to refresh pipeline step with ID #".concat(e,": ")+t.t0));case 12:t.next=15;break;case 14:n(E("Not logged in!"));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()};var $e=function(e){return function(t){return t({type:"ADD_EDGE",edge:e}),Promise.resolve(!0)}},et=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:"SET_PIPELINE_NAME_FILTER",pipelineSearchText:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},tt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("loadFullPipeline"),!a().auth.loggedIn){t.next=19;break}return t.prev=2,r=m.a.get("token"),t.next=6,de(e,r);case 6:if(o=t.sent,console.log("response is: ",o),200!==o.status){t.next=13;break}return n({type:"UPDATE_PIPELINE",updatedPipeline:o.data}),n({type:"RECIEVE_PIPELINENODES",items:o.data.nodes}),n({type:"RECEIVE_EDGES",items:o.data.edges}),t.abrupt("return",Promise.resolve(!0));case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),console.log("Can't load",t.t0),n(E("Error loading pipeline #".concat(e)));case 19:return t.abrupt("return",Promise.resolve(!1));case 20:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,n){return t.apply(this,arguments)}}()},nt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SELECT_PIPELINE",selectedPipelineId:e}),t.abrupt("return",!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},at=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"UPDATE_PIPELINE",updatedPipeline:e}),t.abrupt("return",!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function rt(){return{type:"CLEAR_PIPELINES"}}function ot(e){return{type:"RECIEVE_PIPELINES",response:e,receivedAt:Date.now()}}var it=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=18;break}return e.prev=1,t({type:"SET_PIPELINES_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,me(n().pipelines.pipelineNameFilter,n().pipelines.selectedPage,a);case 6:if(200!==(r=e.sent).status){e.next=10;break}return t(ot(r)),e.abrupt("return",Promise.resolve(!0));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t(E("Error fetching pipelines: "+e.t0)),t({type:"SET_PIPELINES_LOADING",loading:!1});case 16:e.next=19;break;case 18:t(E("Not logged in!"));case 19:return e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()},lt=function(){return function(e){return e({type:"UNSELECT_PIPELINE"}),Promise.resolve(!0)}};function st(){return m.a.remove("token"),m.a.remove("refreshToken"),{type:"LOGOUT",password:"",username:"",loggedIn:!1,token:"",refreshToken:""}}var ct=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:"SET_USER_NAME_FILTER",searchText:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},dt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:"RECEIVE_USERS",response:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ut=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o,i,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=18;break}return e.prev=1,t({type:"SET_USERS_LOADING",loading:!0}),a=m.a.get("token"),r=n().users,o=r.selectedPage,i=r.searchText,l=r.searchRole,e.next=7,A(o,i,l,a);case 7:if(200!==(s=e.sent).status){e.next=11;break}return t(dt(s.data)),e.abrupt("return",Promise.resolve(!0));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(E("Error fetching users: "+e.t0));case 16:e.next=19;break;case 18:t(E("Not logged in!"));case 19:return e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()},pt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SELECT_JOB",selectedJobId:e}),t.abrupt("return",!0);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ht=function(){return function(e){return e({type:"UNSELECT_JOB"}),Promise.resolve(!0)}},mt=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=19;break}return e.prev=1,a=m.a.get("token"),e.next=5,Y(n().jobs.selectedJobId,a);case 5:if(200!==(r=e.sent).status){e.next=11;break}return t({type:"UPDATE_JOB",updatedJob:r.data}),e.abrupt("return",Promise.resolve(!0));case 11:t(E("Unable to update job with ID #",n().jobs.selectedJobId));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t(E("Error trying to update selected job"));case 17:e.next=20;break;case 19:t(E("Not logged in!"));case 20:return e.abrupt("return",Promise.resolve(!1));case 21:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()},gt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o,i,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=23;break}return t.prev=1,r=m.a.get("token"),t.next=5,K(e,r);case 5:if(200!==(o=t.sent).status){t.next=16;break}return i=o.headers.filename,l=new Blob([o.data],{type:o.headers["content-type"]}),(s=document.createElement("a")).href=window.URL.createObjectURL(l),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),t.abrupt("return",Promise.resolve(!0));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),n(E("Error trying to download selected job's results"));case 21:t.next=24;break;case 23:n(E("Not logged in!"));case 24:return t.abrupt("return",Promise.resolve(!1));case 25:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n){return t.apply(this,arguments)}}()},ft=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=16;break}return t.prev=1,r=m.a.get("token"),t.next=5,H(e,r);case 5:if(201!==(o=t.sent).status){t.next=9;break}return n({type:"ADD_JOB",newJob:o.data}),t.abrupt("return",Promise.resolve(o.data));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(E("Error creating job"));case 14:t.next=17;break;case 16:n(E("Not logged in!"));case 17:return t.abrupt("return",Promise.resolve(!1));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()},Et=function(){return function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o,i,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=18;break}return e.prev=1,t({type:"SET_JOBS_LOADING",loading:!0}),a=n().jobs,r=a.selectedPage,o=a.searchString,i=m.a.get("token"),e.next=7,W(r,o,i);case 7:if(!(l=e.sent).status||200!==l.status){e.next=11;break}return t({type:"RECIEVE_JOBS",response:l}),e.abrupt("return",Promise.resolve(!0));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t(E("Error getting jobs"));case 16:e.next=19;break;case 18:t(E("Not logged in!"));case 19:return e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()},bt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:"SET_JOB_SEARCH_STRING",searchString:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},vt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n({type:"CHANGE_JOB_PAGE",selectedPage:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},yt=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=19;break}return t.prev=1,r=m.a.get("token"),t.next=5,V(e,r);case 5:if(200!==(o=t.sent).status){t.next=11;break}return n({type:"UPDATE_JOB",updatedJob:o.data}),t.abrupt("return",Promise.resolve(!0));case 11:n(E("Unable to update job"));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n(E("Error updating job."));case 17:t.next=20;break;case 19:n(E("Not logged in!"));case 20:return t.abrupt("return",Promise.resolve(!1));case 21:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e,n){return t.apply(this,arguments)}}()},St=function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=16;break}return t.prev=1,r=m.a.get("token"),t.next=5,q(e,r);case 5:if(204!==t.sent.status){t.next=9;break}return n({type:"REMOVE_JOB",jobId:e}),t.abrupt("return",Promise.resolve(!0));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(E("Error trying to delete job: "+t.t0));case 14:t.next=17;break;case 16:n(E("Not logged in!"));case 17:return t.abrupt("return",Promise.resolve(!1));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()};var wt=function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a,r){var o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r().auth.loggedIn){n.next=17;break}return n.prev=1,a({type:"SET_JOB_LOG_LOADING",loading:!0}),o=m.a.get("token"),n.next=6,z(e,t,o);case 6:if(200!==(i=n.sent).status){n.next=10;break}return a({type:"ADD_JOB_STEP_LOG",log:i.data.log,stepId:t}),n.abrupt("return",Promise.resolve(!0));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a(E("Error trying to fetch logs for job."));case 15:n.next=18;break;case 17:a(E("Not logged in!"));case 18:return n.abrupt("return",Promise.resolve(!1));case 19:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()};var Ct=Object(r.c)({jobs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,items:[],selectedJobId:-1,selectedJobLog:"",jobStepLogs:{},logs_loading:!1,count:0,selectedPage:1,total_pages:1,searchString:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECIEVE_JOBS":return Object.assign({},e,{items:t.response.data.results,count:t.response.data.count,total_pages:t.response.data.total_pages,loading:!1});case"UPDATE_JOB":var n=c.a.find(e.items,{id:t.updatedJob.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedJob.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedJob)),Object.assign({},e,{loading:!1,items:a});case"CLEAR_JOBS":return Object.assign({},e,{loading:!1,items:[],selectedJobId:-1,selectedJobLog:"",jobStepLogs:{},logs_loading:!1,count:0,selectedPage:1,total_pages:1,searchString:""});case"UNSELECT_JOB":return Object.assign({},e,{selectedJobId:-1});case"SELECT_JOB":return Object.assign({},e,{selectedJobId:t.selectedJobId});case"CLEAR_SELECTED_JOB":return Object.assign({},e,{selectedJobId:-1});case"SET_JOBS_LOADING":return Object.assign({},e,{loading:t.loading});case"SET_JOB_LOG_LOADING":return Object.assign({},e,{logs_loading:t.loading});case"SET_JOB_LOG":return Object.assign({},e,{selectedJobLog:t.log,logs_loading:!1});case"ADD_JOB_STEP_LOG":var o=Object(i.a)({},e.result_logs);return o[t.stepId]=t.log,Object.assign({},e,{jobStepLogs:o,logs_loading:!1});case"CLEAR_JOB_LOGS":return Object.assign({},e,{jobStepLogs:{},selectedJobLog:""});case"SET_JOB_SEARCH_STRING":return Object.assign({},e,{searchString:t.searchString});case"CHANGE_JOB_PAGE":return Object.assign({},e,{selectedPage:t.selectedPage});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,items:[],pages:1,count:0,page_size:10,selectedPage:1,searchText:"",searchRole:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newDocument])});case"RECEIVE_USERS":return Object.assign({},e,{loading:!1,items:t.response.results,pages:t.response.total_pages,count:t.response.count,page_size:t.response.page_size});case"REMOVE_USER":return Object.assign({},e,{items:e.items.filter((function(e){return e.id!==t.userId}))});case"CLEAR_USERS":return Object.assign({},e,{loading:!1,items:[],pages:1,count:0,page_size:10,selectedPage:1,searchText:"",searchRole:""});case"SET_USER_NAME_FILTER":return Object.assign({},e,{searchText:t.searchText});case"SET_USER_ROLE_FILTER":return Object.assign({},e,{searchRole:t.searchRole});case"CHANGE_USER_PAGE":return Object.assign({},e,{selectedPage:t.selectedPage});case"SET_USERS_LOADING":return Object.assign({},e,{loading:t.loading});default:return e}},test_job:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,logs_loading:!1,documents_loading:!1,results_loading:!1,digraph_loading:!1,transform_loading:!1,test_transforms:{},test_job:null,testJobLog:"",testJobStepLogs:[],test_documents:[],document_count:0,document_page:1,document_pages:1,test_results:[],result_count:0,result_page:1,result_pages:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_TEST_JOB":return Object.assign({},e,{loading:!1,test_job:t.test_job});case"RECEIVE_TEST_DOCUMENTS":return Object.assign({},e,{documents_loading:!1,test_documents:t.response.data.results,document_pages:t.response.data.total_pages,document_count:t.response.data.count});case"RECEIVE_TEST_RESULTS":return Object.assign({},e,{results_loading:!1,test_results:t.response.data});case"UPDATE_TEST_JOB_RESULT":var n=Object(l.a)(e.test_results.filter((function(e){return e.id!==t.updatedResult.id})));return console.log("Filtered test_results: ",n),console.log(Array.isArray(n)),n.push(t.updatedResult),Object.assign({},e,{test_results:n,results_loading:!1});case"UPDATE_TEST_JOB":return Object.assign({},e,{test_job:t.updatedJob,loading:!1});case"CLEAR_TEST_DATA":return Object.assign({},e,{loading:!1,logs_loading:!1,documents_loading:!1,results_loading:!1,transform_loading:!1,test_transforms:{},test_job:null,testJobLog:"",testJobStepLogs:[],test_documents:[],document_count:0,document_page:1,document_pages:1,test_results:[],result_count:0,result_page:1,result_pages:1});case"SET_TEST_LOADING":return Object.assign({},e,{loading:t.loading});case"SET_TEST_RESULTS_LOADING":return Object.assign({},e,{results_loading:t.loading});case"SET_TEST_DOCUMENTS_LOADING":return Object.assign({},e,{documents_loading:t.loading});case"SET_TEST_DOCUMENT_PAGE":return Object.assign({},e,{document_page:t.selectedPage});case"SET_TEST_RESULT_PAGE":return Object.assign({},e,{result_page:t.selectedPage});case"SET_TEST_JOB_LOG_LOADING":return Object.assign({},e,{logs_loading:t.loading});case"SET_TEST_JOB_LOG":return Object.assign({},e,{testJobLog:t.log,logs_loading:!1});case"ADD_TEST_JOB_STEP_LOG":var a=Object(i.a)({},e.testJobStepLogs);return a[t.stepId]=t.log,Object.assign({},e,{testJobStepLogs:a,logs_loading:!1});case"CLEAR_TEST_JOB_LOGS":return Object.assign({},e,{logs_loading:!1,testJobLog:"",testJobStepLogs:[]});case"SET_TEST_TRANSFORM_LOADING":return Object.assign({},e,{transform_loading:t.loading});case"RECEIVE_TEST_TRANSFORM":var r=Object(i.a)({},e.test_transforms);return r[t.resultId]=t.transformed_input,console.log("New test transforms: ",r),Object.assign({},e,{transform_loading:!1,test_transforms:r});default:return e}},pipelines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,items:[],pipelineSearchText:"",selectedPipelineId:-1,pages:1,count:0,page_size:5,selectedPage:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PIPELINE":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newPipeline]),loading:!1});case"RECIEVE_PIPELINES":return Object.assign({},e,{loading:!1,items:c.a.sortBy(t.response.data.results,"id"),count:t.response.data.count,page_size:t.response.data.page_size});case"UPDATE_PIPELINE":var n=c.a.find(e.items,{id:t.updatedPipeline.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedPipeline.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedPipeline)),Object.assign({},e,{loading:!1,items:a});case"REMOVE_PIPELINE":a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.pipelineId});return a.splice(r,1),Object.assign({},e,{items:a});case"CHANGE_PIPELINE_PAGE":return Object.assign({},e,{selectedPage:t.selectedPage});case"SET_PIPELINE_NAME_FILTER":return Object.assign({},e,{pipelineSearchText:t.pipelineSearchText});case"CLEAR_PIPELINES":return Object.assign({},e,{items:[],loading:!1,pipelineSearchText:"",selectedPipelineId:-1,pages:1,count:0,page_size:5,selectedPage:1});case"SELECT_PIPELINE":return Object.assign({},e,{selectedPipelineId:t.selectedPipelineId});case"UNSELECT_PIPELINE":return Object.assign({},e,{selectedPipelineId:-1});case"SET_PIPELINES_LOADING":return Object.assign({},e,{loading:t.loading});default:return e}},pipelinesteps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stepsAreFetching:!1,items:[],lastUpdated:null,selectedPipelineStepId:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PIPELINENODE":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newPipelineStep])});case"RECIEVE_PIPELINENODES":return Object.assign({},e,{loading:!1,items:t.items});case"UPDATE_PIPELINENODE":var n=c.a.find(e.items,{id:t.updatedPipelineStep.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedPipelineStep.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedPipelineStep)),Object.assign({},e,{items:a});case"REMOVE_PIPELINENODE":a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.pipelineStepId});return a.splice(r,1),Object.assign({},e,{items:a});case"CLEAR_PIPELINENODES":return Object.assign({},e,{items:[],loading:!1});case"SELECT_PIPELINENODE":return Object.assign({},e,{selectedPipelineStepId:t.selectedPipelineStepId});case"CLEAR_SELECTED_PIPELINENODE":return Object.assign({},e,{selectedPipelineStepId:-1});case"SET_PIPELINENODES_LOADING":return Object.assign({},e,{loading:t.loading});default:return e}},edges:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[],loading:!0,selectedEdgeId:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UNSELECT_EDGE":return Object.assign({},e,{selectedEdgeId:-1});case"SELECT_EDGE":return Object.assign({},e,{selectedEdgeId:t.id});case"RECEIVE_EDGES":return console.log("Received edges",t),Object.assign({},e,{items:t.items,loading:!1});case"ADD_EDGE":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.edge]),loading:!1});case"UPDATE_EDGE":var n=c.a.find(e.items,{id:t.updatedEdge.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedEdge.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedEdge)),Object.assign({},e,{items:a,loading:!1});case"REMOVE_EDGE":a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.edgeId});return a.splice(r,1),Object.assign({},e,{items:a,loading:!1});case"CLEAR_EDGE":return Object.assign({},e,{items:[],loading:!0,selectedEdgeId:-1});case"SET_EDGES_LOADING":return Object.assign({},e,{loading:t.loading});default:return e}},scripts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,detailsLoading:!1,items:[],selectedScriptData:null,selectedScriptId:-1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCRIPT":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newScript])});case"RECIEVE_SCRIPTS":return Object.assign({},e,{loading:!1,items:t.response.data});case"UPDATE_SCRIPT":var n=c.a.find(e.items,{id:t.updatedScript.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedScript.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedScript)),Object.assign({},e,{items:a,loading:!1});case"REMOVE_SCRIPT":a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.scriptId});return a.splice(r,1),Object.assign({},e,{items:a});case"CLEAR_SCRIPTS":return Object.assign({},e,{items:[]});case"SELECT_SCRIPT":return Object.assign({},e,{selectedScriptId:t.selectedScriptId});case"CLEAR_SELECTED_SCRIPT":return Object.assign({},e,{loading:!1,selectedScriptData:null,selectedScriptId:-1});case"SET_SCRIPTS_LOADING":return Object.assign({},e,{loading:t.loading});case"SET_SCRIPT_DETAILS_LOADING":return Object.assign({},e,{detailsLoading:t.loading});case"REQUEST_SCRIPT_DETAILS":return Object.assign({},e,{detailsLoading:!0,selectedScriptData:null});case"RECEIVE_SCRIPT_DETAILS":return Object.assign({},e,{detailsLoading:!1,selectedScriptData:t.response.data});default:return e}},documents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,items:[],pages:1,count:0,page_size:10,selectedPage:1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DOCUMENT":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newDocument])});case"RECEIVE_DOCUMENTS":return Object.assign({},e,{loading:!1,documentsAreFetching:!1,items:t.response.results,pages:t.response.total_pages,count:t.response.count,page_size:t.response.page_size});case"UPDATE_DOCUMENT":var n=e.items.filter((function(e){return e.id!==t.updatedDoc.id}));return n.push(t.updatedDoc),Object.assign({},e,{items:n});case"REMOVE_DOCUMENT":return Object.assign({},e,{items:e.items.filter((function(e){return e.id!==t.documentId}))});case"CLEAR_DOCUMENTS":return Object.assign({},e,{loading:!1,items:[],pages:1,count:0,page_size:10,selectedPage:1});case"CHANGE_DOCUMENT_PAGE":return Object.assign({},e,{selectedPage:t.selectedPage});case"SET_DOCUMENTS_LOADING":return Object.assign({},e,{loading:t.loading});default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,items:[],pages:1,count:0,selectedPage:1,selectedResultId:-1,searchString:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_RESULT":return Object.assign({},e,{items:[].concat(Object(l.a)(e.items),[t.newResult])});case"RECEIVE_RESULTS":return Object.assign({},e,{loading:!1,items:t.response.data});case"UPDATE_RESULT":var n=c.a.find(e.items,{id:t.updatedResult.id}),a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.updatedResult.id});return a.splice(r,1,Object(i.a)(Object(i.a)({},n),t.updatedResult)),Object.assign({},e,{loading:!1,items:a});case"REMOVE_RESULT":a=Object(l.a)(e.items),r=c.a.findIndex(a,{id:t.resultId});return a.splice(r,1),Object.assign({},e,{items:a});case"CLEAR_RESULTS":return Object.assign({},e,{loading:!1,items:[],pages:1,count:0,selectedPage:1,selectedResultId:-1,searchString:""});case"SELECT_RESULT":return Object.assign({},e,{selectedResultId:t.selectedResultId});case"CLEAR_SELECTED_RESULT":return Object.assign({},e,{selectedResultId:-1});case"CHANGE_RESULT_PAGE":return Object.assign({},e,{selectedPage:t.selectedPage});case"SET_RESULTS_LOADING":return Object.assign({},e,{loading:t.loading});case"SET_RESULTS_SEARCH_STRING":return Object.assign({},e,{searchString:t.searchString});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{newJobName:"",showNewJobModal:!1,showScriptModal:!1,showNewScriptModal:!1,showPipelineModal:!1,showNewPipelineModal:!1,showInviteUserModal:!1,showLoginModal:!1,jobNameFilter:"",scriptNameFilter:"",pipelineNameFilter:"",filterByErrorJobs:!1,filterByStartedJobs:!1,filterByQueuedJobs:!1,filterByFinishedJobs:!1,activeDigraph:null,selectedTabIndex:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_NEW_JOB_NAME":return Object.assign({},e,{newJobName:t.newJobName});case"NEW_JOB_MODAL_TOGGLE":return Object.assign({},e,{showNewJobModal:!e.showNewJobModal});case"NEW_SCRIPT_MODAL_TOGGLE":return Object.assign({},e,{showNewScriptModal:!e.showNewScriptModal});case"INVITE_USER_MODAL_TOGGLE":return Object.assign({},e,{showInviteUserModal:!e.showInviteUserModal});case"SCRIPT_MODAL_TOGGLE":return Object.assign({},e,{showScriptModal:!e.showScriptModal});case"NEW_PIPELINE_MODAL_TOGGLE":return Object.assign({},e,{showNewPipelineModal:!e.showNewPipelineModal});case"PIPELINE_MODAL_TOGGLE":return Object.assign({},e,{showPipelineModal:!e.showPipelineModal});case"LOGIN_MODAL_TOGGLE":return Object.assign({},e,{showLoginModal:!e.showLoginModal});case"SELECT_TAB":return Object.assign({},e,{selectedTabIndex:t.selectedTabIndex});case"UPDATE_JOB_NAME_FILTER":return Object.assign({},e,{jobNameFilter:t.filter});case"UPDATE_SCRIPT_NAME_FILTER":return Object.assign({},e,{scriptNameFilter:t.filter});case"UPDATE_PIPELINE_NAME_FILTER":return Object.assign({},e,{pipelineNameFilter:t.filter});case"SHOW_STARTED_JOBS":return Object.assign({},e,{filterByStartedJobs:t.filter});case"SHOW_ERROR_JOBS":return Object.assign({},e,{filterByErrorJobs:t.filter});case"SHOW_QUEUED_JOBS":return Object.assign({},e,{filterByQueuedJobs:t.filter});case"SHOW_FINISHED_JOBS":return Object.assign({},e,{filterByFinishedJobs:t.filter});case"TOGGLE_BUILD_MODE":return Object.assign({},e,{buildMode:!e.buildMode});default:return e}},system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user_count:0,doc_count:0,parsed_doc_count:0,queued_job_count:0,running_job_count:0,error_job_count:0,script_count:0,pipeline_count:0,loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_STATS":return Object.assign({},e,Object(i.a)(Object(i.a)({},t.stats),{},{loading:!1}));case"SET_STATS_LOADING":return Object.assign({},e,{loading:t.loading});case"CLEAR_STATS":return Object.assign({},e,{user_count:0,doc_count:0,parsed_doc_count:0,queued_job_count:0,running_job_count:0,error_job_count:0,script_count:0,pipeline_count:0,loading:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",user:{},loggedIn:!1,token:"",refreshToken:"",loginError:"",buildMode:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object.assign({},e,{username:t.username,loggedIn:!0,refreshToken:t.refreshToken,token:t.token,loginError:""});case"LOGIN_FAIURE":return Object.assign({},e,{username:"",loggedIn:!1,refreshToken:"",token:"",loginError:t.error});case"LOGOUT":return Object.assign({},e,{username:"",user:{},loggedIn:!1,refreshToken:"",token:"",loginError:""});case"RECEIVE_USER":return Object.assign({},e,{user:t.user});default:return e}}});var jt=n(0),_t=n.n(jt),Ot=n(69),Dt=n(597),Pt=n(75),Tt=n(12),xt=n(13),kt=n(15),It=n(16),Nt=n(2060),Lt=n(871),Rt=n(189),At=n(872),Jt=n(2078),Ut=n(2064),Mt=n(2079),Ft=n(609),zt=n(48),Bt=n(474),Gt=n(357),Ht=n(2065),Vt=n(611);var Wt=function(e){var t=Object(jt.useState)(""),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=Object(jt.useState)(""),i=Object(zt.a)(o,2),l=i[0],s=i[1];return _t.a.createElement(Bt.a,{open:e.visible,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.toggleCreateModal()}}),_t.a.createElement(Bt.a.Header,null,"Create New Pipeline"),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Bt.a.Description,null,_t.a.createElement(Ft.a,{padded:!0},_t.a.createElement(Ht.a,null,_t.a.createElement(Ht.a.Field,{onChange:function(e){r("".concat(e.target.value))}},_t.a.createElement("label",null,"New Pipeline Name:"),_t.a.createElement("input",{placeholder:"Enter new pipeline step name..."})),_t.a.createElement(Ht.a.Field,{onChange:function(e){s("".concat(e.target.value))}},_t.a.createElement("label",null,"Description:"),_t.a.createElement("input",{placeholder:"Please describe what this pipeline does..."})))))),_t.a.createElement(Bt.a.Actions,null,_t.a.createElement(Vt.a,{color:"green",onClick:function(){return e.handleCreatePipeline({name:a,description:l}),void e.handleNewPipelineModalToggle()}},_t.a.createElement(Rt.a,{name:"checkmark"})," Create"),_t.a.createElement(Vt.a,{color:"grey",onClick:function(){return e.handleNewPipelineModalToggle()}},_t.a.createElement(Rt.a,{name:"cancel"})," Cancel")))},Yt=n(2077),qt=n(2059),Kt=n(2057),Zt=n(2058),Qt=n(211),Xt=n.n(Qt),$t=n(182),en=n.n($t),tn=n(452),nn=n.n(tn),an=n(308);n(381),n(382),n(383),n(263),n(384);var rn=function(e){return _t.a.createElement(Bt.a,{open:e.visible,basic:!0,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.toggleModal()}}),_t.a.createElement(Jt.a,{icon:"exclamation circle",content:"ARE YOU SURE?"}),_t.a.createElement(Bt.a.Content,null,_t.a.createElement("p",null,e.message)),_t.a.createElement(Bt.a.Actions,null,_t.a.createElement(Vt.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return e.noAction(),void e.toggleModal()}},_t.a.createElement(Rt.a,{name:"remove"})," No"),_t.a.createElement(Vt.a,{color:"green",inverted:!0,onClick:function(){return e.yesAction(),void e.toggleModal()}},_t.a.createElement(Rt.a,{name:"checkmark"})," Yes")))},on=n(2082),ln=n(873),sn=function(e){var t=e.subheader,n=e.header,a=e.icon,r=e.size,o=e.color;return _t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:a,color:o,size:r})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},n,_t.a.createElement(Jt.a.Subheader,null,t))))},cn=function(e){var t=e.panelOneLabel,n=e.panelOne,a=e.panelTwoLabel,r=e.panelTwo,o=[{menuItem:"".concat(t),render:function(){return _t.a.createElement(on.a.Pane,{attached:!1},n)}},{menuItem:"".concat(a),render:function(){return _t.a.createElement(on.a.Pane,{attached:!1},r)}}];return _t.a.createElement(Ft.a,null,_t.a.createElement(on.a,{menu:{pointing:!0},panes:o}))},dn=function(e){var t=e.body,n=e.header,a=e.loading,r=e.loadingText;return _t.a.createElement(ln.a,{style:{marginTop:"0",height:"100%"}},a?_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},r||"Loading...")):_t.a.createElement(_t.a.Fragment,null),_t.a.createElement(ln.a.Row,{style:{paddingBottom:"0px"}},_t.a.createElement(ln.a.Column,{width:16},n)),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:16,style:{height:"100%"}},_t.a.createElement(Nt.a,{fluid:!0,style:{height:"100%"}},t))))},un={$schema:"http://json-schema.org/draft-07/schema",$id:"http://example.com/example.json",type:"object",title:"The File Extension Type Schema",default:{doc_types:[".pdf"]},additionalProperties:!0,required:["doc_types"],properties:{doc_types:{$id:"#/properties/doc_types",type:"array",title:"The Doc_types Schema",description:"This is an array of all supported file type extensions for this script.",default:[],examples:[[".doc",".pdf"]],additionalItems:!0,items:{$id:"#/properties/doc_types/items",type:["string","null"],title:"Doc file type item schema",description:"Each item in the array is a file extension of a supported file type.",default:"",examples:[".doc",".pdf"],minimum:1,pattern:"^\\.[a-zA-Z0-9]+$"}}}},pn=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).setSelectedTab=function(e){a.setState({modalTab:e})},a.toggleConfirmModal=function(){a.setState({showConfirmModal:!a.state.showConfirmModal})},a.toggleDeleteModal=function(){a.setState({showDeleteModal:!a.state.showDeleteModal})},a.onConfirmSave=function(){a.props.handleUpdateScript(a.state.localScriptObj)},a.onConfirmDelete=function(){a.props.handleDeleteScript(a.state.localScriptObj.id),a.props.handleClearScript(),a.props.handleScriptModalToggle()},a.onDescriptionChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.description=e,a.setState({localScriptObj:t})},a.onToggleMode=function(){var e=Object(i.a)({},a.state.localScriptObj);e.mode="TEST"===e.mode?"DEPLOYED":"TEST",a.setState({localScriptObj:e})},a.onPackageListChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.required_packages=e,a.setState({localScriptObj:t})},a.onSetupScriptChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.setup_script=e,a.setState({localScriptObj:t})},a.onNameChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.human_name=e,t.name=e.replace(" ","_").toUpperCase(),a.setState({localScriptObj:t})},a.onSchemaChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.required_inputs=JSON.stringify(e),a.setState({localScriptObj:t})},a.onFileTypeChange=function(e){if((new nn.a).validate(un,{doc_types:e})){var t=Object(i.a)({},a.state.localScriptObj);return t.supported_file_types=JSON.stringify(e),a.setState({localScriptObj:t}),!0}return!1},a.onTypeChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.type=e,a.setState({localScriptObj:t})},a.onScriptChange=function(e){var t=Object(i.a)({},a.state.localScriptObj);t.script=e,a.setState({localScriptObj:t})},a.tick=function(){a.props.selectedScriptData&&(a.props.loading||a.props.selectedScriptData.locked?(console.log("Scripts are loading or current script is locked... try to refetch"),a.props.handleRefreshScript(a.props.selectedScriptData.id)):console.log("Scripts are not loading and this script isn't locked... nothing to update"))},a.state={serverScriptObj:a.props.selectedScriptData?a.props.selectedScriptData:null,localScriptObj:a.props.selectedScriptData?a.props.selectedScriptData:null,settings:{},showCodeEditor:!0,showJobMeta:!1,showDescriptionEditor:!1,showPackageEditor:!1,showSetupScriptEditor:!1,showSettings:!1,showSetupLog:!1,jsonEditorCollapsed:!0,showConfirmModal:!1,showDeleteModal:!1,showFileTypes:!1,modalTab:0},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){var e=setInterval(this.tick,2e3);this.setState({timer:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this,t=this.props,n=t.collapseStringsAfter,a=t.displayObjectSize,r=t.enableClipboard,o=t.theme,i=t.iconStyle,l=t.indentWidth,s=t.displayDataTypes,c=t.selectedScriptData,d=t.loading,u=t.windowHeight,p={padding:"10px",borderRadius:"3px",margin:"10px 0px"};function h(){var e="";return d?e="Scripts Are Loading...":c&&c.locked&&(e="Script is Being Setup..."),e?_t.a.createElement(Yt.a,{active:!0},_t.a.createElement(qt.a,null,e)):_t.a.createElement(_t.a.Fragment,null)}if(!c)return _t.a.createElement("div",null);var m={};try{m=JSON.parse(this.state.localScriptObj.required_inputs)}catch(E){m={}}var g={};try{g=JSON.parse(this.state.localScriptObj.supported_file_types)}catch(E){g={}}var f=[_t.a.createElement(_t.a.Fragment,null,this.props.detailsAreFetching?_t.a.createElement(Yt.a,{active:!0},_t.a.createElement(qt.a,null,"Loading")):_t.a.createElement(_t.a.Fragment,null),_t.a.createElement(Xt.a,{style:{width:"100%",height:"100%",maxHeight:"100%"},mode:"python",theme:"solarized_dark",name:"code_editor",onChange:this.onScriptChange,fontSize:10,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:this.state.localScriptObj.script,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,useSoftTabs:!0,showLineNumbers:!0,tabSize:4}})),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ft.a,null,_t.a.createElement(Gt.a,{attached:"top"},"Name and Type"),_t.a.createElement(Kt.a,{style:{width:"100%"},name:"pipelineName",value:this.state.localScriptObj.human_name,onChange:function(t){e.onNameChange(t.target.value)}}),_t.a.createElement(Ut.a,{options:[{key:1,text:"Run Once Per Job",value:"RUN_ON_JOB"},{key:2,text:"Run Once Per Doc",value:"RUN_ON_JOB_DOCS_PARALLEL"}],selection:!0,onChange:function(t,n){e.onTypeChange(n.value)},value:this.state.localScriptObj.type})),_t.a.createElement(Ft.a,null,_t.a.createElement(Gt.a,{attached:"top"},"Description"),_t.a.createElement(Zt.a,{style:{width:"100%"},rows:4,value:this.state.localScriptObj?this.state.localScriptObj.description:"",onChange:function(t){return e.onDescriptionChange(t.target.value)}}))),_t.a.createElement(en.a,{collapsed:this.state.jsonEditorCollapsed,style:p,theme:o,src:m,collapseStringsAfterLength:n,onEdit:function(t){e.onSchemaChange(t.updated_src)},onDelete:function(t){e.onSchemaChange(t.updated_src)},onAdd:function(t){e.onSchemaChange(t.updated_src)},displayObjectSize:a,enableClipboard:r,indentWidth:l,displayDataTypes:s,iconStyle:i}),_t.a.createElement(en.a,{collapsed:this.state.jsonEditorCollapsed,style:p,theme:o,src:g,collapseStringsAfterLength:n,onEdit:function(t){return e.onFileTypeChange(t.updated_src)},onDelete:function(t){return e.onFileTypeChange(t.updated_src)},onAdd:function(t){return e.onFileTypeChange(t.updated_src)},displayObjectSize:a,enableClipboard:r,indentWidth:l,displayDataTypes:s,iconStyle:i}),_t.a.createElement(cn,{panelOne:_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Gt.a,{attached:"top"},"Setup Script"),_t.a.createElement(Ht.a,null,_t.a.createElement(Zt.a,{rows:12,value:this.state.localScriptObj?this.state.localScriptObj.setup_script:"",onChange:function(t){return e.onSetupScriptChange(t.target.value)},style:{height:"40vh"}}))),panelOneLabel:"Installer Script",panelTwo:_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Gt.a,{attached:"top"},"Setup Script Logs:"),_t.a.createElement(an.LazyLog,{extraLines:1,enableSearch:!0,text:this.props.selectedScriptData&&""===this.props.selectedScriptData.setup_log?"Log is empty":this.props.selectedScriptData.setup_log,height:.4*u,follow:!0,caseInsensitive:!0})),panelTwoLabel:"Installer Results"}),_t.a.createElement(cn,{panelOne:_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Gt.a,{attached:"top"},"Required Python Packages"),_t.a.createElement(Ht.a,null,_t.a.createElement(Zt.a,{rows:12,value:this.state.localScriptObj?this.state.localScriptObj.required_packages:"",onChange:function(t){return e.onPackageListChange(t.target.value)},style:{height:"40vh"}}))),panelOneLabel:"Package List",panelTwo:_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Gt.a,{attached:"top"},"Package Installation Logs:"),_t.a.createElement(an.LazyLog,{extraLines:1,enableSearch:!0,text:this.props.selectedScriptData&&""===this.props.selectedScriptData.installer_log?"Log is empty":this.props.selectedScriptData.installer_log,height:.4*u,follow:!0,caseInsensitive:!0})),panelTwoLabel:"Install Log"}),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ft.a,{style:{marginBottom:"1vh"}},_t.a.createElement(Gt.a,{attached:"top"},"Script Status")),_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%"}},this.state.localScriptObj.install_error?_t.a.createElement(Ft.a,{raised:!0,style:{width:"100%"}},_t.a.createElement(Gt.a,{attached:"top"},"Installation Error:"),_t.a.createElement(an.LazyLog,{extraLines:1,enableSearch:!0,text:this.state.localScriptObj.install_error_code,height:u/3,follow:!0,caseInsensitive:!0})):_t.a.createElement(Ft.a,{style:{width:"30vw",height:"30vh",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"thumbs up outline",color:"green",size:"massive"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},"INSTALLED",_t.a.createElement(Jt.a.Subheader,null,"No Issues"))))))))];return _t.a.createElement(Bt.a,{size:"fullscreen",open:this.props.visible,onOpen:function(){return e.onModalOpen()},style:{height:"95%",maxHeight:"95%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},_t.a.createElement(rn,{visible:this.state.showConfirmModal,message:"You have selected save on a script. ARE YOU SURE? This cannot be undone and incorrect changes may cause errors and unwanted results.",yesAction:function(){return e.onConfirmSave(e.state.localScriptObj)},noAction:this.toggleConfirmModal,toggleModal:this.toggleConfirmModal}),_t.a.createElement(rn,{visible:this.state.showDeleteModal,message:"You have chosen to delete this script. ARE YOU SURE? This cannot be undone and any dependent pipelines and settings will be lost.",yesAction:function(){return e.onConfirmDelete()},noAction:this.toggleDeleteModal,toggleModal:this.toggleDeleteModal}),_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.props.handleScriptModalToggle()}}),_t.a.createElement(Jt.a,{icon:"archive",content:"Edit Script"}),_t.a.createElement(Bt.a.Content,{style:{flex:10,height:"90%"}},_t.a.createElement(h,null),_t.a.createElement(Ft.a,null,_t.a.createElement(Vt.a,{circular:!0,icon:"save",color:"green",onClick:function(){return e.toggleConfirmModal()}}),_t.a.createElement(Vt.a,{circular:!0,icon:"trash",color:"red",onClick:function(){return e.toggleDeleteModal()}}),_t.a.createElement(Vt.a,{floated:"right",toggle:!0,active:"DEPLOYED"===this.state.localScriptObj.mode,onClick:this.onToggleMode,color:"DEPLOYED"===this.state.localScriptObj.mode?"green":"red"},"DEPLOYED"===this.state.localScriptObj.mode?"In Production":"Testing Mode")),_t.a.createElement(Ft.a,{style:{width:"100%",height:"90%"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",height:"100%",width:"100%"}},_t.a.createElement("div",{style:{height:"100%"}},_t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},_t.a.createElement(Lt.a.Item,{name:"pythoncode",active:0===this.state.modalTab,onClick:function(){return e.setSelectedTab(0)}},_t.a.createElement(Rt.a,{name:"code"}),"Python Code"),_t.a.createElement(Lt.a.Item,{name:"scriptmeta",active:1===this.state.modalTab,onClick:function(){return e.setSelectedTab(1)}},_t.a.createElement(Rt.a,{name:"settings"}),"Settings"),_t.a.createElement(Lt.a.Item,{name:"inputschema",active:2===this.state.modalTab,onClick:function(){return e.setSelectedTab(2)}},_t.a.createElement(Rt.a,{name:"table"}),"Input Schema"),_t.a.createElement(Lt.a.Item,{name:"filetypes",active:3===this.state.modalTab,onClick:function(){return e.setSelectedTab(3)}},_t.a.createElement(Rt.a,{name:"file alternate outline"}),"Filetypes"),_t.a.createElement(Lt.a.Item,{name:"installers",active:4===this.state.modalTab,onClick:function(){return e.setSelectedTab(4)}},_t.a.createElement(Rt.a,{name:"paper plane outline"}),"Installers"),_t.a.createElement(Lt.a.Item,{name:"packages",active:5===this.state.modalTab,onClick:function(){return e.setSelectedTab(5)}},_t.a.createElement(Rt.a,{name:"box"}),"Packages"),_t.a.createElement(Lt.a.Item,{name:"status",active:6===this.state.modalTab,onClick:function(){return e.setSelectedTab(6)}},_t.a.createElement(Rt.a,{name:this.state.localScriptObj.install_error?"warning sign":"thumbs up outline",color:this.state.localScriptObj.install_error?"red":"green"}),"Status"))),_t.a.createElement("div",{style:{flexGrow:10}},_t.a.createElement(Ft.a,{style:{width:"100%",height:"100%"}},f[this.state.modalTab]))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.selectedScriptData!==t.serverScriptObj?{serverScriptObj:e.selectedScriptData,localScriptObj:e.selectedScriptData}:null}}]),n}(jt.Component);pn.defaultProps={theme:"monokai",src:null,collapsed:!1,collapseStringsAfter:15,onAdd:!0,onEdit:!0,onDelete:!0,displayObjectSize:!0,enableClipboard:!0,indentWidth:4,displayDataTypes:!0,iconStyle:"triangle",timer:null};var hn=function(e){var t=Object(jt.useState)(""),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=Object(jt.useState)("RUN_ON_JOB_DOCS_PARALLEL"),i=Object(zt.a)(o,2),l=i[0],s=i[1];return _t.a.createElement(Bt.a,{open:e.visible,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.toggleModal()}}),_t.a.createElement(Bt.a.Header,null,"Create New ",e.objectType),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Bt.a.Description,null,_t.a.createElement(Ft.a,{padded:!0},_t.a.createElement(Ht.a,null,_t.a.createElement(Ht.a.Field,{onChange:function(e){r("".concat(e.target.value))}},_t.a.createElement("label",null,e.objectType," Name:"),_t.a.createElement("input",{placeholder:"Enter new ".concat(e.objectType,"...")})),_t.a.createElement(Ut.a,{options:[{key:1,text:"Run Once Per Job",value:"RUN_ON_JOB"},{key:2,text:"Run Once Per Doc",value:"RUN_ON_JOB_DOCS_PARALLEL"}],selection:!0,onChange:function(e,t){s(t.value)},value:l}))))),_t.a.createElement(Bt.a.Actions,null,_t.a.createElement(Vt.a,{color:"green",onClick:function(){return e.handleCreate(a,l,"RUN_ON_JOB_DOCS_PARALLEL"===l?'#Required Imports #####################################################################################################\n\n#e.g. from OCRUSREX import ocrusrex\n\n\t#Don\'t forget that, if these imports are not already available, you\'ll need to list them out in the\n\t#required dependencies so that Gremlin can install them in the environment. \n\n########################################################################################################################\n\n# user-defined functions to run on docs should expect the following inputs:\n#\n# docText = extracted document text\n# docType = file extension\n# docName = file name\n# docByteObj = actual document binary in bytes\n# logger = Gremlin database logger (resuts will are available via API)\n# scriptInputs = inputs for this script (NOT IMPLEMENTED. Will be NONE)\n# previousData = the combined output data from the previous step. If previous step was run in parallel on all docs, results are packed up into one json.\n#\n# the logger object will be a special instance of the logger just for user scripts and \n# will write out messages to the Gremlin UI (not implemented yet). Currently these\n# are stored in the underlying Celery logs.\n\ndef pythonFunction(*args, docText=None, docType=None, docName=None, docByteObj=None, nodeInputs={}, jobInputs={}, previousData={}, logger=None **kwargs):\n\n\t# logging - use the logger object passed in:\n\t\t# 1) logger.info("...")\n\t\t# 2) logger.warn("...")\n\t\t# 3) logger.error("...")\n\tlogger.info("New function active")\n\n\t#return values - your function must return a tuple of the following form:\n\t#\t( Completed, Message, Data, FileBytesObj, FileExtension, File Packaging Instructions)\n\t#\t\t  |         |       |        |              |\n\t#\t   Boolean    String  JSON    Bytes Obj       String        Dictionary\n\t#\n\t#   You must provided a value for Completed and Message. Everything else can\n\t#   Be returned as None or an empy object. If there is no data, return an \n\t#   empty JSON {}. If there is no file to return return None for the FileBytesObj\n\t#   and None for the File Extension. Otherwise, return the BytesObj representing\n\t#   the file that should be stored, along with the file extension. File names\n\t#   are currently determined automatically, though that may change.  \n\n    # Script must return the following variables:\n    # \n    # (finished, message, dataObj, fileBytes, fileExt, docPackagingObj)\n    #\n    # finished  -   Return True if script runs successfully. False if not. \n    # message   -   A string stored in the job status log. This can be an empty string if you don\'t need this.\n    # dataObj - this should be a dict of return values produced by your script. Any valid dict is OK.\n    # fileBytes - if you want to create a file and package it, pass the bytes of the file object back to Gremlin\n    # fileExt   - if you return file bytes, this is the extension the packager will put on the file bytes.\n    #\n    # finished, message, dataObj, fileBytes, fileExt\n    #\n    return (True, "Sucess Message!", {}, None, None, None)':'#Required Imports #####################################################################################################\n\n#e.g. from OCRUSREX import ocrusrex\n\n    #Don\'t forget that, if these imports are not already available, you\'ll need to list them out in the\n    #required dependencies so that Gremlin can install them in the environment. \n\n########################################################################################################################\n\n# user-defined functions to run on docs should expect the following, read-only objects:\n# job (THIS WILL BE DECONSTRUCTED IN FUTURE RELEASE INTO JSON OBJ /DICT)\n# step (THIS WILL BE DECONSTRUCTED IN FUTURE RELEASE INTO JSON OBJ /DICT)\n#\n# \n# the logger object will be a special instance of the logger just for user scripts and \n# will write out messages to the Gremlin UI (not implemented yet). Currently these\n# are stored in the underlying Celery logs.\n                                      \n\ndef pythonFunction(*args, job=None, step=None, logger=None, nodeInputs={}, jobInputs={}, previousData={}, **kwargs):\n\n    # logging - use the logger object passed in:\n        # 1) logger.info("...")\n        # 2) logger.warn("...")\n        # 3) logger.error("...")\n    logger.info("New function active")\n\n    # Return values - your function must return a tuple of the following form:\n    #   (Completed, Message, Data, FileBytesObj, FileExtension, File Packaging Instructions)\n    #              |        |     |            |              |\n    #     Boolean  | String |JSON |  Bytes Obj |    String    |           Dictionary\n    #\n    #   You must provided a value for Completed and Message. Everything else can\n    #   Be returned as None or an empy object. If there is no data, return an \n    #   empty JSON {}. If there is no file to return return None for the FileBytesObj\n    #   and None for the File Extension. Otherwise, return the BytesObj representing\n    #   the file that should be stored, along with the file extension. File names\n    #   are currently determined automatically, though that may change. \n    #\n    # Script must return the following variables:\n    # \n    # (finished, message, dataObj, fileBytes, fileExt, docPackagingObj)\n    #\n    # finished  -   Return True if script runs successfully. False if not. \n    # message   -   A string stored in the job status log. This can be an empty string if you don\'t need this.\n    # dataObj - this should be a dict of return values produced by your script. Any valid dict is OK.\n    # fileBytes - if you want to create a file and package it, pass the bytes of the file object back to Gremlin\n    # fileExt   - if you return file bytes, this is the extension the packager will put on the file bytes.\n    # docPackagingObj - if you want to return the original documents, you can specify how those get packaged\n    #                   with subfolders and the like. See separate instructions. \n\n    return (True, "Success Message!", {}, None, None, None)'),void e.toggleModal()}},_t.a.createElement(Rt.a,{name:"checkmark"})," Create"),_t.a.createElement(Vt.a,{color:"grey",onClick:function(){return e.toggleModal()}},_t.a.createElement(Rt.a,{name:"cancel"})," Cancel")))},mn=n(2069),gn=n(2061),fn=n(601),En=n.n(fn);function bn(e){return _t.a.createElement(mn.a.Row,{key:e.pipeline.id,onClick:function(){return e.handleSelectPipeline(e.pipeline.id)},style:e.selected?{backgroundColor:"#e2ffdb"}:{}},_t.a.createElement(mn.a.Cell,null,e.pipeline.name),_t.a.createElement(mn.a.Cell,null,e.pipeline.total_steps),_t.a.createElement(mn.a.Cell,null,e.pipeline.description))}var vn=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;Object(Tt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).createInitialSchema=function(){try{var t={},n=c.a.find(e.props.pipelines.items,{id:e.props.pipelines.selectedPipelineId});console.log("Pipe: ",n);console.log("initialJobSettings: ",{schema:{}});var a=JSON.parse(n.schema).schema;for(var r in console.log("Schema: ",a),En.a.option({optionName:"value",ignoreMissingRefs:!0,useExamplesValue:!0}),a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]={name:a[r].name,schema:En.a.generate(a[r].schema)});return console.log("initialJobInputs: ",t),JSON.stringify(t)}catch(o){return console.log("Error building schema: ",o),JSON.stringify({})}},e}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.pipelines,a=t.visible,r=t.application,o=n.items?n.items:[];return _t.a.createElement(Bt.a,{open:a,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.props.handleNewJobModalToggle()}}),_t.a.createElement(Bt.a.Content,null,o.length>0?_t.a.createElement("div",null,_t.a.createElement(Ht.a,null,_t.a.createElement(Ht.a.Field,null,_t.a.createElement("label",null,"New Job Name:"),_t.a.createElement("input",{value:r.newJobName,onChange:function(t){e.props.handleUpdateNewJobName(t.target.value)}}))),_t.a.createElement(gn.a,{horizontal:!0}),_t.a.createElement(mn.a,{celled:!0},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,null,_t.a.createElement(mn.a.HeaderCell,null,"Pipeline Name"),_t.a.createElement(mn.a.HeaderCell,null,"Pipeline Steps"),_t.a.createElement(mn.a.HeaderCell,null,"Pipeline Description"))),_t.a.createElement(mn.a.Body,null,o.map((function(t){return _t.a.createElement(bn,{key:t.id,pipeline:t,selected:t.id===n.selectedPipelineId,handleSelectPipeline:e.props.handleSelectPipeline})}))))):_t.a.createElement(Ft.a,{placeholder:!0},_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"random"}),"No Pipelines Available..."))),_t.a.createElement(Bt.a.Actions,null,o.length>0?_t.a.createElement(Vt.a,{color:"green",onClick:function(){return e.props.handleCreateJob({name:r.newJobName,pipeline:n.selectedPipelineId,job_inputs:e.createInitialSchema()})}},_t.a.createElement(Rt.a,{name:"checkmark"})," Create"):_t.a.createElement("div",null)))}}]),n}(jt.Component),yn=n(2083),Sn={title:"Invite New User",type:"object",properties:{name:{type:"string",title:"Name:"},username:{type:"string",title:"Username:"},email:{type:"string",title:"E-Mail:"},role:{title:"User Type:",type:"string",hint:"What level of user permissions should new user have?",enum:["LAWYER","ADMIN","LEGAL_ENG"],enumNames:["Lawyer","Administrator","Legal Engineer"]}},required:["name","username","email","role"]},wn={role:{"ui:placeholder":"Choose user type"}},Cn={title:"Change My Password",type:"object",properties:{old_password:{type:"string",title:"Old Password:"},new_password:{type:"string",title:"New Password:"},new_password2:{type:"string",title:"Confirm New Password:"}},required:["old_password","new_password","new_password2"]},jn={old_password:{"ui:widget":"password"},new_password:{"ui:widget":"password"},new_password2:{"ui:widget":"password"}},_n={title:"Create Job",type:"object",properties:{name:{type:"string",title:"Job Name:"},notification_email:{type:"string",title:"Notification email (when job completes):"}},required:["properties","notification_email"]},On={name:{"ui:placeholder":"Give this job a name you can use to find it later."},notification_email:{"ui:placeholder":"(Optional) Enter an e-mail to receive a notification when this job completes."}};function Dn(e,t){var n;return n=e.email,/^\S+@\S+$/.test(String(n).toLowerCase())||t.email.addError("Not a valid e-mail address!"),t}function Pn(e,t){return e.new_password!==e.new_password2&&t.new_password2.addError("Two new passwords must match!"),t}var Tn=n(297),xn=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.formData;console.log("update",t),a.setState(t)},a.handleSubmit=function(){var e=a.state;a.props.handleInviteUser(e),console.log("Submit values: ",e)},a.state={username:"",email:"",name:"",role:"LAWYER"},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.toggle,n=e.visible;return _t.a.createElement(Bt.a,{open:n,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return t()}}),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Tn.a,{schema:Sn,uiSchema:wn,validate:Dn,onChange:this.handleChange,formData:this.state},_t.a.createElement(Vt.a,{color:"blue",onClick:this.handleSubmit},"Submit"))))}}]),n}(jt.Component),kn=n(2062);function In(e){var t=e.user,n=e.handleChangeUserPermissions,a=["ADMIN","LAWYER","LEGAL_ENG"],r=[];return r=(a="ADMIN"===t.role?[]:"LAWYER"===t.role?a.filter((function(e){return"LAWYER"!==e})):"LEGAL_ENG"===t.role?a.filter((function(e){return"LEGAL_ENG"!==e})):[]).length>0?a.map((function(e){return _t.a.createElement(Ut.a.Item,{onClick:function(){return n(t.id,e)}},e)})):[_t.a.createElement(Ut.a.Item,{disabled:!0},"Can't Change Admin")],_t.a.createElement(Ut.a,{trigger:_t.a.createElement(Vt.a,{icon:"caret down",basic:!0,circular:!0}),options:r,pointing:"top left",icon:null})}var Nn=function(e){var t=e.user,n=e.onDelete,a=e.handleChangeUserPermissions,r=Object(jt.useState)(!1),o=Object(zt.a)(r,2),i=o[0],l=o[1];return _t.a.createElement(_t.a.Fragment,null,_t.a.createElement(kn.a,{open:i,content:"You have chosen to delete user with username ".concat(t.username,". Their jobs will be preserved, but only an admin can retrieve them. ARE YOU SURE?"),confirmButton:"DELETE",onCancel:function(){return l(!i)},onConfirm:function(){return t.id,n(t.id),void l(!1)}}),_t.a.createElement(mn.a.Row,{key:t.id},_t.a.createElement(mn.a.Cell,{width:4},t.username),_t.a.createElement(mn.a.Cell,{width:3},t.email),_t.a.createElement(mn.a.Cell,{width:3},t.name),_t.a.createElement(mn.a.Cell,{width:3},t.role),_t.a.createElement(mn.a.Cell,{textAlign:"center",width:2},_t.a.createElement(Vt.a,{icon:"trash",basic:!0,circular:!0,color:"red",onClick:function(){return l(!i)}}),_t.a.createElement(In,{user:t,handleChangeUserPermissions:a}))))},Ln=n(192),Rn=n(257);function An(){var e=Object(Ln.a)(["\n    position: relative;\n    background-size: 10px 10px;\n    background-color: #4f6791;\n    background-image:\n        linear-gradient(90deg,hsla(0,0%,100%,.1) 1px,transparent 0),\n        linear-gradient(180deg,hsla(0,0%,100%,.1) 1px,transparent 0);\n    width: 100%;\n    height: 100%;\n    cursor: not-allowed;\n"]);return An=function(){return e},e}function Jn(){var e=Object(Ln.a)(["\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    justify-content: center;\n"]);return Jn=function(){return e},e}function Un(){var e=Object(Ln.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height:100%;\n    width:100%;\n"]);return Un=function(){return e},e}function Mn(){var e=Object(Ln.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    height:100%;\n    width:100%;\n"]);return Mn=function(){return e},e}function Fn(){var e=Object(Ln.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n"]);return Fn=function(){return e},e}function zn(){var e=Object(Ln.a)(["\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n"]);return zn=function(){return e},e}Rn.a.div(zn());var Bn=Rn.a.div(Fn()),Gn=Rn.a.div(Mn()),Hn=Rn.a.div(Un()),Vn=(Rn.a.div(Jn()),Rn.a.div(An()),function(e){return _t.a.createElement(Ft.a,{raised:!0,style:{padding:"0px",height:"60vh",overflow:"scroll"}},_t.a.createElement(mn.a,{selectable:!0,structured:!0,size:"small"},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,{textAlign:"center"},_t.a.createElement(mn.a.HeaderCell,null,"Username"),_t.a.createElement(mn.a.HeaderCell,null,"E-mail"),_t.a.createElement(mn.a.HeaderCell,null,"Name"),_t.a.createElement(mn.a.HeaderCell,null,"Type"),_t.a.createElement(mn.a.HeaderCell,null,"Actions"))),_t.a.createElement(mn.a.Body,null,e.children)))}),Wn=function(e){return _t.a.createElement(Ft.a,null,_t.a.createElement(Hn,null,_t.a.createElement("div",{style:{width:"25vw"}},_t.a.createElement(Ht.a,{onSubmit:e.handleFetchUsers},_t.a.createElement(Ht.a.Input,{icon:_t.a.createElement(Rt.a,{name:"search",inverted:!0,circular:!0,link:!0}),placeholder:"Search...",onChange:function(t){return e.handleSetUserNameFilter(t.target.value)},value:e.filterValue}))),_t.a.createElement("div",null,_t.a.createElement(Vt.a,{color:"green",onClick:function(){return e.handleToggleInviteUserModal()}},_t.a.createElement(Rt.a,{name:"plus square"}),"Invite New User"))))},Yn=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.props.handleFetchUsers()}},{key:"render",value:function(){var e=this,t=this.props.users,n=t.items,a=t.loading,r=t.page,o=t.pages,i=t.searchText,l=t.selectedUser,s=this.props,c=s.handleDeleteUser,d=s.showInviteModal,u=s.handleToggleInviteUserModal,p=n||[],h=[];if(p.length>0)for(var m=0;m<p.length;m++)h.push(_t.a.createElement(Nn,{key:p[m].id,user:p[m],selected:p[m].id===l,onDelete:c,handleChangeUserPermissions:this.props.handleChangeUserPermissions}));else h.push(_t.a.createElement(mn.a.Row,{key:0},_t.a.createElement(mn.a.Cell,{textAlign:"center",colSpan:"8"},"No users match your selection")));return _t.a.createElement(Bn,null,_t.a.createElement(xn,{handleInviteUser:this.props.handleCreateUser,toggle:u,visible:d}),a?_t.a.createElement(Yt.a,{active:!0},_t.a.createElement(qt.a,null,"Loading...")):_t.a.createElement(_t.a.Fragment,null),_t.a.createElement(Wn,{handleSetUserNameFilter:this.props.handleSetUserNameFilter,handleToggleInviteUserModal:u,handleFetchUsers:this.props.handleFetchUsers,filterValue:i}),_t.a.createElement(Vn,null,h),_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"2vh"}},_t.a.createElement("div",null,_t.a.createElement(yn.a,{activePage:r,onPageChange:function(t,n){var a=n.activePage;return e.props.handleUserPageChange(a)},totalPages:o}))))}}]),n}(jt.Component),qn=n(465);function Kn(e){try{return JSON.parse(e.extensions).map((function(e){return _t.a.createElement(Gt.a,{color:"grey",key:"".concat(e),size:"tiny"},e)}))}catch(t){return _t.a.createElement(Gt.a,{color:"red",size:"tiny"},"ERROR")}}var Zn=function(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=n[0],r=n[1];return _t.a.createElement(mn.a.Row,{style:e.selected?{backgroundColor:"#e2ffdb",overflowWrap:"break-word"}:{overflowWrap:"break-word"},textAlign:"center"},_t.a.createElement(kn.a,{open:a,content:"You have chosen to delete a script (which will delete any pipelines that depend on it). ARE YOU SURE? This cannot be undone.",confirmButton:"DELETE",onCancel:function(){return r(!a)},onConfirm:function(){return e.onDelete(e.script.id)}}),_t.a.createElement(mn.a.Cell,{onClick:function(){return e.onClick()},style:{cursor:"pointer",color:"blue",textDecoration:"underline"},textAlign:"left"},e.script.human_name),_t.a.createElement(mn.a.Cell,null,e.script.description?e.script.description.substring(0,25):"No Description..."),_t.a.createElement(mn.a.Cell,null,_t.a.createElement("div",null,"RUN_ON_JOB"===e.script.type?_t.a.createElement(At.a,{src:"./serial_job.png",size:"mini"}):_t.a.createElement(At.a,{src:"./parallel_job.png",size:"mini"}))),_t.a.createElement(mn.a.Cell,null,_t.a.createElement(Kn,{extensions:e.script.supported_file_types})),_t.a.createElement(mn.a.Cell,null,"DEPLOYED"===e.script.mode?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"DEPLOYED"):_t.a.createElement(Gt.a,{color:"yellow",size:"tiny"},"TEST")),_t.a.createElement(mn.a.Cell,null,_t.a.createElement(Vt.a,{basic:!0,circular:!0,color:"red",icon:"trash",onClick:function(){return r(!a)}}),_t.a.createElement(Vt.a,{basic:!0,circular:!0,color:"green",icon:"download",onClick:function(){return e.onDownload(e.script.id)}})))},Qn=n(2074),Xn=n(296),$n=n.n(Xn),ea=n(2073);function ta(e){return _t.a.createElement(Ft.a,{style:{width:"100%",height:"100%"}},_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},e.LoadingText)),_t.a.createElement(ea.a,null,_t.a.createElement(ea.a.Image,{rectangular:!0})))}var na=function(e){var t=e.onChange,n=e.onCreate,a=e.onImport,r=e.onSubmit,o=e.placeholder,i=e.value,l=_t.a.Fragment,s=[_t.a.createElement(Vt.a,{key:"create_new_button",positive:!0,onClick:n},"Create New")];return a&&(s.push(_t.a.createElement(Vt.a.Or,{key:"create_and_search_button_or"})),s.push(_t.a.createElement(Vt.a,{key:"import_type_button",onClick:a},"Import New"))),l=_t.a.createElement(Vt.a.Group,{floated:"right",style:{marginRight:"10px"}},s),_t.a.createElement(Ft.a,{raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"}},_t.a.createElement("div",{style:{width:"25vw"}},_t.a.createElement(Ht.a,{onSubmit:r},_t.a.createElement(Ht.a.Input,{icon:"search",placeholder:o,onChange:function(e){return t(e.target.value)},value:i}))),_t.a.createElement("div",null,l)))},aa=function(e){var t=e.digraphEngine;return _t.a.createElement(Lt.a,{icon:!0},_t.a.createElement(Lt.a.Item,{name:"zoom_in",onClick:function(e){e.stopPropagation(),t.zoomIn()}},_t.a.createElement(Rt.a,{name:"zoom-in",size:"large"})),_t.a.createElement(Lt.a.Item,{name:"zoom_out",onClick:function(e){e.stopPropagation(),t.zoomOut()}},_t.a.createElement(Rt.a,{name:"zoom-out",size:"large"})),_t.a.createElement(Lt.a.Item,{name:"zoom_fit",onClick:function(e){e.stopPropagation(),t.zoomToFit()}},_t.a.createElement(Rt.a,{name:"compress",size:"large"})))},ra=function(e){var t=e.job,n=e.pipeline,a=e.handleUpdateJob;return t?_t.a.createElement(ln.a,null,_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0},_t.a.createElement(Jt.a,{textAlign:"center",as:"h2"},_t.a.createElement(Jt.a.Content,null,t?t.name:"[JOB NAME]",_t.a.createElement(Jt.a.Subheader,null,"(",n?n.name:"[PIPELINE NAME]",")"))))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},t.started?_t.a.createElement("div",null,_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Progress:"),_t.a.createElement($n.a,{style:{textAlign:"center"},progress:(100*t.completed_tasks/t.task_count).toFixed(2)})):_t.a.createElement("div",{style:{margin:"auto"},onClick:function(){var e={id:t.id,queued:!0};a(e)}},_t.a.createElement(Jt.a,{textAlign:"center",as:"h4",style:{cursor:"pointer"}},_t.a.createElement(Rt.a,{size:"big",style:{margin:"auto"},name:"video play"}),"Start")))),_t.a.createElement(ln.a.Row,{columns:2},_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Status:"),t.queued?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Queued"):_t.a.createElement("div",null),t.started&!t.finished?_t.a.createElement(Gt.a,{color:"blue",size:"tiny"},"Running..."):_t.a.createElement("div",null),t.error?_t.a.createElement(Gt.a,{color:"red",size:"tiny"},"ERROR"):_t.a.createElement("div",null),t.finished?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Finished"):_t.a.createElement("div",null)),_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Notified Email:"),t.notification_email?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},t.notification_email):_t.a.createElement(Gt.a,{color:"grey",size:"tiny"},"None Provided"))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},_t.a.createElement(Qn.a,{size:"tiny",style:{overflowWrap:"break-word"}},_t.a.createElement(Qn.a.Content,null,_t.a.createElement(Qn.a.Header,{as:"h6"},"State:"),t.status))))):_t.a.createElement(_t.a.Fragment,null)},oa=function(e){var t=e.job,n=e.pipeline,a=e.handleUpdateJob,r=e.style;return _t.a.createElement(Ft.a,{style:r},t?_t.a.createElement(ra,{job:t,pipeline:n,handleUpdateJob:a}):_t.a.createElement(ta,{LoadingText:"Creating Test Job..."}))},ia=function(e){return _t.a.createElement(Ft.a,{raised:!0,style:{padding:"0px",height:"70vh",overflow:"scroll"}},_t.a.createElement(mn.a,{selectable:!0,structured:!0,size:"small"},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,{textAlign:"center"},_t.a.createElement(mn.a.HeaderCell,null,"Name"),_t.a.createElement(mn.a.HeaderCell,null,"Description"),_t.a.createElement(mn.a.HeaderCell,null,"Type"),_t.a.createElement(mn.a.HeaderCell,null,"Doc Types"),_t.a.createElement(mn.a.HeaderCell,null,"Status"),_t.a.createElement(mn.a.HeaderCell,null,"Actions"))),_t.a.createElement(mn.a.Body,null,e.children)))},la=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;Object(Tt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getPipelineStepsForPipeline=function(t){return c.a.filter(e.props.pipelinesteps.items,{pipeline:t})},e.getScriptsForPipelines=function(t){return t.map((function(t){return c.a.find(e.props.scripts.items,{id:t.script})}))},e.uploadScriptArchive=function(t){t.preventDefault(),console.log(t.target.files[0]),e.props.handleUploadScript(t.target.files[0])},e}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=_t.a.createRef(),n=function(e,t){var n=Math.pow(10,t);return~~(e*n)/n}(this.props.pipelines.length/4,0);this.props.pipelines.length/4>n&&n++;for(var a=this.props.scripts.items?this.props.scripts.items:[],r=this.props.nameFilterValue,o=new qn.a(a,{threshold:.4,keys:["human_name","description"]}),i=""===r?a:o.search(r).map((function(e){return e.item})),l=[],s=function(t){l.push(_t.a.createElement(Zn,{key:i[t].id,onClick:function(){return e.props.handleScriptSelect(i[t].id)},script:i[t],selected:i[t].id===e.props.scripts.selectedScriptId,toggleEditModal:e.props.handleScriptModalToggle,onDelete:e.props.handleDeleteScript,onDownload:e.props.handleDownloadScript}))},c=0;c<i.length;c++)s(c);return _t.a.createElement(Bn,null,_t.a.createElement("input",{ref:t,type:"file",hidden:!0,onChange:this.uploadScriptArchive}),_t.a.createElement(na,{onChange:this.props.handleChangeScriptNameFilter,onCreate:this.props.handleNewScriptModalToggle,onSubmit:function(e){},onImport:function(){return t.current.click()},placeholder:"Search for script...",value:r}),_t.a.createElement(ia,{loading:this.props.scripts.loading},l))}}]),n}(jt.Component),sa=n(2071),ca=n(2070),da=n(2072),ua=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).handleResetValuesChange=function(e){var t=e.formData;console.log("update",t),a.setState(t)},a.resetChangePasswordForm=function(e){a.setState={expandPasswordReset:!1,old_password:"",new_password:"",new_password2:""}},a.handleResetValuesSubmit=function(){console.log("Try to reset password with old_password ".concat(a.state.old_password,", \n                    old_password2 ").concat(a.state.old_password2," and new_password ").concat(a.state.new_password)),a.props.handleChangePassword(a.state.old_password,a.state.new_password),a.togglePasswordReset()},a.togglePasswordReset=function(){a.setState({expandPasswordReset:!a.state.expandPasswordReset})},a.toggleChangePasswordModal=function(){a.setState({showChangePasswordModal:!a.state.showChangePasswordModal})},a.state={showChangePasswordModal:!1,expandPasswordReset:!1,old_password:"",new_password:"",new_password2:""},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n=t.email,a=t.name,r=t.role,o=t.username,i=[{menuItem:"Current User",render:function(){return _t.a.createElement(on.a.Pane,null,_t.a.createElement(sa.a,{fluid:!0},_t.a.createElement(sa.a.Content,{header:"User Information"}),_t.a.createElement(sa.a.Content,null,_t.a.createElement(ca.a,null,_t.a.createElement(ca.a.Item,null,_t.a.createElement(ca.a.Icon,{name:"users"}),_t.a.createElement(ca.a.Content,null,a)),_t.a.createElement(ca.a.Item,null,_t.a.createElement(ca.a.Icon,{name:"user outline"}),_t.a.createElement(ca.a.Content,null,o)),_t.a.createElement(ca.a.Item,null,_t.a.createElement(ca.a.Icon,{name:"mail"}),_t.a.createElement(ca.a.Content,null,_t.a.createElement("a",{href:"mailto:jack@semantic-ui.com"},n))),_t.a.createElement(ca.a.Item,null,_t.a.createElement(ca.a.Icon,{name:"linkify"}),_t.a.createElement(ca.a.Content,null,"User Type: ",r)))),_t.a.createElement(sa.a.Content,{extra:!0},_t.a.createElement(da.a,{fluid:!0,styled:!0},_t.a.createElement(da.a.Title,{active:e.state.expandPasswordReset,index:0,onClick:e.togglePasswordReset},_t.a.createElement(Rt.a,{name:"dropdown"}),"Change Password"),_t.a.createElement(da.a.Content,{active:e.state.expandPasswordReset},_t.a.createElement(Tn.a,{schema:Cn,uiSchema:jn,validate:Pn,onChange:e.handleResetValuesChange,formData:e.state},_t.a.createElement(Vt.a,{color:"blue",onClick:e.handleResetValuesSubmit},"Change Password")))))))}},{menuItem:"System Settings",render:function(){return _t.a.createElement(on.a.Pane,null,_t.a.createElement(Ft.a,{style:{width:"100%"}},_t.a.createElement(Qn.a,{icon:"inbox",header:"Coming Soon!",content:"For now, please use the admin panel on the backend."})))}}];return"ADMIN"===r&&i.push({menuItem:"Admin Settings",render:function(){return _t.a.createElement(on.a.Pane,null,_t.a.createElement(Ft.a,{style:{width:"100%"}},_t.a.createElement(Qn.a,{icon:"inbox",header:"Coming Soon!",content:"For now, please use the admin panel on the backend."})))}}),_t.a.createElement("div",null,_t.a.createElement(on.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:i,style:{minHeight:"40vh"}}))}}]),n}(jt.Component),pa=n(2080),ha=n(2063);var ma=function(e){return _t.a.createElement(Bt.a,{open:e.visible},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return e.handleModalToggle()}}),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Bt.a.Header,{as:"h3"},"Pipeline System Logs:"),_t.a.createElement(Ft.a,null,e.loading?_t.a.createElement(Qn.a,{icon:!0},_t.a.createElement(Rt.a,{name:"circle notched",loading:!0}),_t.a.createElement(Qn.a.Content,null,_t.a.createElement(Qn.a.Header,null,"Just one second"),"Fetching logs for you...")):_t.a.createElement(an.LazyLog,{extraLines:1,enableSearch:!0,text:e.log?e.log:"No logs...",height:400,follow:!0,caseInsensitive:!0}))))},ga=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).state={hideJson:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.collapseStringsAfter,a=t.groupArraysAfter,r=t.displayObjectSize,o=t.enableClipboard,l=t.theme,s=t.iconStyle,c=t.collapsed,d=t.indentWidth,u=t.displayDataTypes,p=this.props.style?this.props.style:{padding:"10px",borderRadius:"3px",margin:"10px 0px",maxHeight:"30vh"};return _t.a.createElement(Ft.a,{style:Object(i.a)({},this.props.style)},_t.a.createElement(Yt.a,{active:this.props.loading,inverted:!0},_t.a.createElement(qt.a,{size:"tiny",inverted:!0},"Loading")),_t.a.createElement(da.a,{fluid:!0,style:Object(i.a)({},this.props.style)},_t.a.createElement(da.a.Title,{active:this.state.hideJson,onClick:function(){return e.setState({hideJson:!e.state.hideJson})}},_t.a.createElement(Rt.a,{name:"dropdown"}),this.props.title?this.props.title:"Data",":"),_t.a.createElement(da.a.Content,{active:this.state.hideJson,style:{overflowY:"scroll"}},_t.a.createElement(en.a,{collapsed:c,style:Object(i.a)(Object(i.a)({},p),{},{fontSize:9}),theme:l,src:this.props.jsonObj,collapseStringsAfterLength:n,groupArraysAfterLength:a,displayObjectSize:r,enableClipboard:o,indentWidth:d,displayDataTypes:u,iconStyle:s}))))}}]),n}(jt.Component);function fa(e){var t=e.myResult,n=e.test_job,a=e.pipelineStep,r=e.toggleModalVisible,o=e.visible,l=e.updatePipelineStep,s=e.handleTestTransformForResult,c=Object(jt.useState)(a&&a.input_transform?a.input_transform:"No transform..."),d=Object(zt.a)(c,2),u=d[0],p=d[1],h={};try{h=n.test_transforms[t.id]}catch(g){}if(!t)return _t.a.createElement(Bt.a,{onClose:function(){return r()},open:o},_t.a.createElement(Bt.a.Header,null,"Test New Data Transforms"),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Bt.a.Description,null,"It doesn't appear you've run a test job or else something has gone wrong, and this node doesn't have any results.")));var m={data:null};if(t.raw_input_data)try{m=JSON.parse(t.raw_input_data)}catch(f){}return _t.a.createElement(Bt.a,{onClose:function(){return r()},open:o},_t.a.createElement(Bt.a.Header,null,"Test New Data Transforms"),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Yt.a,{active:n.transform_loading,inverted:!0},_t.a.createElement(qt.a,{size:"tiny",inverted:!0},"Applying Transform...")),_t.a.createElement(ln.a,{columns:1},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Jt.a,null,"Test Out New Transform Scripts"),_t.a.createElement("p",null,"Test out different Python transformation scripts to see how input_data from preceding nodes will be be altered by this node before passing them its script. Useful to adjust output data from an existing script / node to match what you need for a different node. This lets you mix and match nodes more easily."))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(ln.a,{columns:2,divided:!0},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Ft.a,{style:{maxHeight:"30vh"}},_t.a.createElement(Gt.a,{attached:"top"},"Input Data:"),_t.a.createElement(ga,{collapsed:!1,jsonObj:m}))),_t.a.createElement(ln.a.Column,null,_t.a.createElement(Ft.a,{style:{maxHeight:"30vh"}},_t.a.createElement(Gt.a,{attached:"top"},"Transformed Data:"),_t.a.createElement(ga,{collapsed:!1,jsonObj:h||{message:"It appears no test transforms are available."}}))))))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Ft.a,{style:{maxHeight:"30vh"}},_t.a.createElement(Gt.a,{attached:"top"},"Draft Transform Script"),_t.a.createElement(Xt.a,{style:{padding:"10px",borderRadius:"3px",margin:"10px 0px",maxHeight:"200px",width:"100%"},mode:"python",theme:"tomorrow",name:"code_editor",fontSize:11,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:u,onChange:p,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4}})))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Vt.a,{floated:"right",size:"mini",icon:"play",content:"Test",color:"orange",onClick:function(){return s(t.id,u)}}))))),_t.a.createElement(Bt.a.Actions,null,_t.a.createElement(Vt.a,{content:"Cancel",labelPosition:"right",icon:"exit",negative:!0,onClick:function(){return r}}),_t.a.createElement(Vt.a,{content:"Save",labelPosition:"right",icon:"save",positive:!0,onClick:function(){var e=Object(i.a)({},a);e.input_transform=u,l(e)}})))}ga.defaultProps={theme:"bright:inverted",src:null,collapsed:!0,collapseStringsAfter:15,groupArraysAfter:500,onAdd:!0,onEdit:!0,onDelete:!0,displayObjectSize:!0,enableClipboard:!0,indentWidth:4,displayDataTypes:!0,iconStyle:"triangle"};var Ea=function(e){return jt.createElement(rn,{visible:e.visible,message:"YOu have chosen to save the changes you made to this JSON object. ARE YOU SURE?",yesAction:function(){return e.onConfirm()},noAction:e.toggleModal,toggleModal:e.toggleModal})},ba=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).updateJson=function(){a.props.onSave(JSON.stringify(a.state.json)),a.toggleConfirmModal()},a.onSchemaChange=function(e){a.setState({json:e})},a.toggleConfirmModal=function(){a.setState({showSaveSettingsConfirm:!a.state.showSaveSettingsConfirm})},a.state={json:e.jsonObj,collapsed:!0,showSaveSettingsConfirm:!1,expanded:!0},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t="rjv-default",n=!1,a=15,r=!0,o=!0,i=4,l=!0,s="triangle";return jt.createElement(jt.Fragment,null,jt.createElement(Ea,{visible:this.state.showSaveSettingsConfirm,toggleModal:this.toggleConfirmModal,onConfirm:this.updateJson}),jt.createElement("div",{style:{textAlign:"center"}},jt.createElement("div",null,jt.createElement(Jt.a,{as:"h4"},jt.createElement(Rt.a,{name:"settings"}),jt.createElement(Jt.a.Content,null,"Persisted Script Inputs",jt.createElement(Jt.a.Subheader,{as:"h6"},"(Overriden by Conflicting Job Settings)"))))),jt.createElement(Ft.a,{style:{width:"350px"}},jt.createElement(ha.a,{content:this.props.toolTip,on:"hover",trigger:jt.createElement(Gt.a,{attached:"top"},"Settings JSON:")}),jt.createElement(en.a,{collapsed:this.state.collapsed,style:{padding:"10px",borderRadius:"3px",margin:"10px 0px"},name:n,theme:t,src:this.state.json,collapseStringsAfterLength:a,onEdit:function(t){e.onSchemaChange(t.updated_src)},onDelete:function(t){e.onSchemaChange(t.updated_src)},onAdd:function(t){e.onSchemaChange(t.updated_src)},displayObjectSize:r,enableClipboard:o,indentWidth:i,displayDataTypes:l,iconStyle:s})),jt.createElement("div",{style:{textAlign:"right"}},jt.createElement(Vt.a,{primary:!0,onClick:function(){return e.toggleConfirmModal()}},"Save")))}}]),n}(jt.PureComponent),va=function(e){return jt.createElement(rn,{visible:e.visible,message:"YOu have chosen to save the changes you made to this JSON object. ARE YOU SURE?",yesAction:function(){return e.onConfirm()},noAction:e.toggleModal,toggleModal:e.toggleModal})},ya=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).toggleConfirmModal=function(){a.setState({showSaveConfirm:!a.state.showSaveConfirm})},a.updateCode=function(){a.props.onSave(a.state.code),a.toggleConfirmModal()},a.onCodeChange=function(e){console.log("Code change:",e),a.setState({code:e})},a.state={code:e.code,collapsed:!0,showSaveConfirm:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props.additionalActions;return jt.createElement(jt.Fragment,null,jt.createElement(va,{visible:this.state.showSaveConfirm,toggleModal:this.toggleConfirmModal,onConfirm:this.updateCode}),jt.createElement("div",{style:{textAlign:"center"}},jt.createElement("div",null,jt.createElement(Jt.a,{as:"h4"},jt.createElement(Rt.a,{name:"code"}),jt.createElement(Jt.a.Content,null,"Input Data Transform Script",jt.createElement(Jt.a.Subheader,{as:"h6"},"Python Code to Apply to Input JSON"))))),jt.createElement(Ft.a,{style:{width:"350px",paddingTop:"20px"}},jt.createElement(ha.a,{content:this.props.toolTip,on:"hover",trigger:jt.createElement(Gt.a,{attached:"top"},this.props.title?this.props.title:"Script:")}),jt.createElement(Xt.a,{style:{padding:"10px",borderRadius:"3px",margin:"10px 0px",maxHeight:"200px",width:"100%"},mode:"python",theme:"tomorrow",name:"code_editor",onChange:this.onCodeChange,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:this.state.code,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4}})),jt.createElement("div",{style:{textAlign:"right"}},jt.createElement(Vt.a,{primary:!0,onClick:function(){return e.toggleConfirmModal()},size:"mini"},"Save"),t||jt.createElement(jt.Fragment,null)))}}]),n}(jt.Component),Sa=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).state={hidePython:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement(Ft.a,{style:Object(i.a)({},this.props.style)},_t.a.createElement(Yt.a,{active:this.props.loading,inverted:!0},_t.a.createElement(qt.a,{size:"tiny",inverted:!0},"Loading")),_t.a.createElement(da.a,{fluid:!0,style:Object(i.a)({},this.props.style)},_t.a.createElement(da.a.Title,{active:this.state.hidePython,onClick:function(){return e.setState({hidePython:!e.state.hidePython})}},_t.a.createElement(Rt.a,{name:"dropdown"}),this.props.title?this.props.title:"Code",":"),_t.a.createElement(da.a.Content,{active:this.state.hidePython},_t.a.createElement(Xt.a,{style:{padding:"10px",borderRadius:"3px",margin:"10px 0px",maxHeight:"200px",width:"100%"},mode:"python",theme:"tomorrow",name:"code_editor",readOnly:!0,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:this.props.code?this.props.code:"No code to show...",setOptions:{showLineNumbers:!0,tabSize:4}}))))}}]),n}(jt.Component);var wa=function(e){var t=Object(jt.useState)(!0),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=e.documents,l=e.pages,s=e.selectedPage,c=e.onDownload,d=e.handleChangePage,u=o?o.map((function(e){return _t.a.createElement(ca.a.Item,{key:e.id},_t.a.createElement(ca.a.Icon,{name:"file alternate",size:"large",verticalAlign:"middle"}),_t.a.createElement(ca.a.Content,null,_t.a.createElement(ca.a.Header,{as:"a",onClick:function(){return c(e.id)}},e.name),_t.a.createElement(ca.a.Description,null,"ID: ",e.id," | Extracted: ","".concat(e.extracted))))})):[];return _t.a.createElement(da.a,{fluid:!0,styled:!0,style:Object(i.a)({},e.style)},_t.a.createElement(da.a.Title,{active:a,onClick:function(){return r(!a)}},_t.a.createElement(Rt.a,{name:"dropdown"}),"Documents"),_t.a.createElement(da.a.Content,{active:a},_t.a.createElement(Ft.a,null,_t.a.createElement(ca.a,{divided:!0,relaxed:!0},o&&0!==o.length?u:_t.a.createElement(ca.a.Item,{key:0},_t.a.createElement(ca.a.Icon,{name:"circle outline",color:"red",verticalAlign:"middle"}),_t.a.createElement(ca.a.Content,null,_t.a.createElement(ca.a.Header,{as:"a"},"No Documents"),_t.a.createElement(ca.a.Description,{as:"a"},"This Job Has No Documents..."))))),_t.a.createElement(yn.a,{activePage:s,onPageChange:function(e,t){return function(e){console.log("Change page to ",e),d(e.activePage)}(t)},totalPages:l})))};function Ca(e){var t=e.raw_input_data,n=e.transform_script,a=e.transformed_input_data,r=e.loading_text,o=e.input_data_label,i=e.transform_script_label,l=e.transformed_input_data_label,s=e.style;return _t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Yt.a,{active:r,inverted:!0},_t.a.createElement(qt.a,{size:"tiny",inverted:!0},r)),_t.a.createElement(Ft.a.Group,{style:s},_t.a.createElement(ga,{title:o||"Raw Input Data",jsonObj:t}),_t.a.createElement(Sa,{title:i||"Input Data Transform Script",code:n}),_t.a.createElement(ga,{title:l||"Transformed Input Data",jsonObj:a})))}function ja(e){var t=e.output_data,n=e.loading_text,a=e.style;return _t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Yt.a,{active:n,inverted:!0},_t.a.createElement(qt.a,{size:"tiny",inverted:!0},n)),_t.a.createElement(ga,{style:a,title:"Resulting Data",jsonObj:t}))}function _a(e){var t=e.documents,n=e.selectedPage,a=e.pageCount,r=e.handleDownloadDocument,o=e.handleChangePage;return _t.a.createElement(wa,{documents:t,selectedPage:n,pages:a,onDownload:r,handleChangePage:o})}function Oa(e){return _t.a.createElement(ga,{jsonObj:e.input_data})}var Da=n(2076),Pa=function(e){var t=e.step;return t?t.finished?jt.createElement(Gt.a,{color:"green",key:"green",size:"mini"},"Finished"):t.error?jt.createElement(Gt.a,{color:"red",key:"red",size:"mini"},"ERROR"):t.started&&!t.finished?jt.createElement(Gt.a,{color:"blue",key:"blue",size:"mini"},"Running..."):t.queued&!t.started?jt.createElement(Gt.a,{color:"green",key:"green",size:"mini"},"Queued"):!t.queued&!t.started?jt.createElement(Gt.a,{color:"grey",key:"grey",size:"mini"},"NOT Started"):void 0:jt.createElement(Gt.a,{color:"grey",key:"grey",size:"mini"},"NOT Started")},Ta=function(e){return jt.createElement(Gt.a.Group,{size:"mini"},e.job.finished?jt.createElement(Gt.a,{color:"green",key:"green"},"Finished"):jt.createElement(jt.Fragment,null),e.job.error?jt.createElement(Gt.a,{color:"red",key:"red"},"ERROR"):jt.createElement(jt.Fragment,null),e.job.started&&!e.job.finished?jt.createElement(Gt.a,{color:"blue",key:"blue"},"Running..."):jt.createElement(jt.Fragment,null),e.job.queued&!e.job.started?jt.createElement(Gt.a,{color:"green",key:"green"},"Queued"):jt.createElement(jt.Fragment,null),!e.job.queued&!e.job.started?jt.createElement(Gt.a,{color:"grey",key:"grey"},"NOT Started"):jt.createElement(jt.Fragment,null))},xa=function(e){return e.step?jt.createElement(Gt.a.Group,{size:"mini"},e.step.finished?jt.createElement(Gt.a,{color:"green",key:"grey"},"Finished"):jt.createElement(jt.Fragment,null),e.step.error?jt.createElement(Gt.a,{color:"red",key:"red"},"ERROR"):jt.createElement(jt.Fragment,null),e.step.started&&!e.step.finished?jt.createElement(Gt.a,{color:"blue",key:"grey"},"Running..."):jt.createElement(jt.Fragment,null),e.step.started?jt.createElement(jt.Fragment,null):jt.createElement(Gt.a,{color:"grey"},"NOT Started"),e.buildMode?jt.createElement(Gt.a,{color:"blue"},"BUILD MODE"):jt.createElement(jt.Fragment,null)):jt.createElement(Gt.a.Group,{size:"mini"},jt.createElement(Gt.a,{color:"grey"},"NOT Started"),e.buildMode?jt.createElement(Gt.a,{color:"blue"},"BUILD MODE"):jt.createElement(jt.Fragment,null))},ka=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).packageSettings=function(e){var t=Object(i.a)({},a.props.job);return t.job_inputs=JSON.stringify(e),t},a.state={jobSettings:a.props.jobSettings?a.props.jobSettings:{},jobSettingsStr:JSON.stringify()},a}return Object(xt.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.job.job_inputs!==e.job.job_inputs&&this.state.jobSettingsStr!==e.job.job_inputs}},{key:"componentDidUpdate",value:function(){console.log("JobSettings updated")}},{key:"render",value:function(){var e=this,t=this.props,n=t.collapseStringsAfter,a=t.displayObjectSize,r=t.enableClipboard,o=t.theme,i=t.iconStyle,l=t.collapsed,s=t.indentWidth,c=t.displayDataTypes,d=t.job;return console.log("Render JobSettings"),_t.a.createElement(Ft.a,null,_t.a.createElement("div",{style:{textAlign:"right"}},_t.a.createElement("div",null,_t.a.createElement(Vt.a,{circular:!0,icon:"save",color:"blue",onClick:function(){return e.props.handleUpdateJob(e.packageSettings(e.state.jobSettings))}}))),_t.a.createElement(en.a,{collapsed:l,style:{padding:"10px",borderRadius:"3px",margin:"10px 0px"},theme:o,src:this.state.jobSettings,collapseStringsAfterLength:n,onEdit:!d.finished&&function(t){var n=t.updated_src;e.setState({jobSettings:n})},onDelete:!d.finished&&function(t){var n=t.updated_src;e.setState({jobSettings:n})},onAdd:!d.finished&&function(t){var n=t.updated_src;e.setState({jobSettings:n})},displayObjectSize:a,enableClipboard:r,indentWidth:s,displayDataTypes:c,iconStyle:i}))}}]),n}(jt.PureComponent);ka.defaultProps={theme:"bright:inverted",src:null,collapsed:!1,collapseStringsAfter:15,onAdd:!0,onEdit:!0,onDelete:!0,displayObjectSize:!0,enableClipboard:!0,indentWidth:4,displayDataTypes:!0,iconStyle:"triangle"};var Ia=n(869),Na=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onDownload,n=e.onDelete,a=e.document;return _t.a.createElement(ca.a.Item,{key:a.id},_t.a.createElement(ca.a.Icon,{name:"file alternate",size:"large",verticalAlign:"middle"}),_t.a.createElement(ca.a.Content,null,_t.a.createElement(ca.a.Header,{as:"a",onClick:function(){return t(a.id)}},a.name," ",_t.a.createElement(Rt.a,{link:!0,name:"help",color:"red",onClick:function(){n(a.id)}})),_t.a.createElement(ca.a.Description,null,"ID: ",a.id," | Extracted: ","".concat(a.extracted))))}}]),n}(jt.Component);function La(e){var t=Object(jt.useState)(!0),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=e.documents,l=e.onDelete,s=e.onDownload,c=e.onUpload,d=Object(jt.useCallback)((function(e){Array.from(e).forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){c(e)},t.readAsArrayBuffer(e)}))}),[e]),u=Object(Ia.a)({disabled:!!o&&o.length>0,onDrop:d}),p=u.getRootProps,h=u.getInputProps,m=_t.a.createRef(),g=o?o.map((function(e){return _t.a.createElement(Na,{key:e.id,onDownload:s,onDelete:l,document:e})})):[];return _t.a.createElement(da.a,{fluid:!0,styled:!0,style:Object(i.a)(Object(i.a)({},e.style),{},{height:"100%"})},_t.a.createElement(da.a.Title,{active:a,onClick:function(){return r(!a)}},_t.a.createElement(Rt.a,{name:"dropdown"}),"Documents"),_t.a.createElement(da.a.Content,{active:a},_t.a.createElement("input",{ref:m,type:"file",hidden:!0,multiple:!0,onChange:function(e){d(e.target.files)}}),_t.a.createElement("div",Object.assign({},p(),{style:{height:"80%",paddingRight:"10px",paddingLeft:"10px",paddingTop:"10px",paddingBottom:"10px",overflowY:"scroll"}}),_t.a.createElement("input",h()),o&&o.length>0?_t.a.createElement(ca.a,{celled:!0},g):_t.a.createElement(Ft.a,{placeholder:!0},_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"pdf file outline"}),'Drag Documents Here or Click "Add Document(s)" to Upload'),_t.a.createElement(Vt.a,{primary:!0,onClick:function(){return m.current.click()}},"Add Document(s)"))),_t.a.createElement(yn.a,{activePage:e.page,totalPages:e.pages,onPageChange:function(t,n){return e.handleSelectDocumentPage(n.activePage)}})))}function Ra(e){var t=e.selectedJob,n=e.style;return _t.a.createElement("div",{style:Object(i.a)({width:"100%",height:"100%"},n)},_t.a.createElement(Ft.a,{style:{width:"100%",height:"100%"}},_t.a.createElement(ln.a,{centered:!0,stretched:!0,verticalAlign:"middle"},_t.a.createElement(ln.a.Row,{verticalAlign:"middle"},_t.a.createElement(ln.a.Column,{width:4},_t.a.createElement(Da.a,{size:"tiny"},_t.a.createElement(Da.a.Value,null,_t.a.createElement(Rt.a,{name:"hashtag"}),t.id),_t.a.createElement(Da.a.Label,null,"ID"))),_t.a.createElement(ln.a.Column,{width:4,textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5",style:{margin:"0px",marginBottom:"5px"}},"Status:"),_t.a.createElement(Ta,{job:t})),_t.a.createElement(ln.a.Column,{width:8,textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5",style:{margin:"0px",marginBottom:"5px"}},"Email Notification:"),t.notification_email?_t.a.createElement(Gt.a,{color:"green",size:"mini"},t.notification_email):_t.a.createElement(Gt.a,{color:"grey",size:"mini"},"None Provided"))))))}function Aa(e){var t=e.label,n=e.dateString,a=e.timeString,r=e.style;return _t.a.createElement(Ft.a,{textAlign:"center",style:r},_t.a.createElement(Gt.a,{attached:"top"},t),_t.a.createElement(ln.a,{stretched:!0},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement("div",{style:{textAlign:"center"}},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,a),_t.a.createElement(Da.a.Label,null,t," Time"))))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement("div",{style:{textAlign:"center"}},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,n),_t.a.createElement(Da.a.Label,null,t," Date")))))))}function Ja(e){var t=e.selectedJob,n=e.startTime,a=e.startDate,r=e.endTime,o=e.endDate,i=e.toggleDeleteConfirm,l=e.handleDownloadJob,s=e.loadAndShowLog,c=e.style;return _t.a.createElement(ln.a,{stretched:!0,style:c},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:16},_t.a.createElement(Ra,{selectedJob:t}))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"Start",timeString:n,dateString:a})),_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"End",timeString:r,dateString:o}))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement("div",{textAlign:"right"},_t.a.createElement(Vt.a,{circular:!0,color:"red",icon:"trash",onClick:function(){return i()}}),t.file?_t.a.createElement(Vt.a,{circular:!0,color:"green",icon:"save",onClick:function(){return l(t.id)}}):_t.a.createElement(_t.a.Fragment,null),s?_t.a.createElement(Vt.a,{circular:!0,color:"teal",icon:"terminal",onClick:function(){return s()}}):_t.a.createElement(_t.a.Fragment,null)))))}function Ua(e){var t=e.startDate,n=e.startTime,a=e.endDate,r=e.endTime,o=e.style;return _t.a.createElement(ln.a,{stretched:!0,style:o},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"Start",dateString:t,timeString:n})),_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"End",dateString:a,timeString:r}))))}function Ma(e){var t=e.result,n=e.toggleDeleteConfirm,a=e.handleDownloadResult,r=e.loadAndShowLog,o=e.style,i=[];return n&&i.push(_t.a.createElement(Vt.a,{key:"1",circular:!0,color:"red",icon:"trash",onClick:function(){return n()}})),t&&t.has_file&&i.push(_t.a.createElement(Vt.a,{key:"2",circular:!0,color:"green",icon:"save",onClick:function(){return a(t.id)}})),i.push(_t.a.createElement(Vt.a,{key:"3",circular:!0,color:"teal",icon:"terminal",onClick:function(){return r(t.job,t.pipeline_node)}})),_t.a.createElement("div",{style:o},i)}function Fa(e){var t=e.selectedPipeline;return t?_t.a.createElement(Ft.a,{style:{width:"100%",wordWrap:"break-word"}},_t.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Da.a,{size:"small",style:{marginRight:"1vw"}},_t.a.createElement(Da.a.Value,null,_t.a.createElement(Rt.a,{size:"small",name:"code branch"})),_t.a.createElement(Da.a.Label,null,"PIPE"))),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h3"},_t.a.createElement(Jt.a.Content,null,t.name," (ID #",t.id,")",_t.a.createElement(Jt.a.Subheader,null,"Production: ",t.production?"True":"False")))))):_t.a.createElement(_t.a.Fragment,null)}function za(e){var t=e.selectedNode,n=e.script;return t?_t.a.createElement(Ft.a,{style:{width:"100%",wordWrap:"break-word"}},_t.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Da.a,{size:"small",style:{marginRight:"1vw"}},_t.a.createElement(Da.a.Value,null,_t.a.createElement(At.a,{size:"mini",src:"./node_icon.png"})),_t.a.createElement(Da.a.Label,null,"NODE"))),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h3"},_t.a.createElement(Jt.a.Content,null,t.name," (ID #",t.id,")",_t.a.createElement(Jt.a.Subheader,null,"Script: ",n?n.human_name:"")))))):_t.a.createElement(_t.a.Fragment,null)}function Ba(e){var t=e.selectedJob;return t?_t.a.createElement(Ft.a,{style:{width:"100%",wordWrap:"break-word"}},_t.a.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Da.a,{size:"small"},_t.a.createElement(Da.a.Value,null,_t.a.createElement(Rt.a,{name:"briefcase"})),_t.a.createElement(Da.a.Label,null,"JOB"))),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h3"},_t.a.createElement(Jt.a.Content,null,t.name," (ID #",t.id,")",_t.a.createElement(Jt.a.Subheader,null,"Pipeline: ",t.pipeline?t.pipeline.name:"")))))):_t.a.createElement(_t.a.Fragment,null)}function Ga(e){var t=e.result,n=e.imageUrl,a=e.script,r=e.handleScriptSelect,o=e.style;return _t.a.createElement("div",{style:Object(i.a)({width:"100%"},o)},_t.a.createElement(Ft.a,{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,_t.a.createElement(Rt.a,{name:"hashtag"}),t.id),_t.a.createElement(Da.a.Label,null,"ID"))),_t.a.createElement("div",null,_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,_t.a.createElement(At.a,{size:"tiny",src:n})),_t.a.createElement(Da.a.Label,null,"Type"))),_t.a.createElement("div",{style:{textAlign:"center",wordBreak:"break-all"}},a?_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,_t.a.createElement("span",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:function(){return r(a.id)}},a.human_name)),_t.a.createElement(Da.a.Label,null,"Script")):_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,_t.a.createElement("span",null,"None")),_t.a.createElement(Da.a.Label,null,"Script")))))}function Ha(e){var t=e.result,n=e.imageUrl,a=e.script,r=e.startTime,o=e.startDate,i=e.endTime,l=e.endDate,s=e.toggleDeleteConfirm,c=e.handleDownloadResult,d=e.handleScriptSelect,u=e.loadAndShowLog,p=e.style;return _t.a.createElement(ln.a,{stretched:!0,style:p},_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:16},_t.a.createElement(Ga,{result:t,imageUrl:n,script:a,handleScriptSelect:d}))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"Start",dateString:o,timeString:r})),_t.a.createElement(ln.a.Column,{width:8},_t.a.createElement(Aa,{label:"End",dateString:l,timeString:i}))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Ma,{result:t,toggleDeleteConfirm:s,handleDownloadResult:c,loadAndShowLog:u}))))}function Va(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=e.job,i=e.jobSettingsJson,l=e.handleUpdateJob;return _t.a.createElement("div",null,_t.a.createElement(da.a,{fluid:!0,styled:!0},_t.a.createElement(da.a.Title,{active:a,index:0,onClick:function(){return r(!a)}},_t.a.createElement(Rt.a,{name:"dropdown"}),"Adjust Job Inputs"),_t.a.createElement(da.a.Content,{active:a},_t.a.createElement(ka,{job:o,jobSettings:i,handleUpdateJob:l}))))}function Wa(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=(n[0],n[1],e.documents),r=e.handleDocumentDelete,o=e.handleUploadDocument,i=e.handleDocumentPageChange;return _t.a.createElement("div",null,_t.a.createElement(La,{documents:a.items,page:a.selectedPage,pages:a.pages,onDelete:r,onUpload:o,handleSelectDocumentPage:i}))}var Ya=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).handleTabChange=function(e,t){var n=t.activeIndex;return a.setState({activeIndex:n})},a.setShowLogModal=function(e){a.setState({showLogModal:e})},a.toggleShowTransformBuilderModal=function(){a.setState({showTransformBuilder:!a.state.showTransformBuilder})},a.onSaveScript=function(e){try{var t=Object(i.a)({},a.props.selectedNode);t.input_transform=e,a.props.handleUpdatePipelineStep(t)}catch(n){console.log("Error trying to update transform script")}},a.onSaveInputs=function(e){try{var t=Object(i.a)({},a.props.selectedNode);t.step_settings=e,a.props.handleUpdatePipelineStep(t)}catch(n){console.log("Error trying to update pipeline step settings.")}},a.onSaveName=function(e){try{var t={id:a.props.selectedNode.id};t.name=e,a.props.handleUpdatePipelineStep(t)}catch(n){console.log("Error trying to update pipeline step name.")}},a.loadAndShowLog=function(e,t){a.props.handleFetchTestJobStepLog(e,t),a.setShowLogModal(!0)},a.state={expanded:!0,activeIndex:0,newNodeName:"",showNamePopup:!1,showLogModal:!1,showTransformBuilder:!1},a.namePopupTrigger=jt.createRef(),a}return Object(xt.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.selectedNode.id!==this.props.selectedNode.id){var t=null;if(this.props.buildMode&&this.props.selectedNode)try{(t=c.a.find(this.props.results.items,{pipeline_node:this.props.selectedNode.id}))&&this.props.handleFetchResultData(t.id)}catch(n){}}}},{key:"componentDidMount",value:function(){var e=null;if(this.props.buildMode&&this.props.selectedNode)try{(e=c.a.find(this.props.results.items,{pipeline_node:this.props.selectedNode.id}))&&this.props.handleFetchResultData(e.id)}catch(t){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedNode,a=t.selectedPipelineId,r=t.sidebarTab,o=t.test_job,i=t.buildMode,l=t.scripts,s=t.results,d=null;if(i&&n)try{d=c.a.find(s.items,{pipeline_node:n.id,type:"STEP"})}catch(D){}var u=n&&n.script&&l.items?c.a.find(l.items,{id:n.script}):{},p=n?n.input_transform?n.input_transform:"No transformation in pipeline":"Error loading pipeline details...!",h="";if(u&&u.type)switch(u.type){case"RUN_ON_JOB_DOCS_PARALLEL":h="./parallel_job.png";break;case"RUN_ON_JOB":h="./serial_job.png"}var m="N/A",g="N/A",f="N/A",E="N/A",b={data:null},v={data:null},y={data:null},S={backgroundColor:"#6435c9"};if(d){if(d.start_time){var w=new Date(d.start_time);m=w.toLocaleTimeString(),g=w.toLocaleDateString()}if(d.stop_time){var C=new Date(d.stop_time);f=C.toLocaleTimeString(),E=C.toLocaleDateString()}if(d.node_output_data&&(b=d.node_output_data),d.start_state&&(v=d.start_state),d.transformed_input_data)try{y=JSON.parse(d.transformed_input_data)}catch(P){}}var j={};try{j=JSON.parse(n.step_settings)}catch(T){}var _=o.test_job?o.testJobStepLogs[parseInt(n.id)]||"No logs...":"No job selected...",O=[jt.createElement(jt.Fragment,null,jt.createElement(ma,{handleModalToggle:function(){return e.setShowLogModal(!e.state.showLogModal)},visible:this.state.showLogModal,log:_,loading:o.logs_loading}),n?jt.createElement(jt.Fragment,null,jt.createElement(Ft.a,null,jt.createElement(gn.a,{horizontal:!0},"Node Details:"),jt.createElement(Ga,{result:n,imageUrl:h,script:u,handleScriptSelect:this.props.handleScriptSelect,style:S})),i?jt.createElement(Ft.a,null,jt.createElement(Ua,{startTime:m,startDate:g,endTime:f,endDate:E,style:S}),jt.createElement(ln.a,{style:S},jt.createElement(ln.a.Row,null,jt.createElement(ln.a.Column,null,jt.createElement(Ma,{result:d,handleDownloadResult:this.props.handleDownloadResult,loadAndShowLog:this.loadAndShowLog}))))):jt.createElement(jt.Fragment,null)):jt.createElement(jt.Fragment,null)),jt.createElement(ba,{onSave:this.onSaveInputs,toolTip:"This json will be passed to the node's script each time it runs. Any *job* level settings with the same key will overrite these settings. This is a good way to set sane defaults for a give script given the purpose of a pipeline.",jsonObj:j}),jt.createElement(ya,{onSave:this.onSaveScript,code:p,toolTip:"This python script will take the output data JSON from the previous node / script (if any), and apply the transformation set forth herein before passing it to the node's scripts. This is useful for quick and dirty adjustments to script inputs to make two blocks compatible.",additionalActions:i?jt.createElement(ha.a,{content:"Visually edit a transform script using the currently-loaded test data.",trigger:jt.createElement(Vt.a,{content:"Test New Transform",labelPosition:"right",icon:"edit",color:"blue",size:"mini",onClick:this.toggleShowTransformBuilderModal})}):jt.createElement(jt.Fragment,null)})];return i&&(O.push(jt.createElement(Ca,{raw_input_data:v,transform_script:p,transformed_input_data:y,loading_text:d?!!s.loading&&"Loading data...":"No node results yet..."})),O.push(jt.createElement(ja,{output_data:b,loading_text:d?!!s.loading&&"Loading data...":"No node results yet..."}))),jt.createElement(Ft.a,{style:{overflowY:"hidden",height:"100%",width:"100%",margin:"0px"}},i?jt.createElement(fa,{myResult:d,test_job:o,pipelineStep:n,toggleModalVisible:this.toggleShowTransformBuilderModal,visible:this.state.showTransformBuilder,updatePipelineStep:this.props.handleUpdatePipelineStep,handleTestTransformForResult:this.props.handleTestTransformForResult}):jt.createElement(jt.Fragment,null),jt.createElement("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},jt.createElement(ha.a,{content:"Enable test mode so you can run the pipeline as you build it.",position:"top right",trigger:jt.createElement("div",{style:{marginBottom:".5vh"}},jt.createElement(Vt.a,{circular:!0,size:"mini",toggle:!0,active:i,onClick:function(){return e.props.toggleTestMode(a)}},"TEST"))}),jt.createElement(za,{selectedNode:n,script:u}),i&&o.test_job&&o.test_job.started&&!o.test_job.finished?jt.createElement(Yt.a,{active:!0,inverted:!0},jt.createElement(qt.a,{inverted:!0},"Test Job Running...")):jt.createElement(jt.Fragment,null),O[r]))}}]),n}(jt.PureComponent);var qa=function(e){var t=e.description,n=e.name,a=e.onChange,r=e.visible,o=e.toggleModal,i=Object(jt.useState)(t),l=Object(zt.a)(i,2),s=l[0],c=l[1],d=Object(jt.useState)(n),u=Object(zt.a)(d,2),p=u[0],h=u[1];return _t.a.createElement(Bt.a,{open:r,size:"small"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return o()}}),_t.a.createElement(Bt.a.Header,null,"Edit Pipeline Name and Description"),_t.a.createElement(Bt.a.Content,{image:!0},_t.a.createElement(Bt.a.Description,null,_t.a.createElement(Ft.a,{padded:!0},_t.a.createElement(Gt.a,{attached:"top"},"Pipeline name:"),_t.a.createElement(Kt.a,{fluid:!0,value:p,onChange:function(e){h("".concat(e.target.value))}})),_t.a.createElement(Ft.a,{padded:!0},_t.a.createElement(Gt.a,{attached:"top"},"Description"),_t.a.createElement(Zt.a,{style:{width:"100%"},rows:4,value:s,onChange:function(e){c("".concat(e.target.value))}})))),_t.a.createElement(Bt.a.Actions,null,_t.a.createElement(Vt.a,{color:"green",onClick:function(){return a(p,s),void o()}},_t.a.createElement(Rt.a,{name:"checkmark"})," Save"),_t.a.createElement(Vt.a,{color:"grey",onClick:function(){return o()}},_t.a.createElement(Rt.a,{name:"cancel"})," Cancel")))},Ka=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).onPipelineDescriptionOrNameChange=function(e,t){var n=a.props.pipelines.selectedPipelineId;if(-1!==n){var r={id:n,description:t,name:e};a.props.handleUpdatePipeline(Object(i.a)({},r))}},a.onProductionStatusChange=function(e){var t=c.a.find(a.props.pipelines.items,{id:a.props.pipelines.selectedPipelineId});a.props.handleUpdatePipeline(Object(i.a)(Object(i.a)({},t),{},{production:e}))},a.state={showDeleteConfirm:!1,showMetaModal:!1,showInputs:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props.test_job.test_job,n=this.props,a=n.testJobLogsLoading,r=n.buildMode,o=n.sidebarTab,i=n.selectedPipeline;try{JSON.parse(i.supported_files).supported_files}catch(u){}var l=i&&i.production?_t.a.createElement(Vt.a,{icon:!0,circular:!0,size:"mini",color:"green",floated:"right",onClick:function(){return e.onProductionStatusChange(!1)},labelPosition:"right"},_t.a.createElement(Rt.a,{name:"eject"}),"Take Offline"):_t.a.createElement(Vt.a,{icon:!0,circular:!0,size:"mini",color:"grey",floated:"right",onClick:function(){return e.onProductionStatusChange(!0)},labelPosition:"right"},_t.a.createElement(Rt.a,{name:"play"}),"Put Into Production"),s=[];if(!i)return _t.a.createElement(Ft.a,{style:{overflowY:"hidden",height:"100%",width:"100%",margin:"0px"}},_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},"Loading Data...")),_t.a.createElement(ea.a,null,_t.a.createElement(ea.a.Image,{rectangular:!0})));var c={};try{c=JSON.parse(i.schema)}catch(p){}if(s=[_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(qa,{description:i?i.description:"",name:i?i.name:"",onChange:this.onPipelineDescriptionOrNameChange,visible:this.state.showMetaModal,toggleModal:function(){return e.setState({showMetaModal:!e.state.showMetaModal})}}),_t.a.createElement(ln.a,null,r?_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:16},_t.a.createElement(oa,{style:{width:"100%",marginTop:"10px",backgroundColor:"#6435c9"},job:this.props.test_job.test_job,pipeline:i,jobLogsLoading:a,handleUpdateJob:this.props.handleUpdateTestJob}))):_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,{width:16},_t.a.createElement(Ft.a,null,_t.a.createElement("div",{style:{padding:"10px"}},_t.a.createElement(Jt.a,{as:"h2"},_t.a.createElement(Jt.a.Subheader,null,i.description,_t.a.createElement(ha.a,{content:"Edit Pipeline Description or name",position:"top right",trigger:_t.a.createElement(Vt.a,{floated:"right",circular:!0,icon:"edit",onClick:function(){return e.setState({showMetaModal:!e.state.showMetaModal})}})})))),_t.a.createElement(gn.a,{horizontal:!0},"Supported File Types:")))),_t.a.createElement(ln.a.Row,null,_t.a.createElement(ln.a.Column,null,_t.a.createElement(Vt.a,{icon:!0,circular:!0,size:"mini",floated:"right",color:"red",labelPosition:"right",onClick:function(){return e.setState({showDeleteConfirm:!e.state.showDeleteConfirm})}},_t.a.createElement(Rt.a,{name:"trash"}),"Delete"),l)))),_t.a.createElement(ga,{collapsed:!1,jsonObj:c,title:"Pipeline Schema:"})],this.props.buildMode){var d={data:"No inputs provided..."};try{d=JSON.parse(t.job_inputs)}catch(h){}s.push(_t.a.createElement("div",{key:"inputs"},t&&t.started?_t.a.createElement(_a,{documents:t.test_documents,selectedPage:t.document_page,pageCount:t.document_pages,handleDownloadDocument:this.props.handleDownloadDocument,handleChangePage:this.props.handleTestDocumentPageChange}):_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(da.a,{fluid:!0,styled:!0},_t.a.createElement(da.a.Title,{active:this.state.showInputs,index:0,onClick:function(){return e.setState({showInputs:!e.state.showInputs})}},_t.a.createElement(Rt.a,{name:"dropdown"}),"Adjust Job Inputs"),_t.a.createElement(da.a.Content,{active:this.state.showInputs},_t.a.createElement(ka,{job:t,jobSettings:d,handleUpdateJob:this.props.handleUpdateTestJob}))),_t.a.createElement(La,{documents:this.props.test_job.test_documents,page:this.props.test_job.document_page,pages:this.props.test_job.document_pages,onDelete:this.props.handleDeleteTestDocument,onUpload:this.props.handleUploadTestDocument,onDownload:this.props.handleDownloadDocument}))))}return _t.a.createElement(Ft.a,{style:{overflowY:"hidden",height:"100%",width:"100%",margin:"0px"}},_t.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"}},_t.a.createElement(ha.a,{content:"Enable test mode so you can run the pipeline as you build it.",position:"top right",trigger:_t.a.createElement("div",{style:{marginBottom:".5vh"}},_t.a.createElement(Vt.a,{circular:!0,size:"mini",color:r?"purple":"grey",onClick:function(){return e.props.toggleTestMode(i.id)}},"TEST"))}),_t.a.createElement(Fa,{selectedPipeline:i}),s[o]))}}]),n}(jt.PureComponent),Za=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).toggleDeleteConfirm=function(){a.setState({showDeleteConfirm:!a.state.showDeleteConfirm})},a.state={expanded:!0,showDeleteConfirm:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedNode,a=t.selectedPipeline,r=t.testJobResult,o=t.pipelines,i=t.buildMode,l=t.test_job,s=t.scripts,c=t.selectedScript,d=t.results;return n?jt.createElement(jt.Fragment,null,jt.createElement(kn.a,{header:"Delete this pipeline?",content:"Are you sure you want to delete this node? All data will be deleted.",open:this.state.showDeleteConfirm,onCancel:function(){return e.toggleDeleteConfirm()},onConfirm:function(){return e.props.handleDeleteJob(e.props.selectedJobId)}}),jt.createElement(Ya,{key:o.selectedPipelineId,pipeline:o,selectedPipelineId:o.selectedPipelineId,scripts:s,selectedScript:c,selectedNode:n,selectedPipeline:a,buildMode:i,test_job:l,results:d,toggleTestMode:this.props.toggleTestMode,setSidebarTab:this.props.setSidebarTab,sidebarTab:this.props.sidebarTab,handleFetchResultData:this.props.handleFetchResultData,handleUpdatePipelineStep:this.props.handleUpdatePipelineStep,handleScriptSelect:this.props.handleScriptSelect,toggleDeleteConfirm:this.toggleDeleteConfirm,testJobLogsLoading:this.props.testJobLogsLoading,handleFetchTestJobStepLog:this.props.handleFetchTestJobStepLog,handleTestTransformForResult:this.props.handleTestTransformForResult})):jt.createElement(Ka,{key:n?n.id:-1,pipelines:o,buildMode:i,test_job:l,selectedNode:n,selectedPipeline:a,testJobResult:r,setSidebarTab:this.props.setSidebarTab,sidebarTab:this.props.sidebarTab,toggleTestMode:this.props.toggleTestMode,toggleDeleteConfirm:this.toggleDeleteConfirm,handleUpdatePipeline:this.props.handleUpdatePipeline,testJobLogsLoading:this.props.testJobLogsLoading,handleDeleteTestDocument:this.props.handleDeleteTestDocument,handleUploadTestDocument:this.props.handleUploadTestDocument,handleDownloadDocument:this.props.handleDownloadDocument,handleUpdateTestJob:this.props.handleUpdateTestJob,handleFetchTestJobLog:this.props.handleFetchTestJobLog,handleFetchResultData:this.props.handleFetchResultData,handleTestDocumentPageChange:this.props.handleTestDocumentPageChange})}}]),n}(jt.PureComponent),Qa=function(e){return _t.a.createElement(Ft.a,{raised:!0,style:{padding:"0px",height:"60vh",overflow:"scroll"}},_t.a.createElement(mn.a,{selectable:!0,celled:!0,structured:!0,size:"small"},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,{textAlign:"center"},_t.a.createElement(mn.a.HeaderCell,null,"Name"),_t.a.createElement(mn.a.HeaderCell,null,"Description"),_t.a.createElement(mn.a.HeaderCell,null,"Mode"),_t.a.createElement(mn.a.HeaderCell,null,"Doc Types"),_t.a.createElement(mn.a.HeaderCell,null,"Actions"))),_t.a.createElement(mn.a.Body,null,e.children)))},Xa=function(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=n[0],r=n[1];try{JSON.parse(e.pipeline.supported_files).supported_files}catch(o){}return _t.a.createElement(mn.a.Row,{style:e.selected?{backgroundColor:"#e2ffdb",overflowWrap:"break-word"}:{overflowWrap:"break-word"}},_t.a.createElement(kn.a,{header:"Delete this pipeline?",content:"Are you sure you want to delete this pipeline? The scripts will not be deleted, but your pipeline steps and settings will be!",open:a,onCancel:function(){return r(!a)},onConfirm:function(){return e.onDelete(e.pipeline.id)}}),_t.a.createElement(mn.a.Cell,{onClick:function(){return e.onClick()},style:{cursor:"pointer",color:"blue",textDecoration:"underline"}},e.pipeline.name),_t.a.createElement(mn.a.Cell,null,e.pipeline.description?e.pipeline.description.substring(0,25):"No Description..."),_t.a.createElement(mn.a.Cell,{textAlign:"center"},e.pipeline.production?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"PRODUCTION"):_t.a.createElement(Gt.a,{color:"red",size:"tiny"},"TESTING")),_t.a.createElement(mn.a.Cell,{textAlign:"center"}),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Vt.a,{basic:!0,circular:!0,color:"red",icon:"trash",onClick:function(){return r(!a)}}),_t.a.createElement(Vt.a,{basic:!0,circular:!0,color:"green",icon:"download",onClick:function(){return e.handleDownloadPipeline(e.pipeline.id)}})))},$a=n(2066),er=function(e){var t=e.script,n=e.selected,a=e.onSelect,r=[_t.a.createElement(Gt.a,{key:"allExts",size:"mini",color:"teal"},"All")];try{r=JSON.parse(t.supported_file_types).map((function(e){return _t.a.createElement(Gt.a,{key:e,size:"mini",color:"teal"},e)}))}catch(i){}var o="";switch(t.type){case"RUN_ON_JOB_DOCS_PARALLEL":o="./parallel_job.png";break;case"RUN_ON_JOB":o="./serial_job.png"}return _t.a.createElement(sa.a,{key:t.id,onClick:function(){return a(t.id)},style:n?{margin:"5px",backgroundColor:"#e2ffdb"}:{margin:"5px"}},_t.a.createElement(sa.a.Content,null,_t.a.createElement(At.a,{floated:"right",size:"mini",src:o}),_t.a.createElement(sa.a.Header,null,t.human_name.substring(0,16)),_t.a.createElement(sa.a.Meta,null,_t.a.createElement("div",null,r)),_t.a.createElement(sa.a.Description,null,e.script.description)))},tr=function(e){return _t.a.createElement(sa.a,{key:-1,style:{margin:"5px"}},_t.a.createElement(sa.a.Content,null,_t.a.createElement(sa.a.Header,null,_t.a.createElement(Rt.a,{floated:"right",name:"cancel"}),"No Matching Scripts"),_t.a.createElement(sa.a.Meta,null,_t.a.createElement("div",null,"N/A")),_t.a.createElement(sa.a.Description,null,"No scripts are available or the search terms you entered do not appear to match any of the scripts available on the system.")))};var nr=function(e){var t=e.scripts,n=e.setAddModalVisible,a=Object(jt.useState)(!1),r=Object(zt.a)(a,2),o=r[0],i=r[1],l=Object(jt.useState)(-1),s=Object(zt.a)(l,2),c=s[0],d=s[1],u=Object(jt.useState)(""),p=Object(zt.a)(u,2),h=p[0],m=p[1],g=Object(jt.useState)(""),f=Object(zt.a)(g,2),E=f[0],b=f[1],v=new qn.a(t,{threshold:.4,keys:["human_name","description"]}),y=""===h?t:v.search(h).map((function(e){return e.item})),S=y.length>0?y.map((function(e){return _t.a.createElement(er,{key:e.id,script:e,selected:c===e.id,onSelect:d})})):_t.a.createElement(tr,null);return _t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start"}},o?_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ft.a,{padded:!0},_t.a.createElement(Gt.a,{attached:"top"},"Pipeline name:"),_t.a.createElement(Kt.a,{fluid:!0,value:E,onChange:function(e){b("".concat(e.target.value))}})),_t.a.createElement("div",null,_t.a.createElement(Vt.a,{color:"green",onClick:function(){return t=E,a=c,r={},e.onAddNode(t,a,r),void n(!1);var t,a,r}},_t.a.createElement(Rt.a,{name:"checkmark"})," Create Node"),_t.a.createElement(Vt.a,{color:"grey",onClick:function(){return i(!1)}},_t.a.createElement(Rt.a,{name:"cancel"})," Cancel"))):_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ft.a,{style:{width:"100%",margin:"0px"}},_t.a.createElement(Kt.a,{style:{width:"100%"},placeholder:"Search...",name:"searchString",icon:"search",value:h,onChange:function(e){m(e.target.value)}})),_t.a.createElement(Ft.a,null,_t.a.createElement($a.a.Group,{style:{height:"30vh",overflowY:"scroll"}},S)),_t.a.createElement("div",null,_t.a.createElement(Vt.a,{disabled:-1===c,floated:"right",positive:!0,onClick:function(){return i(!o)}},"Add Node"))))},ar=function(e){var t=e.deletePipeline,n=e.downloadPipeline,a=e.downloadTestResult,r=e.handleUpdateJob,o=e.onAddNode,i=e.buildMode,l=e.scripts,s=e.test_job,c=e.windowHeight,d=_t.a.useRef(),u=_t.a.useState(!1),p=Object(zt.a)(u,2),h=p[0],m=p[1],g=[_t.a.createElement(Lt.a.Item,{disabled:i,key:"deleteJob",name:"deleteJob",onClick:function(e){e.stopPropagation(),t()}},_t.a.createElement(Rt.a,{name:"trash",color:"red"}),"Delete"),_t.a.createElement(Lt.a.Item,{disabled:i,key:"addNode",name:"addNode",onClick:function(e){e.stopPropagation(),m(!h)}},_t.a.createElement(Rt.a,{name:"add",color:"green"}),_t.a.createElement("strong",{ref:d},"Add Node")),_t.a.createElement(Lt.a.Item,{disabled:i,key:"downloadJob",name:"downloadJob",onClick:function(e){e.stopPropagation(),n()}},_t.a.createElement(Rt.a,{name:"save",color:"blue"}),"Export")];return i&&s&&!s.started&&g.push(_t.a.createElement(Lt.a.Item,{key:"startTest",name:"startTest",onClick:function(e){e.stopPropagation();var t={id:s.id,queued:!0};r(t)}},_t.a.createElement(Rt.a,{name:"play",color:"purple"}),"Start Test")),i&&s&&s.file&&g.push(_t.a.createElement(Lt.a.Item,{key:"downloadTestResults",name:"downloadTestResults",onClick:function(e){e.stopPropagation(),a(s.id)}},_t.a.createElement(Rt.a,{name:"download",color:"purple"}),"Test Results")),_t.a.createElement(Lt.a,{icon:"labeled"},_t.a.createElement(ha.a,{context:d,content:_t.a.createElement(nr,{setAddModalVisible:m,scripts:l.items,onAddNode:o}),position:"top center",open:h,offset:[0,Math.ceil(.025*c)]}),g)},rr=function(e){var t=e.selectedTab,n=e.selectTab,a=e.selectedNode,r=e.buildMode;return a?_t.a.createElement(or,{selectedTab:t,selectTab:n,buildMode:r}):_t.a.createElement(ir,{selectedTab:t,selectTab:n,buildMode:r})},or=function(e){var t=e.selectedTab,n=e.selectTab,a=e.buildMode,r=[_t.a.createElement(Lt.a.Item,{key:"nodeOverview",name:"nodeOverview",active:0===t,onClick:function(e){e.stopPropagation(),n(0)}},_t.a.createElement(Rt.a,{name:"dot circle outline"}),"Node"),_t.a.createElement(Lt.a.Item,{key:"nodeSettings",name:"nodeSettings",active:1===t,onClick:function(e){e.stopPropagation(),n(1)}},_t.a.createElement(Rt.a,{name:"settings"}),"Settings"),_t.a.createElement(Lt.a.Item,{key:"inputTransform",name:"inputTransform",active:2===t,onClick:function(e){e.stopPropagation(),n(2)}},_t.a.createElement(Rt.a,{name:"code"}),"Input Transform")];return a&&(r.push(_t.a.createElement(Lt.a.Item,{key:"testInputs",name:"testInputs",active:3===t,onClick:function(e){e.stopPropagation(),n(3)}},_t.a.createElement(Rt.a,{name:"cloud upload",color:"purple"}),"Test Input")),r.push(_t.a.createElement(Lt.a.Item,{key:"testOutputs",name:"testOutputs",active:4===t,onClick:function(e){e.stopPropagation(),n(4)}},_t.a.createElement(Rt.a,{name:"cloud download",color:"purple"}),"Test Output"))),_t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},r)},ir=function(e){var t=e.selectedTab,n=e.selectTab,a=e.buildMode,r=[_t.a.createElement(Lt.a.Item,{key:"pipelineOverview",name:"pipelineOverview",active:0===t,onClick:function(e){e.stopPropagation(),n(0)}},_t.a.createElement(Rt.a,{name:"code branch"}),"Pipeline"),_t.a.createElement(Lt.a.Item,{key:"pipelineSchema",name:"pipelineSchema",active:1===t,onClick:function(e){e.stopPropagation(),n(1)}},_t.a.createElement(Rt.a,{name:"table"}),"Input Schema")];return a&&r.push(_t.a.createElement(Lt.a.Item,{key:"testInputs",name:"testInputs",active:2===t,onClick:function(e){e.stopPropagation(),n(2)}},_t.a.createElement(Rt.a,{name:"cloud upload",color:"purple"}),"Test Inputs")),_t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},r)};var lr=Object(a.b)((function(e){return{test_job:e.test_job,application:e.application,scripts:e.scripts}}))((function(e){var t=e.node,n=e.test_job,a=e.application.buildMode,r=parseInt(t.id),o=null;try{o=c.a.find(n.test_results,{pipeline_node:r})}catch(l){}var i=_t.a.createElement(_t.a.Fragment,null);return o&&o.started&&(o.finished||o.error||(i=_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{size:"medium"},"Running...")))),"THROUGH_SCRIPT"===t.type?_t.a.createElement("div",null,_t.a.createElement(sa.a,null,_t.a.createElement(sa.a.Content,null,i,_t.a.createElement(At.a,{floated:"right",size:"mini",src:"RUN_ON_JOB"===t.script.type?"serial_job.png":"parallel_job.png"}),_t.a.createElement(sa.a.Header,null,t.name," (",_t.a.createElement("b",null,"ID ",t.id),")"),_t.a.createElement(sa.a.Meta,null,"Script: ",t.script.human_name),_t.a.createElement(sa.a.Description,null,t.script.description,_t.a.createElement("i",null,"RUN_ON_JOB"===t.script.type?"This script will run single-threaded over all documents in a job, sequentially.":"This script will run multithreaded over all document in a job, in parallel."),a?_t.a.createElement(_t.a.Fragment,null,_t.a.createElement("br",null),_t.a.createElement("br",null),_t.a.createElement(xa,{step:o,buildMode:a})):_t.a.createElement(_t.a.Fragment,null))),_t.a.createElement(sa.a.Content,{extra:!0},_t.a.createElement("div",{style:{textAlign:"right"}},_t.a.createElement(Vt.a,{circular:!0,color:"red",icon:"trash"}),a&&n.test_job?_t.a.createElement(Vt.a,{circular:!0,color:"green",icon:"play",onClick:function(){return t=r,void e.dispatch(Ie(t));var t}}):_t.a.createElement(_t.a.Fragment,null))))):_t.a.createElement("div",null,_t.a.createElement(sa.a,null,_t.a.createElement(sa.a.Content,null,i,_t.a.createElement(At.a,{floated:"right",size:"mini",src:"start_icon_128.png"}),_t.a.createElement(sa.a.Header,null,"START SCRIPT: Extracter"),_t.a.createElement(sa.a.Meta,null,"Script: ",-1===t.script.id?"Built-In":t.script.human_name),a?_t.a.createElement(sa.a.Description,null,_t.a.createElement(xa,{step:o,buildMode:a})):_t.a.createElement(_t.a.Fragment,null))))}));function sr(){var e=Object(Ln.a)(["\n        height: 100vh;\n        weight: 100vw;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"]);return sr=function(){return e},e}var cr=n(106).default.div(sr(),(function(e){return e.background}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),dr=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"render",value:function(){return jt.createElement(cr,{background:this.props.background||"rgb(31, 40, 57)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children)}}]),n}(jt.Component),ur=n(44),pr=(n(1934),function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"render",value:function(){return jt.createElement(dr,null,jt.createElement(ur.CanvasWidget,{className:"diagram-container",engine:this.props.digraphEngine.getEngine()}))}}]),n}(jt.Component)),hr={width:"100%",height:"86vh",marginBottom:"0px",marginLeft:"260px",transition:"all 500ms ease"},mr={width:"100%",height:"86vh",marginLeft:"0px",marginBottom:"0px",transition:"all 500ms ease"},gr={position:"absolute",left:"260px",top:"0px",transition:"all 500ms ease"},fr={position:"absolute",left:"0px",top:"0px",transition:"all 500ms ease"},Er={position:"absolute",top:"5vh",left:"300px",zIndex:10,transition:"all 500ms ease"},br={position:"absolute",top:"5vh",left:"40px",zIndex:10,transition:"all 500ms ease"},vr={cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e3,position:"absolute",bottom:"40vh",right:"0px",borderRadius:"5px 0px 0px 10px",backgroundColor:"#f3f4f5",transition:"all 500ms ease"},yr={cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e3,position:"absolute",bottom:"40vh",right:"15px",borderRadius:"5px 0px 0px 10px",backgroundColor:"#f3f4f5",transition:"all 500ms ease"},Sr={cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e3,position:"absolute",bottom:"75vh",right:"0px",borderRadius:"5px 0px 0px 10px",width:"5vw",height:"7vh",backgroundColor:"#f3f4f5",transition:"all 500ms ease"},wr={cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:1e3,position:"absolute",bottom:"75vh",right:"15px",borderRadius:"5px 0px 0px 10px",width:"5vw",height:"7vh",backgroundColor:"#f3f4f5",transition:"all 500ms ease"},Cr={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",bottom:"5vh"},jr={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute",width:"100%",top:"5vh"},_r=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;Object(Tt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).zoomOut=function(){console.log("Reqire zoom out")},e.resetZoom=function(){console.log("Reset zoom")},e}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=jt.cloneElement(this.props.detailPanel,{props:"add things here if needed"}),n=jt.cloneElement(this.props.controls,{zoomIn:this.zoomIn,zoomOut:this.zoomOut,resetZoom:this.resetZoom,moveXandYTo:this.moveXandYTo});return jt.createElement(Mt.a.Pushable,{as:Ft.a,style:{width:"100%",height:"87vh",margin:"0px"}},jt.createElement(Mt.a,{animation:"push",direction:"right",visible:this.props.showSidebar,style:{width:"275px",padding:"0px"}},t),jt.createElement(Mt.a.Pusher,{style:{padding:"0px"}},this.props.loadingText?jt.createElement(Yt.a,{active:!0,inverted:!0},jt.createElement(qt.a,{inverted:!0},this.props.loadingText),jt.createElement(Gt.a,{style:this.props.showSidebar?gr:fr,corner:"left",color:"blue",icon:"reply",onClick:function(){return e.props.exitDigraph()}})):jt.createElement(jt.Fragment,null),jt.createElement("div",{style:{width:"100%",height:"100%"}},this.props.showSidebarToggle?jt.createElement("div",{onClick:function(){return e.props.toggleSidebar()},style:this.props.showSidebar?wr:Sr},jt.createElement("div",null,jt.createElement(Rt.a,{name:this.props.showSidebar?"arrow alternate circle right outline":"arrow alternate circle left outline",color:this.props.showSidebar?"red":"green",size:"big"}))):jt.createElement(jt.Fragment,null),jt.createElement("div",{style:this.props.showSidebar?hr:mr,onClick:this.props.onCanvasClick},jt.createElement(Gt.a,{style:this.props.showSidebar?gr:fr,corner:"left",color:"blue",icon:"reply",onClick:function(){return e.props.exitDigraph()}}),jt.createElement(pr,{digraphEngine:this.props.digraphEngine}),n?jt.createElement("div",{style:this.props.showSidebar?Er:br},n):jt.createElement(jt.Fragment,null),this.props.trayControls?jt.createElement("div",{style:this.props.showSidebar?yr:vr},this.props.trayControls):jt.createElement(jt.Fragment,null),this.props.playControls?jt.createElement("div",{style:Cr},this.props.playControls):jt.createElement(jt.Fragment,null),this.props.headerWidget?jt.createElement("div",{style:jr},this.props.headerWidget):jt.createElement(jt.Fragment,null)))))}}]),n}(jt.PureComponent),Or=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).toggleDeleteConfirm=function(){a.setState({showDeleteConfirm:!a.state.showDeleteConfirm})},a.toggleSidebar=function(){a.setState({showSidebar:!a.state.showSidebar})},a.openSidebar=function(){a.state.showSidebar||a.setState({showSidebar:!0})},a.closeSidebar=function(){a.state.showSidebar&&a.setState({showSidebar:!1})},a.setSidebarTab=function(e){a.state.sidebarTab===e?a.toggleSidebar():a.setState({sidebarTab:e},a.openSidebar())},a.uploadPipelineYAML=function(e){e.preventDefault(),console.log(e.target.files[0]),a.props.handleUploadPipeline(e.target.files[0])},a.tick=function(){var e=a.props.test_job.test_job;e&&(!e.started||e.finished||e.error||a.props.refreshSummaryTestResults(),e.started||a.props.refreshTestDocuments(),e.finished||a.props.handleRefreshTestJob())},a.getLogs=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(a.props.test_job.test_job.id,m.a.get("token"));case 3:t=e.sent,a.setState({job_log:t.data.log,log_fetching:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setState({job_log:"Error fetching logs: ".concat(e.t0),log_fetching:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.toggleTestMode=function(){a.setState({job_log:"Click Start to Run Test Job...",log_fetching:!1,running:!1},(function(){a.props.handleToggleBuildMode()}))},a.createPipelineEdge=function(e){console.log("Try to create pipeline edge...",e),a.props.handleCreatePipelineEdge(e[0].fromNodeId,e[0].toNodeId)},a.onNodeMove=function(e,t,n){a.props.handleMovePipelineNode({id:e,x_coord:t,y_coord:n})},a.onPipelineScale=function(e){a.props.handleScalePipeline({id:a.props.pipelines.selectedPipeline.id,scale:e})},a.onPipelineMove=function(e,t){console.log("Handle canvas move: ",{x_offset:e,y_offset:t}),a.props.handleMovePipeline({id:a.props.pipelines.selectedPipeline.id,x_offset:e,y_offset:t})},a.state={job_log:"Click Start to Run Test Job...",log_fetching:!1,running:!1,showSidebar:!0,timer:null,sidebarTab:0,showDeleteConfirm:!1},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){var e=setInterval(this.tick,2e3);this.setState({timer:e}),this.props.fetchPipelines(),this.props.handleFetchScripts(),-1!==this.props.pipelines.selectedPipelineId&&(this.props.refreshSelectedPipelineDigraph(),this.props.test_job.test_job&&(this.props.refreshSummaryTestResults(),this.props.handleRefreshTestJob()))}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this,t=jt.createRef(),n=this.props,a=n.results,r=n.pipelines,o=n.pipelinesteps,i=n.filterValue,l=n.scripts,s=n.buildMode,d=n.windowHeight,u=c.a.find(r.items,{id:r.selectedPipelineId}),p=null;if(s)try{p=c.a.find(a.items,{type:"JOB"})}catch(v){}var h=c.a.find(o.items,{id:o.selectedPipelineStepId}),m=h?c.a.find(l.items,{id:h.script}):null,g="";u&&(r.loading&&(g="Loading pipeline..."),u.locked&&(g="Installing... Check back later."));var f=[jt.createElement(pa.a.Section,{key:0,link:!0,onClick:function(){return e.props.handleUnselectPipeline()}},"Pipelines")];u&&(f.push(jt.createElement(pa.a.Divider,{key:1})),f.push(jt.createElement(pa.a.Section,{active:!0,key:2},u.name)));var E=jt.createElement(Ft.a,{raised:!0,style:{width:"100%"}},jt.createElement(pa.a,null,f)),b=jt.createElement(Qa,null,r.items.map((function(t){return jt.createElement(Xa,{key:t.id,onClick:function(){return e.props.handleSelectPipeline(t.id)},pipeline:t,selected:!!u&&t.id===u.id,toggleEditModal:e.props.handlePipelineModalToggle,handleDownloadPipeline:e.props.handleDownloadPipeline,onDelete:e.props.handleDeletePipeline})})));return jt.createElement(Bn,null,jt.createElement(rn,{visible:this.state.showDeleteConfirm,message:"You have chosen to delete this pipeline. ARE YOU SURE? This cannot be undone. You will lose all pipeline relationships and settings.",yesAction:function(){return e.onConfirmDelete(e.props.jobs.selectedJobId)},noAction:this.toggleDeleteConfirm,toggleModal:this.toggleDeleteConfirm}),jt.createElement("input",{ref:t,type:"file",hidden:!0,onChange:this.uploadPipelineYAML}),u?jt.createElement(jt.Fragment,null):jt.createElement("div",null,jt.createElement(na,{onChange:this.props.setPipelineNameFilter,onCreate:this.props.handleNewPipelineModalToggle,onSubmit:this.props.fetchPipelines,onImport:function(){return t.current.click()},placeholder:"Search Pipelines by Name...",value:i})),u?jt.createElement(_r,{digraphEngine:this.props.digraphEngine,key:r.selectedPipelineId,toggleSidebar:this.toggleSidebar,showSidebar:this.state.showSidebar,exitDigraph:this.props.handleUnselectPipeline,loadingText:g,detailPanel:jt.createElement(Za,{key:r.selectedPipelineId,selectedNode:h,selectedPipeline:u,handleUpdatePipelineStep:this.props.handleUpdatePipelineStep,handleUpdatePipeline:this.props.handleUpdatePipeline,handleScriptSelect:this.props.handleScriptSelect,scripts:l,results:a,selectedScript:m,pipelines:this.props.pipelines,buildMode:s,test_job:this.props.test_job,testJobResult:p,testJobLogsLoading:this.state.log_fetching,toggleTestMode:this.toggleTestMode,setSidebarTab:this.setSidebarTab,sidebarTab:this.state.sidebarTab,handleFetchResultData:this.props.handleFetchResultData,handleDeleteTestDocument:this.props.handleDeleteTestDocument,handleUploadTestDocument:this.props.handleUploadTestDocument,handleDownloadDocument:this.props.handleDownloadDocument,handleUpdateTestJob:this.props.handleUpdateTestJob,handleFetchTestJobStepLog:this.props.handleFetchTestJobStepLog,handleFetchTestJobLog:this.props.handleFetchTestJobLog,handleTestTransformForResult:this.props.handleTestTransformForResult,handleTestDocumentPageChange:this.props.handleTestDocumentPageChange}),controls:jt.createElement(aa,{digraphEngine:this.props.digraphEngine}),trayControls:jt.createElement(rr,{buildMode:s,selectedTab:this.state.sidebarTab,selectTab:this.setSidebarTab,selectedNode:h}),playControls:jt.createElement(ar,{windowHeight:d,scripts:l,onAddNode:this.props.handleAddPipelineNode,buildMode:s,handleUpdateJob:this.props.handleUpdateJob,test_job:this.props.test_job.test_job,deletePipeline:this.toggleDeleteConfirm,downloadPipeline:function(){return e.props.handleDownloadPipeline(r.selectedPipelineId)},downloadTestResult:this.props.handleDownloadJobResult}),nodeClass:lr}):jt.createElement(dn,{loading:this.props.pipelines.loading,loadingText:"Fetching Pipeline Details...",body:b,header:E}),u?jt.createElement(jt.Fragment,null):jt.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"2vh"}},jt.createElement("div",null,jt.createElement(yn.a,{activePage:1,onPageChange:function(e,t){var n=t.activePage;return console.log("Change page to: ",n)},totalPages:1}))))}}]),n}(jt.PureComponent),Dr=function(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=e.job;if(!o)return _t.a.createElement(mn.a.Row,null,"Job Data Missing");var i="",l="N/A";if(o.start_time){var s=new Date(o.start_time);i=s.toLocaleTimeString(),l=s.toLocaleDateString()}var c="",d="N/A";if(o.stop_time){var u=new Date(o.stop_time);c=u.toLocaleTimeString(),d=u.toLocaleDateString()}var p=[_t.a.createElement(Vt.a,{key:"job_row_button_0",icon:"trash",basic:!0,circular:!0,color:"red",onClick:function(){return r(!a)}})];return e.job.finished&&e.job.file&&p.push(_t.a.createElement(Vt.a,{key:"job_row_button_".concat(p.length+1),icon:"save",basic:!0,circular:!0,color:"grey",onClick:function(){e.handleDownloadJob(e.job.id)}})),e.job.queued||e.job.started||e.job.error||e.job.finished||p.push(_t.a.createElement(Vt.a,{key:"job_row_button_".concat(p.length+1),icon:"play circle outline",basic:!0,circular:!0,color:"green",onClick:function(){var t={id:e.job.id,queued:!0};e.handleUpdateJob(t)}})),_t.a.createElement(mn.a.Row,{style:e.selected?{backgroundColor:"#e2ffdb",overflowWrap:"break-word"}:{overflowWrap:"break-word"}},_t.a.createElement(kn.a,{open:a,content:"You have chosen to delete a job (which will delete all of its result and logs). ARE YOU SURE? This cannot be undone.",confirmButton:"DELETE",onCancel:function(){return r(!a)},onConfirm:function(){return e.handleDeleteJob(e.job.id),void r(!1)}}),_t.a.createElement(mn.a.Cell,{onClick:function(){return e.handleSelectJobRow()},style:{cursor:"pointer",color:"blue",textDecoration:"underline"}},e.job.name),e.pipeline?_t.a.createElement(mn.a.Cell,{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:function(){return e.handleSelectPipeline(e.pipeline.id)},textAlign:"center"},e.pipeline.name):_t.a.createElement(mn.a.Cell,{textAlign:"center"},"NOT ASSIGNED"),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,l," ",i))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,d," ",c))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,e.job.num_docs))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},e.job.finished?_t.a.createElement(Gt.a,{color:"green",key:"grey",size:"tiny"},"Finished"):_t.a.createElement("div",null),e.job.error?_t.a.createElement(Gt.a,{color:"red",key:"red",size:"tiny"},"ERROR"):_t.a.createElement("div",null),e.job.started&&!e.job.finished?_t.a.createElement(Gt.a,{color:"blue",key:"grey",size:"tiny"},"Running..."):_t.a.createElement("div",null),e.job.queued&!e.job.started?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Queued"):_t.a.createElement("div",null),!e.job.queued&!e.job.started?_t.a.createElement("div",null,_t.a.createElement(Gt.a,{color:"grey",size:"tiny"},"NOT Started")):_t.a.createElement("div",null)),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement("div",null,p)))},Pr=function(e){return _t.a.createElement(Ft.a,{raised:!0,style:{padding:"0px",height:"60vh",overflow:"scroll"}},e.loading?_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},"Loading scripts...")):_t.a.createElement(_t.a.Fragment,null),_t.a.createElement(mn.a,{selectable:!0,structured:!0,size:"small"},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,{textAlign:"center"},_t.a.createElement(mn.a.HeaderCell,null,"Name"),_t.a.createElement(mn.a.HeaderCell,null,"Type"),_t.a.createElement(mn.a.HeaderCell,null,"Start Time"),_t.a.createElement(mn.a.HeaderCell,null,"End Time"),_t.a.createElement(mn.a.HeaderCell,null,"Num Docs"),_t.a.createElement(mn.a.HeaderCell,null,"State"),_t.a.createElement(mn.a.HeaderCell,null,"Actions"))),_t.a.createElement(mn.a.Body,null,e.children)))},Tr=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).setShowLogModal=function(e){a.setState({showLogModal:e})},a.loadAndShowLog=function(e,t){a.props.handleFetchJobStepLog(e,t),a.setShowLogModal(!0)},a.state={showLogModal:!1},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){if(this.props.selectedNodeResult&&!this.props.selectedNodeResult.hasOwnProperty("node_output_data"))try{this.props.handleFetchResultData(this.props.selectedNodeResult.id)}catch(e){}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedNode,a=t.sidebarTab,r=t.selectedNodeResult,o=t.toggleDeleteConfirm,i=t.handleDownloadResult,l=t.handleScriptSelect,s=t.scripts,d=t.pipelinesteps,u=t.loading,p=t.jobs;if(u)return _t.a.createElement(ta,{LoadingText:"Loading Data..."});if(n&&!r)return _t.a.createElement(Ft.a,null,_t.a.createElement(Qn.a,{error:!0,header:"This node has no results...",list:["DON'T PANIC! This node may not have started yet...","FIRST... If the job hasn't completed...try checking again later.","SECOND... If your job is data or memory intensive... try breaking it into smaller pieces.","If you're still having trouble or the job has completed without returning a node result, please reach out on our Github."]}));var h={};try{h=r.node_output_data}catch(P){}var m={};try{m=r.start_state}catch(T){}var g={};try{g=JSON.parse(r.transformed_input_data)}catch(x){}var f=p.selectedJob?p.jobStepLogs[parseInt(n.id)]||"No logs...":"No job selected...",E=[];if(n){var b=c.a.find(s.items,{id:r.script_id}),v=c.a.find(d.items,{id:parseInt(n)}),y=v?v.input_transform?v.input_transform:"No transformation in pipeline":"Error loading pipeline details...!",S="N/A",w="N/A";if(r.start_time){var C=new Date(r.start_time);S=C.toLocaleTimeString(),w=C.toLocaleDateString()}var j="N/A",_="N/A";if(r.stop_time){var O=new Date(r.stop_time);j=O.toLocaleTimeString(),_=O.toLocaleDateString()}var D="";if(b&&b.type)switch(b.type){case"RUN_ON_JOB_DOCS_PARALLEL":D="./parallel_job.png";break;case"RUN_ON_JOB":D="./serial_job.png"}E=[_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(ma,{handleModalToggle:function(){return e.setShowLogModal(!e.state.showLogModal)},visible:this.state.showLogModal,log:f,loading:p.logs_loading}),_t.a.createElement(za,{selectedNode:n,script:b}),_t.a.createElement(Ha,{selectedNode:n,imageUrl:D,script:b,startTime:S,startDate:w,endTime:j,endDate:_,result:r,toggleDeleteConfirm:o,handleDownloadResult:i,loadAndShowLog:this.loadAndShowLog,handleScriptSelect:l,style:{marginTop:"1vh"}})),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(za,{selectedNode:n,script:b}),_t.a.createElement(Ca,{raw_input_data:m,input_data_label:"Data Received from Preceding Node:",transform_script:y,transformed_input_data:g,transformed_input_data_label:"Data Fed to Script (Post Transform):",style:{marginBottom:"1vh"}})),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(za,{selectedNode:n,script:b}),_t.a.createElement(ja,{output_data:h}))]}return _t.a.createElement(Ft.a,{raised:!0,style:{height:"100%",width:"100%",overflowY:"scroll"}},E[a])}}]),n}(_t.a.PureComponent),xr=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).setShowLogModal=function(e){a.setState({showLogModal:e})},a.loadAndShowLog=function(){a.props.handleFetchJobLog(),a.setShowLogModal(!0)},a.state={showLogModal:!1},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.props.jobResult&&this.props.selectedJob.finished&&!this.props.jobResult.hasOwnProperty("output_data")&&this.props.handleFetchResultData(this.props.jobResult.id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleDocumentPageChange,a=t.selectedJob,r=t.sidebarTab,o=t.documents,i=t.handleDownloadDocument,l=t.jobs,s=t.jobResult,c=[];if(!a)return _t.a.createElement(ta,{LoadingText:"Loading Data..."});var d={data:"No inputs provided..."};try{d=JSON.parse(a.job_inputs)}catch(v){}var u={data:"No output data..."};try{u=JSON.parse(s.output_data)}catch(y){}var p=a?l.selectedJobLog||"No logs.":"No job selected...",h="N/A",m="N/A";if(a.start_time){var g=new Date(a.start_time);h=g.toLocaleTimeString(),m=g.toLocaleDateString()}var f="N/A",E="N/A";if(a.stop_time){var b=new Date(a.stop_time);f=b.toLocaleTimeString(),E=b.toLocaleDateString()}return c=[_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(ma,{handleModalToggle:function(){return e.setShowLogModal(!e.state.showLogModal)},visible:this.state.showLogModal,log:p,loading:this.props.jobs.logs_loading}),_t.a.createElement(Ba,{selectedJob:a}),_t.a.createElement(Ja,{notification_email:a.notification_email,selectedJob:a,startTime:h,startDate:m,endTime:f,endDate:E,loadAndShowLog:this.loadAndShowLog,toggleDeleteConfirm:this.props.toggleDeleteConfirm,handleDownloadJob:this.props.handleDownloadJob,style:{marginTop:"1vh"}})),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ba,{selectedJob:a}),_t.a.createElement(_a,{documents:o.items,selectedPage:o.selectedPage,pageCount:o.pages,handleDownloadDocument:i,handleChangePage:n})),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ba,{selectedJob:a}),_t.a.createElement(Oa,{input_data:d}))],a.finished&&c.push(_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Ba,{selectedJob:a}),_t.a.createElement(ja,{output_data:u}))),_t.a.createElement(Ft.a,{raised:!0,style:{height:"100%",width:"100%"}},c[r])}}]),n}(_t.a.PureComponent),kr=function(e){var t,n=e.selectedJob,a=e.jobLogsLoading,r=e.pipelines,o=e.documents,i=e.sidebarTab,l=e.handleDocumentDelete,s=e.handleUploadDocument,c=e.handleUpdateJob,d=e.toggleDeleteConfirm,u=e.handleDocumentPageChange,p=r.selectedPipeline,h={data:"No inputs provided..."};try{h=JSON.parse(n.job_inputs)}catch(m){}return t=[_t.a.createElement(oa,{job:n,pipeline:p,jobLogsLoading:a,handleUpdateJob:c}),_t.a.createElement(Wa,{job:n,documents:o,handleDocumentDelete:l,handleUploadDocument:s,handleDocumentPageChange:u}),_t.a.createElement(Va,{job:n,jobSettings:h,handleUpdateJob:c})],_t.a.createElement(Ft.a,{style:{overflowY:"auto",height:"100%"}},t[i],_t.a.createElement(Vt.a,{key:"delete_button",size:"small",labelPosition:"left",icon:"trash",color:"red",content:"Delete Job",onClick:function(){return d()},style:{marginTop:"10px"}}))},Ir=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).toggleDeleteConfirm=function(){a.setState({showDeleteConfirm:!a.state.showDeleteConfirm})},a.state={expanded:!0,showDeleteConfirm:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.selectedNode,a=t.jobs,r=t.selectedJob,o=t.results,i=t.pipelines,l=t.documents,s=t.scripts,d=t.pipelinesteps,u=t.sidebarTab,p=t.jobResult,h=t.handleDocumentDelete,m=t.handleUploadDocument,g=t.handleUpdateJob,f=t.handleDocumentPageChange,E=o.loading;if(!r||!r.started)return jt.createElement(kr,{selectedJob:r,jobLogsLoading:a.logs_loading,pipelines:i,documents:l,sidebarTab:u,handleDocumentDelete:h,handleUploadDocument:m,handleUpdateJob:g,toggleDeleteConfirm:this.toggleDeleteConfirm,handleDocumentPageChange:f});if(!n)return jt.createElement(jt.Fragment,null,jt.createElement(kn.a,{header:"Delete this job and its results??",content:"Are you sure you want to delete this job? All data will be deleted, including documents, job settings and results.",open:this.state.showDeleteConfirm,onCancel:function(){return e.toggleDeleteConfirm()},onConfirm:function(){return e.props.handleDeleteJob(e.props.selectedJobId)}}),jt.createElement(xr,{selectedJob:r,jobs:a,documents:l,sidebarTab:u,jobResult:p,handleDocumentPageChange:f,handleFetchJobLog:this.props.handleFetchJobLog,toggleDeleteConfirm:this.toggleDeleteConfirm,handleDownloadJob:this.props.handleDownloadJob,handleFetchResultData:this.props.handleFetchResultData,handleDownloadDocument:this.props.handleDownloadDocument}));var b=null;try{b=c.a.find(this.props.results.items,{pipeline_node:d.selectedPipelineStepId,type:"STEP"})}catch(v){}return jt.createElement(jt.Fragment,null,jt.createElement(kn.a,{header:"Delete this job and its results??",content:"Are you sure you want to delete this job? All data will be deleted, including documents, job settings and results.",open:this.state.showDeleteConfirm,onCancel:function(){return e.toggleDeleteConfirm()},onConfirm:function(){return e.props.handleDeleteJob(e.props.selectedJobId)}}),jt.createElement(Tr,{jobs:a,pipelinesteps:d,scripts:s,loading:E,selectedNode:n,sidebarTab:u,selectedNodeResult:b,handleFetchResultData:this.props.handleFetchResultData,handleScriptSelect:this.props.handleScriptSelect,toggleDeleteConfirm:this.toggleDeleteConfirm,handleDownloadResult:this.props.handleDownloadResult,handleFetchJobStepLog:this.props.handleFetchJobStepLog}))}}]),n}(jt.PureComponent);var Nr=Object(a.b)((function(e){return{results:e.results,scripts:e.scripts}}))((function(e){var t=e.node,n=e.scripts,a=e.results,r=null;try{r=c.a.find(n.items,{id:t.script.id})}catch(s){}var o=null;try{o=c.a.find(a.items,{pipeline_node:parseInt(t.id)})}catch(d){}var i={},l=_t.a.createElement(_t.a.Fragment,null);return o&&o.started&&(o.finished||o.error||(l=_t.a.createElement(Yt.a,{active:!0,inverted:!0},_t.a.createElement(qt.a,{size:"medium"},"Running...")))),"THROUGH_SCRIPT"===t.type?_t.a.createElement("div",null,_t.a.createElement(sa.a,{style:i},_t.a.createElement(sa.a.Content,null,l,_t.a.createElement(At.a,{floated:"right",size:"mini",src:"RUN_ON_JOB"===t.script.type?"serial_job.png":"parallel_job.png"}),_t.a.createElement(sa.a.Header,null,t.name," (",_t.a.createElement("b",null,"ID ",t.id),")"),_t.a.createElement(sa.a.Meta,null,"Script: ",r?r.human_name:"Can't Find Script."),_t.a.createElement(sa.a.Description,null,r?r.description:"Can't Find Script.",_t.a.createElement("i",null),")",_t.a.createElement("br",null),_t.a.createElement("br",null),_t.a.createElement(xa,{step:o}))))):_t.a.createElement("div",null,_t.a.createElement(sa.a,{style:i},_t.a.createElement(sa.a.Content,null,l,_t.a.createElement(At.a,{floated:"right",size:"mini",src:"start_icon_128.png"}),_t.a.createElement(sa.a.Header,null,"START SCRIPT: Extracter"),_t.a.createElement(sa.a.Meta,null,"Script: ",-1===t.script.id?"Built-In":t.script.human_name),_t.a.createElement(sa.a.Description,null,"Currently, the root node of every Gremlin job checks for any provided documents and extracts any text found therein (OCRed PDFs, .docx, .doc, etc.). In the future, you'll be able to override this default root step and write your own (or dispense with it entirely) in a new, advanced mode.",_t.a.createElement("br",null),_t.a.createElement("br",null),_t.a.createElement(xa,{step:o})))))})),Lr=function(e){var t=e.selectedTab,n=e.selectTab,a=e.selectedJob,r=e.selectedNode,o=e.jobResult,i=e.handleFetchResultData;return a&&a.started?r?_t.a.createElement(Rr,{selectedTab:t,selectTab:n}):_t.a.createElement(Jr,{selectedTab:t,selectTab:n,finished:a.finished,jobResult:o,handleFetchResultData:i}):_t.a.createElement(Ar,{selectedTab:t,selectTab:n})},Rr=function(e){var t=e.selectedTab,n=e.selectTab;return _t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},_t.a.createElement(Lt.a.Item,{name:"node",active:0===t,onClick:function(e){e.stopPropagation(),n(0)}},_t.a.createElement(Rt.a,{name:"code branch"}),"Node"),_t.a.createElement(Lt.a.Item,{name:"inputs",active:1===t,onClick:function(e){e.stopPropagation(),n(1)}},_t.a.createElement(Rt.a,{name:"cloud upload"}),"Input"),_t.a.createElement(Lt.a.Item,{name:"outputs",active:2===t,onClick:function(e){e.stopPropagation(),n(2)}},_t.a.createElement(Rt.a,{name:"cloud download"}),"Output"))},Ar=function(e){var t=e.selectedTab,n=e.selectTab;return _t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},_t.a.createElement(Lt.a.Item,{name:"launch",active:0===t,onClick:function(e){e.stopPropagation(),n(0)}},_t.a.createElement(Rt.a,{name:"circle play",icon:"green"}),"Run"),_t.a.createElement(Lt.a.Item,{name:"documents",active:1===t,onClick:function(e){e.stopPropagation(),n(1)}},_t.a.createElement(Rt.a,{name:"file text outline"}),"Documents"),_t.a.createElement(Lt.a.Item,{name:"data",active:2===t,onClick:function(e){e.stopPropagation(),n(2)}},_t.a.createElement(Rt.a,{name:"cloud upload"}),"Input Data"))},Jr=function(e){var t=e.selectedTab,n=e.selectTab,a=e.finished,r=e.jobResult,o=e.handleFetchResultData,i=[_t.a.createElement(Lt.a.Item,{name:"job",active:0===t,onClick:function(e){e.stopPropagation(),n(0)}},_t.a.createElement(Rt.a,{name:"briefcase"}),"Job"),_t.a.createElement(Lt.a.Item,{name:"documents",active:1===t,onClick:function(e){e.stopPropagation(),n(1)}},_t.a.createElement(Rt.a,{name:"file text outline"}),"Documents"),_t.a.createElement(Lt.a.Item,{name:"data",active:2===t,onClick:function(e){e.stopPropagation(),n(2)}},_t.a.createElement(Rt.a,{name:"cloud upload"}),"Input Data")];return a&&i.push(_t.a.createElement(Lt.a.Item,{name:"data",active:2===t,onClick:function(e){r&&!r.hasOwnProperty("output_data")&&o(r.id),e.stopPropagation(),n(3)}},_t.a.createElement(Rt.a,{name:"cloud download"}),"Output Data")),_t.a.createElement(Lt.a,{icon:"labeled",vertical:!0},i)},Ur=function(e){var t=e.job,n=e.startJob,a=e.deleteJob,r=e.downloadJob,o=[];return t.started||o.push(_t.a.createElement(Lt.a.Item,{name:"startJob",onClick:function(e){e.stopPropagation();var a={id:t.id,queued:!0};n(a)}},_t.a.createElement(Rt.a,{name:"play",color:"green"}),"Start")),o.push(_t.a.createElement(Lt.a.Item,{name:"deleteJob",onClick:function(e){e.stopPropagation(),a(t.id)}},_t.a.createElement(Rt.a,{name:"trash",color:"red"}),"Delete")),t.file&&o.push(_t.a.createElement(Lt.a.Item,{name:"downloadJob",onClick:function(e){e.stopPropagation(),r(t.id)}},_t.a.createElement(Rt.a,{name:"download"}),"Download")),_t.a.createElement(Lt.a,{icon:"labeled"},o)},Mr=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).toggleDeleteConfirm=function(){a.setState({showDeleteConfirm:!a.state.showDeleteConfirm})},a.toggleSidebar=function(){a.setState({showSidebar:!a.state.showSidebar})},a.closeSidebar=function(){a.state.showSidebar&&a.setState({showSidebar:!1})},a.openSidebar=function(){a.state.showSidebar||a.setState({showSidebar:!0})},a.setSidebarTab=function(e){a.state.sidebarTab===e?a.toggleSidebar():a.setState({sidebarTab:e},a.openSidebar())},a.onConfirmDelete=function(e){a.props.handleDeleteJob(e),a.toggleDeleteConfirm()},a.tick=function(){var e=c.a.find(a.props.jobs.items,{id:a.props.jobs.selectedJobId});console.log("Job Result Digraph Tick"),e&&((e.queued||e.started&&!e.finished&&!e.error)&&(console.log("Job selected started and has not finished or errored out"),a.refreshResultDigraphData()),e.started||a.props.dispatch(ke()))},a.refreshResultDigraphData=function(){a.props.dispatch(Ae(a.props.jobs.selectedJobId)),a.props.dispatch(mt())},a.handleSelectJob=function(e){console.log("Job selected",e),a.props.dispatch(pt(e.id)).then((function(){Promise.all([a.props.dispatch({type:"CLEAR_JOB_LOGS"}),a.props.dispatch(Re()),a.props.dispatch(nt(e.pipeline.id))]).then((function(){Promise.all([a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=17;break}return e.prev=1,t({type:"SET_SCRIPTS_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,ue(n().pipelines.selectedPipelineId,a);case 6:if(200!==(r=e.sent).status){e.next=10;break}return t(Me(r)),e.abrupt("return",Promise.resolve(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t(E("Error fetching scripts for pipeline: "+e.t0));case 15:e.next=18;break;case 17:t(E("Not logged in!"));case 18:return t({type:"SET_SCRIPTS_LOADING",loading:!1}),e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),a.props.dispatch(Ae(e.id)),a.props.dispatch(tt(e.pipeline.id))]).then((function(){a.props.digraphEngine.renderPipeline()}))}))}))},a.handleFetchJobs=function(){a.props.dispatch(Et())},a.handleUnselectJob=function(){a.props.dispatch(ht()),a.props.dispatch(Et())},a.handleDownloadResult=function(e){a.props.dispatch(Le(e))},a.loadAndShowNodeLog=function(e,t){a.props.dispatch(wt(e,t)).then((function(){a.toggleLogModal()}))},a.ZoomCanvas=function(e){var t=Object(i.a)({},a.state.digraph);t.scale=e,a.setState(t)},a.handleTabChange=function(e){a.props.dispatch(b(e))},a.handleSelectPipeline=function(e){console.log("HandleSelectPipelineRow"),console.log("Pipeline selected"),a.props.dispatch(nt(e)).then((function(){a.props.dispatch(tt(e)).then((function(){a.handleTabChange(2)}))}))},a.state={showLog:!1,timer:null,showSidebar:!0,showDeleteConfirm:!1,sidebarTab:0},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.props.digraphEngine.setLocked(!0),this.props.fetchPipelines(),this.props.handleFetchScripts();var e=setInterval(this.tick,5e3);this.setState({timer:e}),this.handleFetchJobs(),this.props.jobs.selectedJobId&&console.log("TODO - Refresh job digraph")}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer),this.props.digraphEngine.setLocked(!1)}},{key:"render",value:function(){var e=this,t=[jt.createElement(pa.a.Section,{key:0,link:!0,onClick:function(){return e.handleUnselectJob()}},"Jobs")],n=this.props.jobs.items?this.props.jobs.items:[],a=this.props.pipelinesteps.items?this.props.pipelinesteps.items:[],r=c.a.find(n,{id:this.props.jobs.selectedJobId}),o=c.a.find(a,{id:this.props.pipelinesteps.selectedPipelineStepId}),i=null;try{i=c.a.find(this.props.results.items,{type:"JOB"})}catch(h){}var l=[];if(n.length>0)for(var s=function(t){l.push(jt.createElement(Dr,{key:n[t].id,job:n[t],selected:n[t].id===e.props.jobs.selectedJobId,pipeline:n[t].pipeline,handleDeleteJob:e.props.handleDeleteJob,handleDownloadJob:e.props.handleDownloadJob,handleSelectJobRow:function(){return e.handleSelectJob(n[t])},handleUpdateJob:e.props.handleUpdateJob,handleTabChange:e.handleTabChange,handleSelectPipeline:e.handleSelectPipeline,handlePipelineModalToggle:e.props.handlePipelineModalToggle}))},d=0;d<n.length;d++)s(d);else l.push(jt.createElement(mn.a.Row,{key:0},jt.createElement(mn.a.Cell,{textAlign:"center",colSpan:"8"},"No jobs match your selection")));var u=jt.createElement(Pr,{jobs:this.props.jobs,handleSelectJobPage:this.props.handleSelectJobPage},l);this.props.jobs.selectedJob&&(t.push(jt.createElement(pa.a.Divider,{key:1})),t.push(jt.createElement(pa.a.Section,{active:!0,key:2},this.props.jobs.selectedJob.name)));var p=jt.createElement(Ft.a,{raised:!0,style:{width:"100%"}},jt.createElement(pa.a,null,t));return jt.createElement(Bn,null,jt.createElement(rn,{visible:this.state.showDeleteConfirm,message:"You have chosen to delete this job. ARE YOU SURE? This cannot be undone. You will lose uploaded documents and any processed results.",yesAction:function(){return e.onConfirmDelete(e.props.jobs.selectedJobId)},noAction:this.toggleDeleteConfirm,toggleModal:this.toggleDeleteConfirm}),-1===this.props.jobs.selectedJobId?jt.createElement("div",null,jt.createElement(na,{onChange:this.props.handleSetJobSearchString,onCreate:this.props.handleNewJobModalToggle,onSubmit:this.props.fetchJobs,placeholder:"Search Jobs by Name...",value:this.props.jobs.searchString})):jt.createElement(jt.Fragment,null),jt.createElement("div",null,-1===this.props.jobs.selectedJobId?jt.createElement(dn,{header:p,loading:this.props.jobs.loading,loadingText:"Fetching Job Details...",body:u}):jt.createElement(_r,{key:this.props.jobs.selectedJob?this.props.jobs.selectedJob.id:-1,digraphEngine:this.props.digraphEngine,toggleSidebar:this.toggleSidebar,showSidebar:this.state.showSidebar,exitDigraph:this.handleUnselectJob,showSidebarToggle:!1,detailPanel:jt.createElement(Ir,{results:this.props.results,jobs:this.props.jobs,pipelinesteps:this.props.pipelinesteps,scripts:this.props.scripts,documents:this.props.documents,pipelines:this.props.pipelines,selectedJob:r,selectedNode:o,jobResult:i,setSidebarTab:this.setSidebarTab,sidebarTab:this.state.sidebarTab,handleFetchResultData:this.props.handleFetchResultData,handleFetchJobLog:this.props.handleFetchJobLog,handleFetchJobStepLog:this.props.handleFetchJobStepLog,handleDownloadResult:this.props.handleDownloadResult,handleDownloadJob:this.props.handleDownloadJob,handleDeleteJob:this.props.handleDeleteJob,handleDownloadDocument:this.props.handleDownloadDocument,handleScriptSelect:this.props.handleScriptSelect,handleDocumentDelete:this.props.handleDocumentDelete,handleUploadDocument:this.props.handleUploadDocument,handleUpdateJob:this.props.handleUpdateJob,handleDocumentPageChange:this.props.handleDocumentPageChange}),controls:jt.createElement(aa,{digraphEngine:this.props.digraphEngine}),trayControls:jt.createElement(Lr,{selectedTab:this.state.sidebarTab,selectTab:this.setSidebarTab,selectedJob:r,selectedNode:o,jobResult:i,handleFetchResultData:this.props.handleFetchResultData}),playControls:jt.createElement(Ur,{job:r,startJob:this.props.handleUpdateJob,deleteJob:this.toggleDeleteConfirm,downloadJob:this.props.handleDownloadJob}),nodeClass:Nr})),-1===this.props.jobs.selectedJobId?jt.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"2vh"}},jt.createElement("div",null,jt.createElement(yn.a,{activePage:this.props.jobs.selectedPage,onPageChange:function(t,n){var a=n.activePage;return e.props.handleSelectJobPage(a)},totalPages:this.props.jobs.total_pages}))):jt.createElement(jt.Fragment,null))}}]),n}(jt.PureComponent);var Fr=Object(a.b)((function(e){return{results:e.results,documents:e.documents,jobs:e.jobs,scripts:e.scripts,pipelines:e.pipelines,pipelinesteps:e.pipelinesteps,application:e.application}}))(Mr),zr=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.props.handleRefreshSystemStats()}},{key:"render",value:function(){var e=this.props.system;return _t.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}},e.loading?_t.a.createElement(Yt.a,{active:!0},_t.a.createElement(qt.a,null,"Updating System Stats...")):_t.a.createElement(_t.a.Fragment,null),_t.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginBottom:"1vh"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{size:"massive",icon:!0,style:{fontSize:"2em"}},_t.a.createElement(Rt.a,{name:"dashboard"}),"System Dashboard",_t.a.createElement(Jt.a.Subheader,null,"Current Gremlin usage, user count and system status at-a-glance.")))),_t.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement(Ft.a,{style:{width:"30vw",height:"30vh",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"fire",color:"red",size:"massive"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.error_job_count,_t.a.createElement(Jt.a.Subheader,null,"FAILED JOBS"))))),_t.a.createElement(Ft.a,{style:{width:"30vw",height:"30vh",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"play",color:"green",size:"massive"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.running_job_count,_t.a.createElement(Jt.a.Subheader,null,"RUNNING JOBS"))))),_t.a.createElement(Ft.a,{style:{width:"30vw",height:"30vh",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"ordered list",color:"blue",size:"massive"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.queued_job_count,_t.a.createElement(Jt.a.Subheader,null,"QUEUED JOBS")))))),_t.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement(Ft.a,{style:{width:"18vw",height:"18vh",textAlign:"center",verticalAlign:"middle",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"users",size:"huge"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.user_count,_t.a.createElement(Jt.a.Subheader,null,"TOTAL USERS"))))),_t.a.createElement(Ft.a,{style:{width:"18vw",height:"18vh",textAlign:"center",verticalAlign:"middle",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"shuffle",size:"huge"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.pipeline_count,_t.a.createElement(Jt.a.Subheader,null,"PIPELINES"))))),_t.a.createElement(Ft.a,{style:{width:"18vw",height:"18vh",textAlign:"center",verticalAlign:"middle",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"code",size:"huge"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.script_count,_t.a.createElement(Jt.a.Subheader,null,"SCRIPTS"))))),_t.a.createElement(Ft.a,{style:{width:"18vw",height:"18vh",textAlign:"center",verticalAlign:"middle",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"file text outline",size:"huge"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.doc_count,_t.a.createElement(Jt.a.Subheader,null,"DOCUMENTS"))))),_t.a.createElement(Ft.a,{style:{width:"18vw",height:"18vh",textAlign:"center",verticalAlign:"middle",margin:"1vh"},raised:!0},_t.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",{style:{marginBottom:"1vh"}},_t.a.createElement(Rt.a,{name:"file text",size:"huge"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h1",textAlign:"center"},e.parsed_doc_count,_t.a.createElement(Jt.a.Subheader,null,"OCRed DOCUMENTS")))))),_t.a.createElement("div",{style:{zIndex:100,position:"absolute",bottom:"1vh",right:"1vw"}},_t.a.createElement(At.a,{style:{height:"6vh"},src:"/gordium_128_name_left.png"})))}}]),n}(jt.PureComponent);var Br=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).logMove=function(e){var t=Object(i.a)({},a.state.lastNodeMoves);t[e.id]={x:e.position.x,y:e.position.y,lastTime:Date.now()},a.setState({lastNodeMoves:t})},a.syncStaleNodeMoves=function(){var e=Date.now();for(var t in a.state.lastNodeMoves)e-a.state.lastNodeMoves[t].lastTime>1e3&&(a.handleUpdatePipelineStep({id:t,x_coord:a.state.lastNodeMoves[t].x,y_coord:a.state.lastNodeMoves[t].y}),delete a.state.lastNodeMoves[t])},a.fetchJobs=function(){a.props.dispatch(Et())},a.handleSelectJobRow=function(e,t){a.props.dispatch(pt(e)).then((function(){Promise.all([a.props.dispatch({type:"CLEAR_JOB_LOGS"}),a.props.dispatch(ke()),a.props.dispatch(Re()),a.props.dispatch(Ae(e)),a.props.dispatch(nt(t))])}))},a.handleDownloadJobResult=function(e){a.props.dispatch(gt(e))},a.handleDeleteJob=function(e){a.props.dispatch(ht()).then((function(){a.props.dispatch(St(e)).then((function(){a.props.dispatch(Et()),a.props.dispatch(Re()),a.props.dispatch(Pe())}))}))},a.handleSetJobSearchString=function(e){a.props.dispatch(bt(e))},a.handleSelectJobPage=function(e){a.props.dispatch(vt(e)).then((function(){a.props.dispatch(Et())}))},a.handleUpdateJob=function(e){a.props.dispatch(yt(e))},a.handleCreateJob=function(e){a.props.dispatch(ft(e)).then((function(e){e&&a.props.dispatch(Et()).then((function(){a.props.dispatch(pt(e.id)).then((function(){Promise.all([a.props.dispatch(ke()),a.props.dispatch(Pe()),a.props.dispatch(Re()),a.props.dispatch({type:"NEW_JOB_MODAL_TOGGLE"})])}))}))}))},a.handleFetchJobStepLog=function(e,t){a.props.dispatch(wt(e,t))},a.handleFetchJobLog=function(){a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=17;break}return e.prev=1,t({type:"SET_JOB_LOG_LOADING",loading:!0}),a=m.a.get("token"),r=n().jobs.selectedJobId,e.next=7,B(r,a);case 7:return 200===(o=e.sent).status&&t({type:"SET_JOB_LOG",log:o.data.log}),e.abrupt("return",Promise.resolve(!0));case 12:e.prev=12,e.t0=e.catch(1),t(E("Error trying to fetch log: "+e.t0));case 15:e.next=18;break;case 17:t(E("Not logged in!"));case 18:return e.abrupt("return",Promise.resolve(!1));case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}())},a.handleClearLogs=function(){a.props.dispatch({type:"CLEAR_JOB_LOGS"})},a.handleUpdateNewJobName=function(e){a.props.dispatch(function(e){return{type:"UPDATE_NEW_JOB_NAME",newJobName:e}}(e))},a.showSidebar=function(e){a.setState({showSidebar:e})},a.handleRefreshSystemStats=function(){a.props.dispatch(Be())},a.handleRefreshSystemStats=function(){a.props.dispatch(Ge())},a.handleShowSuccessToast=function(e){a.props.dispatch(f(e))},a.handleShowErrorToast=function(e){a.props.dispatch(E(e))},a.handleNewJobModalToggle=function(){a.props.dispatch({type:"NEW_JOB_MODAL_TOGGLE"})},a.handleScriptModalToggle=function(){a.props.dispatch({type:"SCRIPT_MODAL_TOGGLE"})},a.handleToggleInviteUserModal=function(){a.props.dispatch({type:"INVITE_USER_MODAL_TOGGLE"})},a.handleNewScriptModalToggle=function(){a.props.dispatch({type:"NEW_SCRIPT_MODAL_TOGGLE"})},a.handleNewPipelineModalToggle=function(){a.props.dispatch({type:"NEW_PIPELINE_MODAL_TOGGLE"})},a.handleTabChange=function(e,t){a.props.dispatch(b(e)).then((function(){t&&t()}))},a.handleLogout=function(){Promise.all([a.props.dispatch(Pe()),a.props.dispatch(Re()),a.props.dispatch((function(e){return e({type:"CLEAR_JOBS"}),Promise.resolve(!0)})),a.props.dispatch({type:"CLEAR_PIPELINES"}),a.props.dispatch(He()),a.props.dispatch(Ge())]).then((function(){a.props.dispatch(st())}))},a.handleToggleBuildMode=function(){a.props.dispatch((function(e){return e({type:"TOGGLE_BUILD_MODE"}),Promise.resolve(!0)})).then((function(){a.props.application.buildMode?a.handleCreateTestJob(a.props.pipelines.selectedPipelineId):a.clearTestData()}))},a.handleFetchTestJobStepLog=function(e,t){a.props.dispatch(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a,r){var o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r().auth.loggedIn){n.next=16;break}return n.prev=1,a({type:"SET_TEST_JOB_LOG_LOADING",loading:!0}),o=m.a.get("token"),n.next=6,z(e,t,o);case 6:return 200===(i=n.sent).status&&a({type:"ADD_TEST_JOB_STEP_LOG",log:i.data.log,stepId:t}),n.abrupt("return",Promise.resolve(!0));case 11:n.prev=11,n.t0=n.catch(1),a(E("Error trying to fetch test job step log: "+n.t0));case 14:n.next=17;break;case 16:a(E("Not logged in!"));case 17:return n.abrupt("return",Promise.resolve(!1));case 18:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t))},a.handleFetchTestJobLog=function(){a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=17;break}return e.prev=1,a=m.a.get("token"),r=n().test_job.id,t({type:"SET_TEST_JOB_LOG_LOADING",loading:!0}),e.next=7,B(r,a);case 7:return 200===(o=e.sent).status&&t({type:"SET_TEST_JOB_LOG",log:o.data.log}),e.abrupt("return",Promise.resolve(!0));case 12:e.prev=12,e.t0=e.catch(1),t(E("Error trying to fetch test job log: "+e.t0));case 15:e.next=18;break;case 17:t(E("Not logged in!"));case 18:return e.abrupt("return",Promise.resolve(!1));case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}())},a.handleTestTransformForResult=function(e,t){a.props.dispatch(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a,r){var o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r().auth.loggedIn){n.next=18;break}return a({type:"SET_TEST_TRANSFORM_LOADING",loading:!0}),n.prev=2,o=m.a.get("token"),n.next=6,P(e,t,o);case 6:return i=n.sent,console.log("Response is: ",i),200===i.status&&a({type:"RECEIVE_TEST_TRANSFORM",resultId:e,transformed_input:i.data.output_data}),n.abrupt("return",Promise.resolve(!0));case 12:n.prev=12,n.t0=n.catch(2),a(E("Error trying to test transform: "+n.t0)),a({type:"SET_TEST_TRANSFORM_LOADING",loading:!1});case 16:n.next=19;break;case 18:a(E("Not logged in!"));case 19:return n.abrupt("return",Promise.resolve(!1));case 20:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t))},a.refreshTestDocuments=function(){a.props.dispatch(Ne())},a.refreshSummaryTestResults=function(){a.props.dispatch(Ae(a.props.test_job.test_job.id))},a.handleUploadTestDocument=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=14;break}return t.prev=1,n({type:"SET_TEST_DOCUMENTS_LOADING",loading:!0}),t.next=5,J(e,a().test_job.test_job.id,m.a.get("token"));case 5:if(200!==t.sent.status){t.next=9;break}return n({type:"SET_TEST_DOCUMENTS_LOADING",loading:!1}),t.abrupt("return",Promise.resolve(!0));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0.response?n(E(t.t0.response.data.message)):n(E("Something went wrong while uploading test file"));case 14:return t.abrupt("return",Promise.resolve(!1));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)).then((function(){a.props.dispatch(Ne())}))},a.handleTestDocumentPageChange=function(e){var t;a.props.dispatch((t=e,function(e){return e({type:"SET_TEST_DOCUMENT_PAGE",selectedPage:t}),Promise.resolve(!0)})).then((function(){a.props.dispatch(Ne())}))},a.handleDeleteTestDocument=function(e){a.props.dispatch(Oe(e)).then((function(){a.props.dispatch(Ne())}))},a.handleCreateTestJob=function(e){a.clearTestData(),a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=19;break}return n({type:"SET_TEST_LOADING",loading:!0}),t.prev=2,r=m.a.get("token"),t.next=6,se(e,r);case 6:if(200!==(o=t.sent).status){t.next=11;break}return t.next=10,n({type:"RECEIVE_TEST_JOB",test_job:o.data});case 10:return t.abrupt("return",o.data);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),n(E("Error creating test job for pipeline ID #".concat(e,": ").concat(t.t0))),n({type:"SET_TEST_LOADING",loading:!0});case 17:t.next=20;break;case 19:n(E("Not logged in!"));case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)).then((function(e){e.id&&(a.updateTestDocuments(),a.props.dispatch(Ae(e.id)))}))},a.handleRunTestJobToNode=function(e){a.props.dispatch(Ie(e))},a.handleUpdateTestJob=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=21;break}return n({type:"SET_TEST_LOADING",updatedJob:!0}),t.prev=2,r=m.a.get("token"),t.next=6,V(e,r);case 6:if(200!==(o=t.sent).status){t.next=12;break}return n({type:"UPDATE_TEST_JOB",updatedJob:o.data}),t.abrupt("return",Promise.resolve(!0));case 12:n(E("Unable to refresh test job with Id: ",a().job.id));case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),n(E("Error trying to update test job: "+t.t0)),n({type:"SET_TEST_LOADING",updatedJob:!1});case 19:t.next=22;break;case 21:n(E("Not logged in!"));case 22:return t.abrupt("return",Promise.resolve(!1));case 23:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleRefreshTestJob=function(){a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=21;break}return t({type:"SET_TEST_LOADING",loading:!0}),e.prev=2,a=m.a.get("token"),e.next=6,Y(n().test_job.test_job.id,a);case 6:if(200!==(r=e.sent).status){e.next=12;break}return t({type:"RECEIVE_TEST_JOB",test_job:r.data}),e.abrupt("return",Promise.resolve(!0));case 12:t(E("Unable to refresh test job: ",n().test_job.test_job.id));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),t(E("Error trying to update selected job: "+e.t0)),t({type:"SET_TEST_LOADING",loading:!1});case 19:e.next=22;break;case 21:t(E("Not logged in!"));case 22:return e.abrupt("return",Promise.resolve(!1));case 23:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}())},a.updateTestDocuments=function(){a.props.dispatch(Ne())},a.clearTestData=function(){a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"CLEAR_TEST_DATA"}),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){a.props.dispatch(Re())}))},a.handleUserPageChange=function(e){var t;a.props.dispatch((t=e,function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n({type:"CHANGE_USER_PAGE",selectedPage:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){a.props.dispatch(ut())}))},a.handleChangeUserPermissions=function(e,t){a.props.dispatch(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a,r){var o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r().auth.loggedIn){n.next=17;break}return n.prev=1,a({type:"SET_USERS_LOADING",loading:!0}),o=m.a.get("token"),n.next=6,L(e,t,o);case 6:if(200!==n.sent.status){n.next=10;break}return a({type:"SET_USERS_LOADING",loading:!1}),n.abrupt("return",Promise.resolve(!0));case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a(E("Error fetching users: "+n.t0));case 15:n.next=18;break;case 17:a(E("Not logged in!"));case 18:return n.abrupt("return",Promise.resolve(!1));case 19:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t)).then((function(){a.props.dispatch(ut())}))},a.handleSetUserNameFilter=function(e){a.props.dispatch(ct(e))},a.handleFetchUsers=function(){a.props.dispatch(ut())},a.handleInviteUser=function(e){var t;a.props.dispatch((t=e,function(){var e=Object(p.a)(u.a.mark((function e(n,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a().auth.loggedIn){e.next=20;break}return e.prev=1,r=m.a.get("token"),e.next=5,N(t,r);case 5:if(o=e.sent,console.log("Invite new user response: ",o),200!==o.status){e.next=12;break}return n(ut()),e.abrupt("return",Promise.resolve(!0));case 12:n(E("Unable to invite user with values: ".concat(t)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),n(E("Unable to create this user: ".concat(e.t0.response.data.message)));case 18:e.next=21;break;case 20:n(E("Not logged in!"));case 21:return e.abrupt("return",Promise.resolve(!1));case 22:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}())).then((function(){a.handleToggleInviteUserModal()}))},a.handleChangePassword=function(e,t){return a.props.dispatch(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a,r){var o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("changePassword"),!r().auth.loggedIn){n.next=20;break}return n.prev=2,o=m.a.get("token"),n.next=6,x(e,t,o);case 6:if(204!==n.sent.status){n.next=12;break}return a(f("Password successfully changed.")),n.abrupt("return",Promise.resolve(!0));case 12:a(E("Unable to change password."));case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(2),a(E("Error trying to change password."));case 18:n.next=21;break;case 20:a(E("Not logged in!"));case 21:return n.abrupt("return",Promise.resolve(!1));case 22:case"end":return n.stop()}}),n,null,[[2,15]])})));return function(e,t){return n.apply(this,arguments)}}()}(e,t))},a.handleDeleteUser=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=21;break}return t.prev=1,r=m.a.get("token"),console.log("Trying to delete user ID ".concat(e)),t.next=6,R(e,r);case 6:if(o=t.sent,console.log("Respose",o),204!==o.status){t.next=13;break}return console.log("Delete success"),t.abrupt("return",n(ut()));case 13:n(E("Unable to delete user with ID ".concat(e)));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(E("Error trying to delete user with ID #".concat(e),t.t0));case 19:t.next=22;break;case 21:n(E("Not logged in!"));case 22:return t.abrupt("return",Promise.resolve(!1));case 23:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.SetUserNameFilter=function(e){a.props.dispatch(ct(e))},a.setPipelineNameFilter=function(e){a.props.dispatch(et(e))},a.handleSelectPipelineRow=function(e){a.props.dispatch(nt(e)).then((function(){a.props.dispatch(tt(e))}))},a.fetchPipelines=function(){a.props.dispatch(it())},a.refreshSelectedPipelineDigraph=function(){try{a.props.dispatch(tt(a.props.pipelines.selectedPipelineId))}catch(e){console.log("Unabe to refresh selected pipeline digraph:",e)}},a.handleUploadPipeline=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=15;break}return t.prev=1,n({type:"SET_PIPELINES_LOADING",loading:!0}),t.next=5,oe(e,m.a.get("token"));case 5:if(200!==(r=t.sent).status){t.next=9;break}return n({type:"ADD_PIPELINE",newPipeline:r.data}),t.abrupt("return",Promise.resolve(!0));case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),n({type:"SET_PIPELINES_LOADING",loading:!1}),t.t0.response?n(E(t.t0.response.data.message)):n(E("Something went wrong while uploading this pipeline"));case 15:return t.abrupt("return",Promise.resolve(!1));case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleCreatePipeline=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=14;break}return t.prev=1,r=m.a.get("token"),t.next=5,le(e,r);case 5:201===(o=t.sent).status&&n({type:"ADD_PIPELINE",newPipeline:o.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(E("Error creating pipeline: "+t.t0));case 12:t.next=15;break;case 14:n(E("Not logged in!"));case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleDeletePipeline=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=15;break}return t.prev=1,r=m.a.get("token"),t.next=5,ie(e,r);case 5:if(204!==t.sent.status){t.next=8;break}return t.abrupt("return",Promise.resolve(e));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(E("Error trying to delete pipeline with ID #".concat(e,": ").concat(t.t0)));case 13:t.next=16;break;case 15:n(E("Not logged in!"));case 16:return t.abrupt("return",Promise.resolve(!1));case 17:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)).then((function(e){a.props.dispatch(function(e){return function(t){return t({type:"REMOVE_PIPELINE",pipelineId:e}),Promise.resolve(!0)}}(e))}))},a.handleUpdatePipeline=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=17;break}return t.prev=1,n({type:"SET_PIPELINES_LOADING",loading:!0}),r=m.a.get("token"),t.next=6,ge(e,r);case 6:if(200!==t.sent.status){t.next=10;break}return n(at(e)),t.abrupt("return",Promise.resolve(!0));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(E("Error updating pipeline: "+t.t0));case 15:t.next=18;break;case 17:n(E("Not logged in!"));case 18:return n({type:"SET_PIPELINES_LOADING",loading:!1}),t.abrupt("return",Promise.resolve(!1));case 20:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)).then((function(){var t;a.props.dispatch((t=e.id,function(){var e=Object(p.a)(u.a.mark((function e(n,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a().auth.loggedIn){e.next=16;break}return e.prev=1,r=m.a.get("token"),e.next=5,ce(t,r);case 5:if(200!==(o=e.sent).status){e.next=9;break}return n(at(o.data)),e.abrupt("return",Promise.resolve(!1));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n(E("Error refreshing pipeline: "+e.t0));case 14:e.next=17;break;case 16:n(E("Not logged in!"));case 17:return e.abrupt("return",Promise.resolve(!1));case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()))}))},a.handleDownloadPipeline=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o,i,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=23;break}return t.prev=1,r=m.a.get("token"),t.next=5,re(e,r);case 5:if(200!==(o=t.sent).status){t.next=16;break}return i=o.headers.filename,l=new Blob([o.data],{type:o.headers["content-type"]}),(s=document.createElement("a")).href=window.URL.createObjectURL(l),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),t.abrupt("return",Promise.resolve(!0));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),n(E("Error trying to export pipeline ID".concat(e,": ").concat(t.t0)));case 21:t.next=24;break;case 23:n(E("Not logged in!"));case 24:return t.abrupt("return",Promise.resolve(!1));case 25:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleUnselectPipeline=function(){a.props.dispatch(lt()).then((function(){a.props.digraphEngine.clearAllValues()}))},a.handleSelectPipeline=function(e){return a.props.dispatch(nt(e)).then((function(){a.props.dispatch(tt(e)).then((function(){a.props.digraphEngine.renderPipeline()}))}))},a.handleSelectResult=function(e){a.props.dispatch(function(e){return{type:"SELECT_RESULT",selectedResultId:e}}(e))},a.handleDownloadResult=function(e){a.props.dispatch(Le(e))},a.handleFetchFullResultData=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=18;break}return t.prev=1,n({type:"SET_RESULTS_LOADING",loading:!0}),r=m.a.get("token"),t.next=6,D(e,r);case 6:if(200!==(o=t.sent).status){t.next=10;break}return n({type:"UPDATE_RESULT",updatedResult:o.data}),t.abrupt("return",Promise.resolve(!0));case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),n(E("Error trying to fetch full result: "+t.t0)),n({type:"SET_RESULTS_LOADING",loading:!1});case 16:t.next=19;break;case 18:n(E("Not logged in!"));case 19:return t.abrupt("return",Promise.resolve(!1));case 20:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleFetchSummaryResults=function(){a.props.dispatch(Ae(a.props.jobs.selectedJobId))},a.handleUploadDocument=function(e){a.props.dispatch(_e(e)).then((function(){a.props.dispatch(ke())}))},a.handleDownloadDocument=function(e){a.props.dispatch(xe(e))},a.handleDocumentDelete=function(e){a.props.dispatch(Oe(e))},a.handleDocumentPageChange=function(e){a.props.dispatch(De(e)),a.props.dispatch(ke())},a.SetScriptNameFilter=function(e){a.props.dispatch(function(e){return{type:"UPDATE_SCRIPT_NAME_FILTER",filter:e}}(e))},a.handleDownloadScript=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o,i,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=23;break}return t.prev=1,r=m.a.get("token"),t.next=5,Z(e,r);case 5:if(200!==(o=t.sent).status){t.next=16;break}return i=o.headers.filename,l=new Blob([o.data],{type:o.headers["content-type"]}),(s=document.createElement("a")).href=window.URL.createObjectURL(l),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s),t.abrupt("return",Promise.resolve(!0));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),n(E("Error trying to export script ID".concat(e,": ").concat(t.t0)));case 21:t.next=24;break;case 23:n(E("Not logged in!"));case 24:return t.abrupt("return",Promise.resolve(!1));case 25:case"end":return t.stop()}}),t,null,[[1,18]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleUploadScript=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=13;break}return t.prev=1,n({type:"SET_SCRIPTS_LOADING",loading:!0}),t.next=5,Q(e,m.a.get("token"));case 5:if(200!==t.sent.status){t.next=8;break}return t.abrupt("return",Promise.resolve(!0));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),t.t0.response?n(E(t.t0.response.data.message)):n(E("Something went wrong while uploading this script"));case 13:return n({type:"SET_SCRIPTS_LOADING",loading:!1}),t.abrupt("return",Promise.resolve(!1));case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()}(e)).then((function(){a.props.dispatch(Fe())}))},a.handleScriptSelect=function(e){a.props.dispatch(function(e){return function(t){return t({type:"SELECT_SCRIPT",selectedScriptId:e}),Promise.resolve(!0)}}(e)).then((function(){a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n().auth.loggedIn){e.next=15;break}return e.prev=1,t({type:"SET_SCRIPT_DETAILS_LOADING",loading:!0}),a=m.a.get("token"),e.next=6,ne(a,n().scripts.selectedScriptId);case 6:200===(r=e.sent).status&&t(ze(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(E("Error fetching script details: "+e.t0));case 13:e.next=16;break;case 15:t(E("Not logged in!"));case 16:t({type:"SET_SCRIPT_DETAILS_LOADING",loading:!1});case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()).then((function(){a.props.dispatch({type:"SCRIPT_MODAL_TOGGLE"})}))}))},a.handleFetchScripts=function(){a.props.dispatch(Fe())},a.handleRefreshScript=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=17;break}return t.prev=1,r=m.a.get("token"),t.next=5,te(e,r);case 5:if(o=t.sent,console.log("Response from refreshScriptById: ",o),200!==o.status){t.next=10;break}return n(Ue(o.data)),t.abrupt("return",Promise.resolve(!0));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n(E("Error fetching scripts: "+t.t0));case 15:t.next=18;break;case 17:n(E("Not logged in!"));case 18:return t.abrupt("return",Promise.resolve(!1));case 19:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleDeleteScript=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=16;break}return t.prev=1,r=m.a.get("token"),t.next=5,X(e,r);case 5:if(204!==t.sent.status){t.next=9;break}return n(Je(e)),t.abrupt("return",Promise.resolve(!0));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n(E("Error trying to delete script with ID #".concat(e,": ")+t.t0));case 14:t.next=17;break;case 16:n(E("Not logged in!"));case 17:return t.abrupt("return",Promise.resolve(!1));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleClearScript=function(){a.props.dispatch((function(e){return e({type:"CLEAR_SELECTED_SCRIPT"}),Promise.resolve(!0)}))},a.handleUpdateScript=function(e){var t;a.props.dispatch((t=e,function(){var e=Object(p.a)(u.a.mark((function e(n,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a().auth.loggedIn){e.next=17;break}return e.prev=1,n({type:"SET_SCRIPTS_LOADING",loading:!0}),r=m.a.get("token"),e.next=6,ae(t,r);case 6:if(200!==(o=e.sent).status){e.next=10;break}return n(Ue(o.data)),e.abrupt("return",Promise.resolve(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n(E("Error updating script: "+e.t0));case 15:e.next=18;break;case 17:n(E("Not logged in!"));case 18:return n({type:"SET_SCRIPTS_LOADING",loading:!1}),e.abrupt("return",Promise.resolve(!1));case 20:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()))},a.handleCreateScript=function(e,t,n){a.props.dispatch(function(e,t,n){return function(){var a=Object(p.a)(u.a.mark((function a(r,o){var i,l;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!o().auth.loggedIn){a.next=20;break}return a.prev=1,i=m.a.get("token"),a.next=5,$(e,t,n,i);case 5:if(201!==(l=a.sent).status){a.next=11;break}return r({type:"ADD_SCRIPT",newScript:l.data}),a.abrupt("return",Promise.resolve(!0));case 11:r(E("Unable to create new script with name: "+e));case 12:return a.abrupt("return",Promise.resolve(!1));case 15:a.prev=15,a.t0=a.catch(1),r(E("Error creating new script: "+a.t0));case 18:a.next=21;break;case 20:r(E("Not logged in!"));case 21:case"end":return a.stop()}}),a,null,[[1,15]])})));return function(e,t){return a.apply(this,arguments)}}()}(e,t,n))},a.handleNodeSelect=function(e){var t;a.props.dispatch((t=e,function(e){return e({type:"SELECT_PIPELINENODE",selectedPipelineStepId:t}),Promise.resolve(!0)})).then((function(){a.props.dispatch(Xe(e))}))},a.handleNodeUnselect=function(){a.props.dispatch(He())},a.handleCreatePipelineStep=function(e,t,n,r,o){a.props.dispatch(function(e,t,n,a,r){return function(){var o=Object(p.a)(u.a.mark((function o(i,l){var s;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!l().auth.loggedIn){o.next=14;break}return o.prev=1,s=m.a.get("token"),o.next=5,Se({name:e,script:t,parent_pipeline:n,step_settings:JSON.stringify(a),step_number:r},s);case 5:201===o.sent.status&&i(Ze()),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),i(E("Error creating new pipeline step: "+o.t0));case 12:o.next=15;break;case 14:i(E("Not logged in!"));case 15:return o.abrupt("return",Promise.resolve());case 16:case"end":return o.stop()}}),o,null,[[1,9]])})));return function(e,t){return o.apply(this,arguments)}}()}(e,t,n,r,o)).then((function(){a.RefreshPipelineModal()}))},a.refreshPipelineStepsForSelectedPipeline=function(){var e;a.props.dispatch((e=a.props.pipelines.selectedPipelineId,function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=16;break}return t.prev=1,n({type:"SET_PIPELINENODES_LOADING",loading:!0}),r=m.a.get("token"),t.next=6,ve(e,r);case 6:return 200===(o=t.sent).status&&n(Ve(o)),t.abrupt("return",Promise.resolve(!0));case 11:t.prev=11,t.t0=t.catch(1),n(E("Error fetching pipeline steps: "+t.t0));case 14:t.next=17;break;case 16:n(E("Not logged in!"));case 17:return t.abrupt("return",Promise.resolve(!1));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()))},a.handleUpdatePipelineStep=function(e){var t;a.props.dispatch((t=e,function(){var e=Object(p.a)(u.a.mark((function e(n,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a().auth.loggedIn){e.next=17;break}return e.prev=1,r=m.a.get("token"),e.next=5,ye(t,r);case 5:if(o=e.sent,console.log("Pipeline step updated: ",o.data),200!==o.status){e.next=10;break}return n(Qe(o.data)),e.abrupt("return",Promise.resolve(!0));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n(E("Error trying to update settings for pipelinestep with ID #".concat(t.id,": ")+e.t0));case 15:e.next=18;break;case 17:n(E("Not logged in!"));case 18:return e.abrupt("return",Promise.resolve(!1));case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}())).then((function(){a.props.dispatch(Xe(e.id))}))},a.handleCreatePipelineEdge=function(e,t){var n;a.props.dispatch((n=e,function(){var e=Object(p.a)(u.a.mark((function e(t,a){var r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("createPipelineEdge",n),!a().auth.loggedIn){e.next=15;break}return e.prev=2,r=m.a.get("token"),e.next=6,pe(n,r);case 6:if(201!==(o=e.sent).status){e.next=10;break}return t($e(o.data)),e.abrupt("return",Promise.resolve(o.data));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t(E("Error linking nodes: "+e.t0));case 15:return e.abrupt("return",Promise.resolve(!1));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}())).then((function(e){a.props.digraphEngine.linkInjectGremlinId(t,e.id)}))},a.handleDeletePipelineEdge=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a().auth.loggedIn){t.next=13;break}return t.prev=1,r=m.a.get("token"),t.next=5,he(e,r);case 5:o=t.sent,console.log("Response:",o),204===o.status?(console.log("Deleted!"),n({type:"REMOVE_EDGE",edgeId:e})):console.log("Not deleted"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(E("Error deleting link: "+t.t0));case 13:return t.abrupt("return",Promise.resolve(!1));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleAddPipelineNode=function(){var e=Object(p.a)(u.a.mark((function e(t,n,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.dispatch(qe(t,n,r));case 2:if(o=e.sent)try{a.props.digraphEngine.handleCreateNode(o.id,o.name,o.x_coord,o.y_coord),a.props.digraphEngine.repaint()}catch(i){console.log("Error creating node: ",i)}else console.log("Error creating node on backend");case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.handleDeletePipelineNode=function(e){a.props.dispatch(Ke(e))},a.handleRefreshPipelineStep=function(e){a.props.dispatch(Xe(e))},a.handleRequestPipelineStepDelete=function(e){a.props.dispatch(Ke(e)).then((function(){a.RefreshPipelineModal()}))},a.requestHomeViewDataRefresh=function(){a.props.dispatch(Be())},a.tick=function(){a.syncStaleNodeMoves()},a.state={showSidebar:!1,timer:null,lastNodeMoves:{}},a.props.digraphEngine.registerNodeMoveListener(a.logMove),a.props.digraphEngine.registerNodeSelectedListener(a.handleNodeSelect),a.props.digraphEngine.registerNodeUnselectedListener(a.handleNodeUnselect),a.props.digraphEngine.registerNodeDeleteListener(a.handleDeletePipelineNode),a.props.digraphEngine.registerLinkCreateListener((function(e){try{if(Number.isInteger(e.entity.sourcePort.parent.id)&&Number.isInteger(e.entity.targetPort.parent.id)){var t={parent_pipeline:a.props.pipelines.selectedPipelineId,start_node:e.entity.sourcePort.parent.id,end_node:e.entity.targetPort.parent.id};a.handleCreatePipelineEdge(t,e.entity.options.id)}}catch(n){}})),a.props.digraphEngine.registerLinkDeleteListener(a.handleDeletePipelineEdge),a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.requestHomeViewDataRefresh();var e=setInterval(this.tick,2e3);this.setState({timer:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.pipelines,a=t.pipelinesteps,r=t.jobs,o=t.users,i=t.test_job,l=t.scripts,s=t.results,c=t.application,d=t.system,u=t.auth,p=t.windowHeight,h=u.user.role,m=_t.a.createElement(_t.a.Fragment,null);switch(c.selectedTabIndex){case 0:m=_t.a.createElement(Nt.a,{style:{width:"100vw",height:"100%"}},_t.a.createElement(zr,{system:d,handleRefreshSystemStats:this.handleRefreshSystemStats,handleNewJobModalToggle:this.handleNewJobModalToggle}));break;case 1:m=_t.a.createElement(Fr,{fetchJobs:this.fetchJobs,digraphEngine:this.props.digraphEngine,handleSelectJobPage:this.handleSelectJobPage,handleFetchJobLog:this.handleFetchJobLog,handleFetchJobStepLog:this.handleFetchJobStepLog,handleDeleteJob:this.handleDeleteJob,handleSelectJobRow:this.handleSelectJobRow,handleDownloadResult:this.handleDownloadResult,handleFetchResultData:this.handleFetchFullResultData,handleFetchScripts:this.handleFetchScripts,fetchPipelines:this.fetchPipelines,handleDownloadJob:this.handleDownloadJobResult,handleDownloadDocument:this.handleDownloadDocument,handleScriptSelect:this.handleScriptSelect,handleDocumentDelete:this.handleDocumentDelete,handleUploadDocument:this.handleUploadDocument,handleUpdateJob:this.handleUpdateJob,handleNewJobModalToggle:this.handleNewJobModalToggle,handleSetJobSearchString:this.handleSetJobSearchString,handleDocumentPageChange:this.handleDocumentPageChange});break;case 2:m=_t.a.createElement(Nt.a,{style:{width:"100vw"}},_t.a.createElement(Or,{windowHeight:p,digraphEngine:this.props.digraphEngine,user:u.user,pipelines:n,scripts:l,results:s,test_job:i,pipelinesteps:a,fetchPipelines:this.fetchPipelines,handleDownloadJobResult:this.handleDownloadJobResult,handleUpdateJob:this.handleUpdateJob,handleUpdateTestJob:this.handleUpdateTestJob,handleFetchResultData:this.handleFetchFullResultData,handleRunTestJobToNode:this.handleRunTestJobToNode,handleRefreshTestJob:this.handleRefreshTestJob,handleFetchTestResultData:this.handleFetchTestResultData,handleFetchScripts:this.handleFetchScripts,handleTestTransformForResult:this.handleTestTransformForResult,refreshTestDocuments:this.refreshTestDocuments,refreshSummaryTestResults:this.refreshSummaryTestResults,refreshSelectedPipelineDigraph:this.refreshSelectedPipelineDigraph,handleScriptSelect:this.handleScriptSelect,handleSelectPipeline:this.handleSelectPipeline,handleUploadPipeline:this.handleUploadPipeline,handleUnselectPipeline:this.handleUnselectPipeline,selectedPipelineId:n.selectedPipelineId,handlePipelineStepSelect:this.handleNodeSelect,handleDownloadPipeline:this.handleDownloadPipeline,selectedPipelineStepId:a.selectedPipelineStepId,handleAddPipelineNode:this.handleAddPipelineNode,refreshPipelineStepsForSelectedPipeline:this.refreshPipelineStepsForSelectedPipeline,handleUpdatePipelineStep:this.handleUpdatePipelineStep,handleUpdatePipeline:this.handleUpdatePipeline,handleDeletePipelineNode:this.handleDeletePipelineNode,handleCreatePipelineEdge:this.handleCreatePipelineEdge,handleDeletePipelineEdge:this.handleDeletePipelineEdge,handleDeletePipeline:this.handleDeletePipeline,handleNewPipelineModalToggle:this.handleNewPipelineModalToggle,setPipelineNameFilter:this.SetPipelineNameFilter,filterValue:c.pipelineNameFilter,handleCreateTestJob:this.handleCreateTestJob,handleDeleteTestDocument:this.handleDeleteTestDocument,handleUploadTestDocument:this.handleUploadTestDocument,handleDownloadDocument:this.handleDownloadDocument,clearTestData:this.clearTestData,handleFetchTestJobStepLog:this.handleFetchTestJobStepLog,handleFetchTestJobLog:this.handleFetchTestJobLog,buildMode:c.buildMode,handleToggleBuildMode:this.handleToggleBuildMode,handleTestDocumentPageChange:this.handleTestDocumentPageChange}));break;case 3:m=_t.a.createElement(Nt.a,{style:{width:"100vw"}},_t.a.createElement(la,{pipelines:n,pipelinesteps:a,scripts:l,handleScriptSelect:this.handleScriptSelect,handleCreateScript:this.handleCreateScript,handleUpdateScript:this.handleUpdateScript,handleDownloadScript:this.handleDownloadScript,handleUploadScript:this.handleUploadScript,handleDeleteScript:this.handleDeleteScript,handleChangeScriptNameFilter:this.SetScriptNameFilter,handleNewScriptModalToggle:this.handleNewScriptModalToggle,handleScriptModalToggle:this.handleScriptModalToggle,nameFilterValue:c.scriptNameFilter}));break;case 4:m=_t.a.createElement(Nt.a,{style:{width:"100vw"}},_t.a.createElement(ua,{user:u.user,users:o,handleCreateUser:this.handleInviteUser,handleChangePassword:this.handleChangePassword}));break;case 5:m=_t.a.createElement(Nt.a,{style:{width:"100vw"}},_t.a.createElement(Yn,{users:o,handleCreateUser:this.handleInviteUser,handleFetchUsers:this.handleFetchUsers,handleUserPageChange:this.handleUserPageChange,handleFilterUserName:this.handleFilterUserName,handleDeleteUser:this.handleDeleteUser,showInviteModal:c.showInviteUserModal,handleToggleInviteUserModal:this.handleToggleInviteUserModal,handleSetUserNameFilter:this.handleSetUserNameFilter,handleChangeUserPermissions:this.handleChangeUserPermissions}))}var g=[_t.a.createElement(Lt.a.Item,{key:"sidebar_button_0",as:"a",onClick:function(){return e.handleTabChange(0,e.handleRefreshSystemStats)}},_t.a.createElement(Rt.a,{name:"dashboard"}),"Dashboard"),_t.a.createElement(Lt.a.Item,{key:"sidebar_button_1",as:"a",onClick:function(){return e.handleTabChange(1)}},_t.a.createElement(Rt.a,{name:"briefcase"}),"Jobs")];return"ADMIN"!==h&&"LEGAL_ENG"!==h||(g.push(_t.a.createElement(Lt.a.Item,{key:"sidebar_button_".concat(g.length+1),as:"a",onClick:function(){return e.handleTabChange(2)}},_t.a.createElement(Rt.a,{name:"code branch"}),"Pipelines")),g.push(_t.a.createElement(Lt.a.Item,{key:"sidebar_button_".concat(g.length+1),as:"a",onClick:function(){return e.handleTabChange(3,e.props.dispatch(Fe()))}},_t.a.createElement(Rt.a,{name:"code"}),"Scripts"))),g.push(_t.a.createElement(Lt.a.Item,{key:"sidebar_button_".concat(g.length+1),as:"a",onClick:function(){return e.handleTabChange(4)}},_t.a.createElement(Rt.a,{name:"settings"}),"Settings")),"ADMIN"===h&&g.push(_t.a.createElement(Lt.a.Item,{key:"sidebar_button_".concat(g.length+1),as:"a",onClick:function(){return e.handleTabChange(5)}},_t.a.createElement(Rt.a,{name:"user circle"}),"Users")),_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(vn,{application:c,jobs:r,pipelines:n,clearPipeline:rt,visible:c.showNewJobModal,handleNewJobModalToggle:this.handleNewJobModalToggle,handleUpdateNewJobName:this.handleUpdateNewJobName,handleCreateJob:this.handleCreateJob,handleSelectPipeline:this.handleSelectPipeline}),_t.a.createElement(hn,{visible:c.showNewScriptModal,objectType:"Script",handleCreate:this.handleCreateScript,toggleModal:function(){return e.handleNewScriptModalToggle()}}),_t.a.createElement(pn,{visible:c.showScriptModal,handleScriptModalToggle:this.handleScriptModalToggle,selectedScriptData:l.selectedScriptData,loading:l.loading,windowHeight:p,detailsAreFetching:l.detailsAreFetching,handleUpdateScript:this.handleUpdateScript,handleDeleteScript:this.handleDeleteScript,handleClearScript:this.handleClearScript,handleRefreshScript:this.handleRefreshScript}),_t.a.createElement(Wt,{visible:c.showNewPipelineModal,handleNewPipelineModalToggle:this.handleNewPipelineModalToggle,handleCreatePipeline:this.handleCreatePipeline}),_t.a.createElement(Lt.a,{inverted:!0,style:{borderRadius:"0px",height:"8vh",margin:"0px",padding:"0px"}},_t.a.createElement(Lt.a.Item,{style:{width:"8vw"},header:!0,onClick:function(){return e.setState({showSidebar:!e.state.showSidebar})}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},_t.a.createElement("div",null,_t.a.createElement(At.a,{style:{maxHeight:"5vh",paddingRight:".5vw"},src:"/gremlin_inverted_128.png"})),_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{textAlign:"center",size:"small",inverted:!0},"GREMLIN"))))),_t.a.createElement(Nt.a,{fluid:!0},_t.a.createElement(Lt.a.Menu,{position:"right"},_t.a.createElement("div",{style:{display:"flex",flexDirection:"colomn",justifyContent:"center",alignItems:"center",height:"100%"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{style:{marginRight:"1vw"}},_t.a.createElement(Rt.a,{inverted:!0,name:"user circle outline"}),_t.a.createElement(Jt.a.Content,{style:{padding:"0px",paddingLeft:"5px"}},_t.a.createElement(Ut.a,{item:!0,simple:!0,icon:_t.a.createElement(Rt.a,{style:{marginLeft:"5px"},name:"dropdown"}),text:"User: ".concat(u.username),style:{margin:"0px",padding:"0px"},header:"Logout"},_t.a.createElement(Ut.a.Menu,null,_t.a.createElement(Ut.a.Item,{text:"Logout",onClick:this.handleLogout,icon:_t.a.createElement(Rt.a,{name:"log out"})})))))))))),_t.a.createElement(Mt.a.Pushable,{style:{height:"92vh",width:"100vw",padding:"0px"}},_t.a.createElement(Mt.a,{as:Lt.a,animation:"push",icon:"labeled",inverted:!0,onHide:function(){return e.showSidebar(!1)},vertical:!0,visible:this.state.showSidebar,style:{height:"100%",width:"8vw"}},g,_t.a.createElement("div",{style:{position:"absolute",width:"100%",bottom:"2vh",display:"flex",direction:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement(At.a,{style:{width:"4vw"},src:"/gordium_128_name_left.png"}))),_t.a.createElement(Mt.a.Pusher,{style:this.state.showSidebar?{height:"92vh",transform:"translate3d(8vw, 0px, 0px)"}:{height:"92vh"},dimmed:this.state.showSidebar},_t.a.createElement(Ft.a,{style:{width:"100%",height:"100%"}},m))))}}]),n}(jt.Component);var Gr,Hr=Object(a.b)((function(e){var t=e.auth,n=t.loggedIn,a=t.username,r=e.jobs,o=e.users,i=e.test_job,l=e.results,s=e.documents,c=e.pipelines;return{jobs:r,users:o,test_job:i,results:l,scripts:e.scripts,pipelinesteps:e.pipelinesteps,edges:e.edges,documents:s,pipelines:c,loggedIn:n,username:a,application:e.application,system:e.system,auth:e.auth}}))((Gr=Br,function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;Object(Tt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={width:0,height:0},e.updateWindowDimensions=function(){e.setState({width:window.innerWidth,height:window.innerHeight})},e}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){return _t.a.createElement(Gr,Object.assign({},this.props,{windowWidth:this.state.width,windowHeight:this.state.height,isMobileSized:this.state.width<700}))}}]),n}(jt.Component))),Vr=function(e){var t=e.job,n=e.handleDownloadJob;return t&&t.file?_t.a.createElement("div",null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"file text"}),"Download Job Results"),_t.a.createElement(Vt.a,{onClick:function(){return n(t.id)},primary:!0},"Download")):_t.a.createElement("div",null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"x"}),"No Results..."),_t.a.createElement(Vt.a,{primary:!0,disabled:!0},"Download"))},Wr=function(e){var t=e.visible,n=e.toggleModal,a=e.handleUpdateJob,r=e.selectedJob;return r?_t.a.createElement(Bt.a,{open:t},_t.a.createElement(Gt.a,{corner:"right",icon:"x",onClick:n}),_t.a.createElement(Bt.a.Content,null,_t.a.createElement(Ft.a,{placeholder:!0},_t.a.createElement(ln.a,{columns:2,stackable:!0,textAlign:"center"},_t.a.createElement(gn.a,{vertical:!0},"Result:"),_t.a.createElement(ln.a.Row,{verticalAlign:"middle"},_t.a.createElement(ln.a.Column,null,_t.a.createElement(ln.a,null,_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0},_t.a.createElement(Jt.a,{textAlign:"center",as:"h2"},_t.a.createElement(Jt.a.Content,null,r.name,_t.a.createElement(Jt.a.Subheader,null,"(",r.pipeline.name,")"))))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},r.started?_t.a.createElement(_t.a.Fragment,null,_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Progress:"),r.error?_t.a.createElement(sn,{icon:"warning sign",size:"huge",color:"red",header:"ERROR",subheader:"See status"}):_t.a.createElement("div",null,_t.a.createElement($n.a,{style:{textAlign:"center"},progress:(100*r.completed_tasks/r.task_count).toFixed(2)}))):_t.a.createElement("div",{style:{margin:"auto"},onClick:function(){var e=Object(i.a)({},r);e.queued=!0,a(e)}},_t.a.createElement(Jt.a,{textAlign:"center",as:"h4",style:{cursor:"pointer"}},_t.a.createElement(Rt.a,{size:"big",style:{margin:"auto"},name:"video play"}),"Start")))),_t.a.createElement(ln.a.Row,{columns:2},_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Status:"),r.queued?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Queued"):_t.a.createElement("div",null),r.started&!r.finished?_t.a.createElement(Gt.a,{color:"blue",size:"tiny"},"Running..."):_t.a.createElement("div",null),r.error?_t.a.createElement(Gt.a,{color:"red",size:"tiny"},"ERROR"):_t.a.createElement("div",null),r.finished?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Finished"):_t.a.createElement("div",null)),_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Notified Email:"),r.notification_email?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},r.notification_email):_t.a.createElement(Gt.a,{color:"grey",size:"tiny"},"N/A"))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},_t.a.createElement(Qn.a,{size:"tiny",style:{overflowWrap:"break-word"}},_t.a.createElement(Qn.a.Content,null,_t.a.createElement(Qn.a.Header,{as:"h6"},"State:"),r.status)))))),_t.a.createElement(ln.a.Column,null,_t.a.createElement(Vr,{job:r,handleDownloadJob:e.handleDownloadJob}))))))):_t.a.createElement(_t.a.Fragment,null)},Yr=function(e){var t=Object(jt.useState)(!1),n=Object(zt.a)(t,2),a=n[0],r=n[1],o=e.job;if(!o)return _t.a.createElement(mn.a.Row,null,"Job Data Missing");var l="",s="N/A";if(o.start_time){var c=new Date(o.start_time);l=c.toLocaleTimeString(),s=c.toLocaleDateString()}var d="",u="N/A";if(o.stop_time){var p=new Date(o.stop_time);d=p.toLocaleTimeString(),u=p.toLocaleDateString()}var h=[_t.a.createElement(Vt.a,{key:"job_row_button_0",icon:"trash",basic:!0,circular:!0,color:"red",onClick:function(){return r(!a)}})];e.job.finished&&e.job.file&&h.push(_t.a.createElement(Vt.a,{key:"job_row_button_".concat(h.length+1),icon:"save",basic:!0,circular:!0,color:"grey",onClick:function(){e.handleDownloadJob(e.job.id)}})),e.job.queued||e.job.started||e.job.error||e.job.finished||h.push(_t.a.createElement(Vt.a,{key:"job_row_button_".concat(h.length+1),icon:"play circle outline",basic:!0,circular:!0,color:"green",onClick:function(){var t=Object(i.a)({},e.job);t.queued=!0,e.handleUpdateJob(t)}}));var m="0";return e.job&&e.job.started&&(m=e.job.error?"FAILED":e.job.finished?"100%":"".concat((100*e.job.completed_tasks/e.job.task_count).toFixed(2),"%")),_t.a.createElement(mn.a.Row,{style:e.selected?{backgroundColor:"#e2ffdb",overflowWrap:"break-word"}:{overflowWrap:"break-word"}},_t.a.createElement(kn.a,{open:a,content:"You have chosen to delete a job (which will delete all of its result and logs). ARE YOU SURE? This cannot be undone.",confirmButton:"DELETE",onCancel:function(){return r(!a)},onConfirm:function(){return e.handleDeleteJob(e.job.id),void r(!1)}}),_t.a.createElement(mn.a.Cell,{onClick:function(){return e.handleSelectJob(e.job.id)},style:{cursor:"pointer",color:"blue",textDecoration:"underline"}},e.job.name),_t.a.createElement(mn.a.Cell,{textAlign:"center"},e.job.pipeline?e.job.pipeline.name:"N/A"),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,m))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,s," ",l))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,u," ",d))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement(Da.a,{size:"mini"},_t.a.createElement(Da.a.Value,null,e.job.num_docs))),_t.a.createElement(mn.a.Cell,{textAlign:"center"},e.job.finished?_t.a.createElement(Gt.a,{color:"green",key:"grey",size:"tiny"},"Finished"):_t.a.createElement("div",null),e.job.error?_t.a.createElement(Gt.a,{color:"red",key:"red",size:"tiny"},"ERROR"):_t.a.createElement("div",null),e.job.started&&!e.job.finished?_t.a.createElement(Gt.a,{color:"blue",key:"grey",size:"tiny"},"Running..."):_t.a.createElement("div",null),e.job.queued&!e.job.started?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Queued"):_t.a.createElement("div",null),!e.job.queued&!e.job.started?_t.a.createElement("div",null,_t.a.createElement(Gt.a,{color:"grey",size:"tiny"},"NOT Started")):_t.a.createElement("div",null)),_t.a.createElement(mn.a.Cell,{textAlign:"center"},_t.a.createElement("div",null,h)))},qr=function(e){return _t.a.createElement(Ft.a,{style:{minHeight:300}},_t.a.createElement(mn.a,{selectable:!0,celled:!0,structured:!0,size:"small"},_t.a.createElement(mn.a.Header,null,_t.a.createElement(mn.a.Row,{textAlign:"center"},_t.a.createElement(mn.a.HeaderCell,null,"Name"),_t.a.createElement(mn.a.HeaderCell,null,"Pipeline"),_t.a.createElement(mn.a.HeaderCell,null,"Progress"),_t.a.createElement(mn.a.HeaderCell,null,"Start Time"),_t.a.createElement(mn.a.HeaderCell,null,"End Time"),_t.a.createElement(mn.a.HeaderCell,null,"Num Docs"),_t.a.createElement(mn.a.HeaderCell,null,"State"),_t.a.createElement(mn.a.HeaderCell,null,"Actions"))),_t.a.createElement(mn.a.Body,null,e.children)))},Kr=function(e){var t=e.jobs,n=[];return n=t.items.length>0?t.items.map((function(n){return _t.a.createElement(Yr,{key:n.id,job:n,selected:t.selectedJobId===n.id,onDownload:e.handleDownloadJob,handleDeleteJob:e.handleDeleteJob,handleUpdateJob:e.handleUpdateJob,handleSelectJob:e.handleSelectJob})})):[_t.a.createElement(mn.a.Row,{key:"EmptyJobRow"},_t.a.createElement(mn.a.Cell,{textAlign:"center",colSpan:"3"},_t.a.createElement(Jt.a,{textAlign:"center",icon:!0},_t.a.createElement(Rt.a,{size:"small",name:"pdf file outline"}),"No Matching Jobs...")))],_t.a.createElement(Ft.a,{style:{width:"80vw",height:"100%",backgroundColor:"#f3f4f5"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",width:"100%"}},_t.a.createElement(Yt.a,{active:t.loading,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},"Loading...")),_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"}},_t.a.createElement("div",{style:{width:"25vw",height:"10%"}},_t.a.createElement(Gt.a,{color:"blue",corner:"left",icon:"home",onClick:e.setHomeView}),_t.a.createElement(Ht.a,{onSubmit:function(){return e.handleFetchJobs()}},_t.a.createElement(Ht.a.Input,{icon:_t.a.createElement(Rt.a,{name:"search",inverted:!0,circular:!0,link:!0}),placeholder:"Search Results...",onChange:function(t){return e.handleSetJobsSearchString(t.target.value)},value:t.searchText})))),_t.a.createElement(Ft.a,{style:{height:"80%",width:"100%",overflowY:"scroll"}},_t.a.createElement(qr,null,n)),_t.a.createElement(yn.a,{style:{height:"10%"},activePage:t.selectedPage,onPageChange:function(t,n){var a=n.activePage;return e.handleSelectJobPage(a)},totalPages:t.total_pages})))},Zr=function(e){return _t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"75vh",width:"100%"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(At.a,{circular:!0,src:"/gremlin_128.png",size:"tiny"})),_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h2",textAlign:"center"},"Welcome to Gremlin",_t.a.createElement(Jt.a.Subheader,null,'Click "Analyze" below to analyze a document or search for a completed job.')))),_t.a.createElement(Ft.a,{placeholder:!0,style:{width:"75vw"}},_t.a.createElement(ln.a,{columns:2,textAlign:"center"},_t.a.createElement(gn.a,{vertical:!0},"Or"),_t.a.createElement(ln.a.Row,{verticalAlign:"middle"},_t.a.createElement(ln.a.Column,null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"search"}),"View Results"),_t.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Ht.a,{onSubmit:function(){return e.handleLandingJobSearch()}},_t.a.createElement(Ht.a.Input,{icon:_t.a.createElement(Rt.a,{name:"search",inverted:!0,circular:!0,link:!0}),placeholder:"Search Jobs...",onChange:function(t){return e.handleSetJobsSearchString(t.target.value)},value:e.jobs.searchText}))),_t.a.createElement("div",{style:{marginLeft:"5px",marginRight:"5px"}},_t.a.createElement("b",null,"-OR-")),_t.a.createElement("div",null,_t.a.createElement(Vt.a,{primary:!0,onClick:e.setResultView},"Browse")))),_t.a.createElement(ln.a.Column,null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"file text outline"}),"Analyze Documents"),_t.a.createElement(Vt.a,{primary:!0,onClick:e.setWizardView},"Analyze"))))))},Qr=n(2075);function Xr(e){var t=e.job,n=e.pipeline,a=e.handleUpdateJob;return t?_t.a.createElement(ln.a,null,_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0},_t.a.createElement(Jt.a,{textAlign:"center",as:"h2"},_t.a.createElement(Jt.a.Content,null,t?t.name:"[JOB NAME]",_t.a.createElement(Jt.a.Subheader,null,"(",n?n.name:"[PIPELINE NAME]",")"))))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},t.started?_t.a.createElement("div",null,_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Progress:"),_t.a.createElement($n.a,{style:{textAlign:"center"},progress:(100*t.completed_tasks/t.task_count).toFixed(2)})):_t.a.createElement("div",{style:{margin:"auto"},onClick:function(){var e={id:t.id,queued:!0};a(e)}},_t.a.createElement(Jt.a,{textAlign:"center",as:"h4",style:{cursor:"pointer"}},_t.a.createElement(Rt.a,{size:"big",style:{margin:"auto"},name:"video play"}),"Start")))),_t.a.createElement(ln.a.Row,{columns:2},_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Status:"),t.queued?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Queued"):_t.a.createElement("div",null),t.started&!t.finished?_t.a.createElement(Gt.a,{color:"blue",size:"tiny"},"Running..."):_t.a.createElement("div",null),t.error?_t.a.createElement(Gt.a,{color:"red",size:"tiny"},"ERROR"):_t.a.createElement("div",null),t.finished?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},"Finished"):_t.a.createElement("div",null)),_t.a.createElement(ln.a.Column,{textAlign:"center"},_t.a.createElement(Jt.a,{textAlign:"center",as:"h5"},"Notified Email:"),t.notification_email?_t.a.createElement(Gt.a,{color:"green",size:"tiny"},t.notification_email):_t.a.createElement(Gt.a,{color:"grey",size:"tiny"},"None Provided"))),_t.a.createElement(ln.a.Row,{stretched:!0},_t.a.createElement(ln.a.Column,{stretched:!0,textAlign:"center"},_t.a.createElement(Qn.a,{size:"tiny",style:{overflowWrap:"break-word"}},_t.a.createElement(Qn.a.Content,null,_t.a.createElement(Qn.a.Header,{as:"h6"},"State:"),t.status))))):_t.a.createElement(_t.a.Fragment,null)}var $r=function(e){var t=e.results,n=e.handleDownloadResult,a=t?c.a.find(t.items,{type:"JOB"}):null;return a?_t.a.createElement("div",null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"file text"}),"Download Results"),_t.a.createElement(Vt.a,{onClick:function(){return n(a.id)},primary:!0},"Download")):_t.a.createElement("div",null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"x"}),"No Results Yet..."),_t.a.createElement(Vt.a,{primary:!0,disabled:!0},"Download"))},eo=function(e){var t=e.results,n=e.selectedJob,a=e.pipelines,r=e.handleUpdateJob,o=e.handleDownloadResult;return _t.a.createElement(Ft.a,{placeholder:!0,style:{width:"100%",height:"100%",backgroundColor:"#f3f4f5"}},_t.a.createElement(ln.a,{columns:2,stackable:!0,textAlign:"center"},_t.a.createElement(gn.a,{vertical:!0},"Result:"),_t.a.createElement(ln.a.Row,{verticalAlign:"middle"},_t.a.createElement(ln.a.Column,null,_t.a.createElement(Xr,{job:n,pipeline:a.selectedPipeline,handleUpdateJob:r})),_t.a.createElement(ln.a.Column,null,_t.a.createElement($r,{results:t,handleDownloadResult:o})))))},to=function(e){var t=e.name,n=e.notification_email,a=e.handleJobFormChange;return _t.a.createElement(Ft.a,{style:{width:"100%",height:"100%",overflowY:"scroll",backgroundColor:"#f3f4f5"}},_t.a.createElement(Tn.a,{schema:_n,uiSchema:On,onChange:function(e){return a(e.formData)},formData:{name:t,notification_email:n}},_t.a.createElement(_t.a.Fragment,null)))},no=function(e){var t=_t.a.createElement(_t.a.Fragment,null);return t=e.extensions.length>0?e.extensions.map((function(e){return _t.a.createElement(Gt.a,{color:"grey",key:"".concat(e),size:"tiny"},e)})):[_t.a.createElement(Gt.a,{key:"Nothing",color:"yellow",size:"tiny"},"No File Type Restrictions")],_t.a.createElement("div",{style:{padding:"5px"}},t)},ao=function(e){var t=e.pipeline,n=(e.selected,e.maxLength,[]);try{n=JSON.parse(e.pipeline.supported_files).supported_files}catch(r){}var a=""!==t.description?t.description:"There appears to be no description for this analysis. "+"Contact the author at ".concat(t.owner_email," for more information.");return console.log("Description length: ",a.length),_t.a.createElement(sa.a,{fluid:!0,style:e.selectedPipelineId===t.id?{backgroundColor:"#2185d0"}:{},onClick:function(){return e.handleSelectPipeline(t.id)}},_t.a.createElement(sa.a.Content,null,_t.a.createElement(sa.a.Header,null,t.name),_t.a.createElement(sa.a.Meta,null,_t.a.createElement("span",null,"Author: ",t.owner)),_t.a.createElement(sa.a.Description,null,a),_t.a.createElement(sa.a.Meta,null,_t.a.createElement(no,{extensions:n}))))},ro=n(2067),oo=function(){return _t.a.createElement(ro.a,{key:"No_Result"},_t.a.createElement(ro.a.Image,{src:"/images/wireframe/image.png"}),_t.a.createElement(ro.a.Content,null,_t.a.createElement(ro.a.Header,{as:"a"},"No Matching Pipelines"),_t.a.createElement(ro.a.Meta,null,_t.a.createElement(ea.a.Line,null)),_t.a.createElement(ro.a.Description,null,_t.a.createElement(ea.a,{fluid:!0},_t.a.createElement(ea.a.Header,{image:!0},_t.a.createElement(ea.a.Line,null),_t.a.createElement(ea.a.Line,null)),_t.a.createElement(ea.a.Paragraph,null,_t.a.createElement(ea.a.Line,null),_t.a.createElement(ea.a.Line,null),_t.a.createElement(ea.a.Line,null)))),_t.a.createElement(ro.a.Extra,null,_t.a.createElement(no,{extensions:[]}))))},io=function(e){var t=e.pipelines,n=[];if(t.items.length>0)for(var a=0;a<t.items.length;a++)n.push(_t.a.createElement(ao,{key:a,handleSelectPipeline:e.handleSelectPipeline,pipeline:t.items[a],maxLength:50,selectedPipelineId:e.pipelines.selectedPipelineId}));else n.push(_t.a.createElement(oo,null));return _t.a.createElement(Ft.a,{style:{width:"100%",height:"100%",backgroundColor:"#f3f4f5"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",width:"100%"}},_t.a.createElement(Yt.a,{active:t.loading,inverted:!0},_t.a.createElement(qt.a,{inverted:!0},"Loading...")),_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"}},_t.a.createElement("div",{style:{width:"25vw",height:"10%"}},_t.a.createElement(Ht.a,{onSubmit:function(){return e.refreshPipelines()}},_t.a.createElement(Ht.a.Input,{icon:_t.a.createElement(Rt.a,{name:"search",inverted:!0,circular:!0,link:!0}),placeholder:"Search...",onChange:function(t){return e.handleSetPipelineSearchString(t.target.value)},value:t.pipelineSearchText})))),_t.a.createElement(Ft.a,{style:{height:"80%",width:"100%",overflowY:"scroll"}},_t.a.createElement(sa.a.Group,{itemsPerRow:2,style:{width:"100%"}},n)),_t.a.createElement(yn.a,{style:{height:"10%"},activePage:t.selectedPage,onPageChange:function(e,t){var n=t.activePage;return console.log("Page change: ",n)},totalPages:t.pages})))},lo=function(e){var t=e.documents,n=e.onDelete,a=e.onUpload,r=e.onDownload;return _t.a.createElement(Ft.a,{style:{width:"100%",height:"100%",backgroundColor:"#f3f4f5"}},_t.a.createElement(La,{documents:t.items,page:t.selectedPage,pages:t.pages,onDelete:n,onDownload:r,onUpload:a,handleSelectDocumentPage:e.handleSelectDocumentPage}))};function so(e){var t=e.step,n=_t.a.createElement(_t.a.Fragment,null),a=_t.a.createElement(_t.a.Fragment,null);return 0===t&&(n=_t.a.createElement(Vt.a,{primary:!0,icon:!0,labelPosition:"left",onClick:e.reverseStep,style:{width:"10vw"}},"Home",_t.a.createElement(Rt.a,{name:"home"})),a=_t.a.createElement(Vt.a,{icon:!0,positive:!0,labelPosition:"right",onClick:e.advanceStep,style:{width:"10vw"}},"Next",_t.a.createElement(Rt.a,{name:"right arrow"}))),1===t&&(n=_t.a.createElement(Vt.a,{icon:!0,labelPosition:"left",onClick:e.reverseStep,style:{width:"10vw"}},"Back",_t.a.createElement(Rt.a,{name:"left arrow"})),a=_t.a.createElement(Vt.a,{icon:!0,positive:!0,labelPosition:"right",onClick:e.advanceStep,style:{width:"10vw"}},"Next",_t.a.createElement(Rt.a,{name:"right arrow"}))),2===t&&(n=_t.a.createElement(Vt.a,{disabled:!0,icon:!0,labelPosition:"left",onClick:e.reverseStep,style:{width:"10vw"}},"Back",_t.a.createElement(Rt.a,{name:"left arrow"})),a=_t.a.createElement(Vt.a,{icon:!0,positive:!0,labelPosition:"right",onClick:e.advanceStep,style:{width:"10vw"}},"Start",_t.a.createElement(Rt.a,{name:"play circle outline"}))),3===t&&(n=_t.a.createElement(Vt.a,{disabled:!0,icon:!0,labelPosition:"left",onClick:e.reverseStep,style:{width:"10vw"}},"Back",_t.a.createElement(Rt.a,{name:"left arrow"})),a=_t.a.createElement(Vt.a,{primary:!0,icon:!0,labelPosition:"right",onClick:e.advanceStep,style:{width:"10vw"}},"Home",_t.a.createElement(Rt.a,{name:"home"}))),_t.a.createElement(Vt.a.Group,null,n,_t.a.createElement(Vt.a.Or,null),a)}function co(e){return _t.a.createElement(Qr.a.Group,{style:{width:"100%"}},_t.a.createElement(Qr.a,{active:0===e.step},_t.a.createElement(Rt.a,{name:"shuffle"}),_t.a.createElement(Qr.a.Content,null,_t.a.createElement(Qr.a.Title,null,"Pipeline"),_t.a.createElement(Qr.a.Description,null,"Choose Analysis Type"))),_t.a.createElement(Qr.a,{active:1===e.step},_t.a.createElement(Rt.a,{name:"briefcase"}),_t.a.createElement(Qr.a.Content,null,_t.a.createElement(Qr.a.Title,null,"Job Settings"),_t.a.createElement(Qr.a.Description,null,"Job Name, Notifications, etc."))),_t.a.createElement(Qr.a,{active:2===e.step},_t.a.createElement(Rt.a,{name:"file text outline"}),_t.a.createElement(Qr.a.Content,null,_t.a.createElement(Qr.a.Title,null,"Documents"),_t.a.createElement(Qr.a.Description,null,"Upload Your Documents"))),_t.a.createElement(Qr.a,{active:3===e.step},_t.a.createElement(Rt.a,{name:"play"}),_t.a.createElement(Qr.a.Content,null,_t.a.createElement(Qr.a.Title,null,"Start"),_t.a.createElement(Qr.a.Description,null,"Launch Your Job"))))}var uo=function(e){var t=e.pipelines,n=e.documents,a=e.jobs,r=e.results,o=c.a.find(a.items,{id:a.selectedJobId}),i={0:_t.a.createElement(io,{pipelines:t,refreshPipelines:e.refreshPipelines,handleSelectPipeline:e.handleSelectPipeline,handleSetPipelineSearchString:e.handleSetPipelineSearchString,handlePipelinePageChange:e.handlePipelinePageChange}),1:_t.a.createElement(to,{handleJobFormChange:e.handleJobFormChange,name:e.name,notification_email:e.notification_email}),2:_t.a.createElement(lo,{documents:n,onDelete:e.handleDeleteDocument,onDownload:e.handleDownloadDocument,onUpload:e.handleUploadDocument,handleSelectDocumentPage:e.handleSelectDocumentPage,pages:document.pages}),3:_t.a.createElement(eo,{handleUpdateJob:e.handleUpdateJob,handleDownloadResult:e.handleDownloadResult,selectedJob:o,pipelines:t,results:r})};return _t.a.createElement(Bn,null,_t.a.createElement(Gn,null,_t.a.createElement(Ft.a,{style:{width:"75vw",height:"100%"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",width:"100%"}},_t.a.createElement("div",{style:{width:"100%",height:"10%",marginBottom:"10px"}},_t.a.createElement(co,{step:e.step})),_t.a.createElement("div",{style:{height:"80%",width:"100%",flexGrow:4,marginBottom:"10px"}},i[e.step]?i[e.step]:_t.a.createElement(_t.a.Fragment,null)),_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100%",height:"10%"}},_t.a.createElement(so,{step:e.step,advanceStep:e.advanceStep,reverseStep:e.reverseStep}))))))},po=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).tick=function(){console.log("Tick"),2===a.state.step&&a.handleRefreshDocuments(),3===a.state.step&&-1!==a.props.jobs.selectedJobId&&(a.handleRefreshSelectedJob(),a.handleFetchSummaryResults())},a.toggleResultModal=function(){a.setState({showResultModal:!a.state.showResultModal})},a.handleRefreshSelectedJob=function(){a.props.dispatch(mt())},a.handleJobFormChange=function(e){a.setState(Object(i.a)({},e))},a.setHomeView=function(){Promise.all([a.props.dispatch(bt("")),a.props.dispatch(Re()),a.props.dispatch(Pe()),a.props.dispatch(ht())]).then((function(){a.props.dispatch(Et()).then((function(){a.setState({view:"LANDING"})}))}))},a.setWizardView=function(){a.setState({view:"WIZARD"})},a.setResultView=function(){a.props.dispatch(Et()).then((function(){a.setState({view:"RESULTS"})}))},a.setStep=function(e){a.setState({step:e})},a.advanceStep=function(){0===a.state.step?a.setStep(a.state.step+1):1===a.state.step?a.handleCreateJob({name:a.state.name,notification_email:a.state.notification_email,pipeline:a.props.pipelines.selectedPipelineId}):2===a.state.step?(a.handleStartSelectedJob(),a.setStep(a.state.step+1)):3===a.state.step&&a.handleStartWizardOver()},a.reverseStep=function(){0===a.state.step?a.setHomeView():a.setStep(a.state.step-1)},a.handleCreateJob=function(e){a.props.dispatch(ft(e)).then((function(e){a.props.dispatch(pt(e.id)).then((function(){a.setStep(2)}))}))},a.handleDownloadResult=function(e){a.props.dispatch(Le(e))},a.handleFetchSummaryResults=function(){a.props.dispatch(Ae(a.props.jobs.selectedJobId))},a.handleRefreshDocuments=function(){a.props.dispatch(ke())},a.handleUploadDocument=function(e){a.props.dispatch(_e(e)).then((function(){a.props.dispatch(ke())}))},a.handleDeleteDocument=function(e){a.props.dispatch(Oe(e))},a.handleDownloadDocument=function(e){a.props.dispatch(xe(e))},a.handleSelectDocumentPage=function(e){a.props.dispatch(De(e)).then((function(){a.props.dispatch(ke())}))},a.handleSetPipelineSearchString=function(e){a.props.dispatch(et(e))},a.handleSelectPipeline=function(e){a.props.dispatch(nt(e))},a.handleSelectJob=function(e){a.props.dispatch(pt(e)).then((function(){console.log("Toggle modal!"),a.toggleResultModal()}))},a.handlePipelinePageChange=function(e){var t;a.props.dispatch((t=e,function(){var e=Object(p.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n({type:"CHANGE_PIPELINE_PAGE",selectedPage:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(){a.props.dispatch(it())}))},a.refreshPipelines=function(){a.props.dispatch(it())},a.handleUpdateJob=function(e){a.props.dispatch(yt(e))},a.handleDeleteJob=function(e){a.props.dispatch(St(e)).then((function(){a.props.dispatch(Re()),a.props.dispatch(Pe()),a.props.dispatch(ht())})).then((function(){a.props.dispatch(Et())}))},a.handleFetchJobs=function(){a.props.dispatch(Et())},a.handleLandingJobSearch=function(){a.props.dispatch(Et()).then((function(){a.setResultView()}))},a.handleSetJobsSearchString=function(e){a.props.dispatch(bt(e))},a.handleSelectJobPage=function(e){a.props.dispatch(vt(e)).then((function(){a.props.dispatch(Et())}))},a.handleStartSelectedJob=function(){a.handleUpdateJob({id:a.props.jobs.selectedJobId,queued:!0})},a.handleDownloadJob=function(e){a.props.dispatch(gt(e))},a.handleStartWizardOver=function(){Promise.all([a.props.dispatch(Pe()),a.props.dispatch(Re()),a.props.dispatch(ht()),a.props.dispatch(lt())]).then((function(){a.setHomeView(),a.setStep(0)}))},a.handleLogout=function(){Promise.all([a.props.dispatch(Pe()),a.props.dispatch(Re()),a.props.dispatch(ht()),a.props.dispatch({type:"CLEAR_PIPELINES"}),a.props.dispatch(lt())]).then((function(){a.props.dispatch(st())}))},a.state={step:0,view:"LANDING",name:"",notification_email:"",timer:null,showResultModal:!1},a}return Object(xt.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(it());var e=setInterval(this.tick,2e3);this.setState({timer:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"render",value:function(){var e=this.props,t=e.pipelines,n=e.documents,a=e.jobs,r=e.results,o=e.auth,i=null;try{i=c.a.find(a.items,{id:a.selectedJobId})}catch(s){}var l=_t.a.createElement(_t.a.Fragment,null);return"WIZARD"===this.state.view&&(l=_t.a.createElement(uo,{pipelines:t,jobs:a,documents:n,results:r,refreshPipelines:this.refreshPipelines,handleUpdateJob:this.handleUpdateJob,handleSetPipelineSearchString:this.handleSetPipelineSearchString,handleSelectPipeline:this.handleSelectPipeline,handlePipelinePageChange:this.handlePipelinePageChange,handleSelectDocumentPage:this.handleSelectDocumentPage,handleDeleteDocument:this.handleDeleteDocument,handleUploadDocument:this.handleUploadDocument,handleDownloadDocument:this.handleDownloadDocument,handleDownloadResult:this.handleDownloadResult,step:this.state.step,advanceStep:this.advanceStep,reverseStep:this.reverseStep,handleJobFormChange:this.handleJobFormChange,name:this.state.name,notification_email:this.state.notification_email})),"LANDING"===this.state.view&&(l=_t.a.createElement(Zr,{jobs:a,setWizardView:this.setWizardView,setResultView:this.setResultView,handleSetJobsSearchString:this.handleSetJobsSearchString,handleLandingJobSearch:this.handleLandingJobSearch})),"RESULTS"===this.state.view&&(l=_t.a.createElement(Kr,{jobs:a,handleFetchJobs:this.handleFetchJobs,handleSetJobsSearchString:this.handleSetJobsSearchString,handleSelectJobPage:this.handleSelectJobPage,handleDownloadJob:this.handleDownloadJob,handleDeleteJob:this.handleDeleteJob,handleUpdateJob:this.handleUpdateJob,handleSelectJob:this.handleSelectJob,setHomeView:this.setHomeView})),_t.a.createElement("div",{style:{height:"100%",width:"100%"}},_t.a.createElement(Wr,{jobs:a,selectedJob:i,visible:this.state.showResultModal,toggleModal:this.toggleResultModal,handleDownloadJob:this.handleDownloadJob,handleUpdateJob:this.handleUpdateJob}),_t.a.createElement(ln.a,null,_t.a.createElement(ln.a.Row,{style:{height:"10vh"}},_t.a.createElement(ln.a.Column,{verticalAlign:"middle",textAlign:"right"},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"stretch",height:"100%",width:"100%"}},_t.a.createElement("div",{style:{marginRight:"1vw"}},_t.a.createElement(Jt.a,{as:"h3"},_t.a.createElement(Rt.a,{name:"user circle outline"}),_t.a.createElement(Jt.a.Content,{style:{padding:"0px",paddingLeft:"5px"}},_t.a.createElement(Ut.a,{item:!0,simple:!0,icon:_t.a.createElement(Rt.a,{style:{marginLeft:"5px"},name:"dropdown"}),text:"User: ".concat(o.username),style:{margin:"0px",padding:"0px"},header:"Logout"},_t.a.createElement(Ut.a.Menu,null,_t.a.createElement(Ut.a.Item,{text:"Logout",onClick:this.handleLogout,icon:_t.a.createElement(Rt.a,{name:"log out"})}))))))))),_t.a.createElement(ln.a.Row,{centered:!0,stretched:!0,style:{width:"100%",height:"80vh"}},l),_t.a.createElement(ln.a.Row,{style:{height:"10vh"}},_t.a.createElement(ln.a.Column,{verticalAlign:"middle",textAlign:"right"}))),_t.a.createElement("div",{style:{zIndex:9,position:"absolute",bottom:"2vh",right:"2vw"}},_t.a.createElement(At.a,{style:{height:"8vh"},src:"/gordium_128_name_left.png"})))}}]),n}(jt.Component);var ho=Object(a.b)((function(e){var t=e.jobs,n=e.results,a=e.documents,r=e.pipelines;return{jobs:t,results:n,scripts:e.scripts,pipelinesteps:e.pipelinesteps,documents:a,pipelines:r,auth:e.auth}}))(po),mo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"render",value:function(){var e=this.props.componentOptions,t=this.props.auth.user.role,n=this.props.auth.loggedIn;console.log("Role Protected Route: ",this.props);var a=e[t];return n?_t.a.createElement(a,this.props):_t.a.createElement(Pt.a,{to:{pathname:"/login"}})}}]),n}(_t.a.Component);var go=Object(a.b)((function(e){return{application:e.application,auth:e.auth}}))(mo),fo=n(430),Eo={username:"",email:"",type:null,error:!1,success:!1},bo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).resetState=function(){a.setState(Eo),a.props.toggle()},a.handleChange=function(e,t){var n=t.name,r=t.value;return a.setState(Object(fo.a)({},n,r))},a.handleSubmit=function(){var e=a.state,t=e.username,n=e.email,r=e.type,o=a.props,i=o.handleRecoverUsername,l=o.handleResetPassword;"PASSWORD"===r?(console.log("Reset password for username:",t),l(t)):"USERNAME"===r?(console.log("Send username to:",n),i(n)):(a.setState({error:!0}),a.props.toggle()),setTimeout(a.resetState,2e3)},a.selectPassword=function(){a.setState({type:"PASSWORD"})},a.selectUser=function(){a.setState({type:"USERNAME"})},a.toggleModal=function(){a.props.toggle(),a.setState(Eo)},a.state=Eo,a}return Object(xt.a)(n,[{key:"render",value:function(){var e,t,n,a,r,o=this;return _t.a.createElement(Bt.a,{open:this.props.visible,size:"mini"},_t.a.createElement(Gt.a,{corner:"right",color:"grey",icon:"cancel",onClick:function(){return o.toggleModal()}}),_t.a.createElement(Bt.a.Content,null,(e=this.state,this.setState,t=this.selectUser,n=this.selectPassword,a=this.handleSubmit,r=this.handleChange,"PASSWORD"===e.type?_t.a.createElement(Ht.a,{onSubmit:a},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h2",icon:!0},_t.a.createElement(Rt.a,{name:"lock open"}),"Reset Password",_t.a.createElement(Jt.a.Subheader,null,"Enter your username. If it's valid, we'll email a temporary password to you.")))),_t.a.createElement(Ht.a.Input,{label:"Username:",placeholder:"Username:",name:"username",value:e.username,onChange:r}),_t.a.createElement(Ht.a.Button,{content:"Submit"})):"USERNAME"===e.type?_t.a.createElement(Ht.a,{onSubmit:a},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{as:"h2",icon:!0},_t.a.createElement(Rt.a,{name:"user circle outline"}),"Recover Username",_t.a.createElement(Jt.a.Subheader,null,"Enter your eMail. If it's valid, we'll send you an e-mail with your username.")))),_t.a.createElement(Ht.a.Input,{label:"E-Mail",placeholder:"E-Mail",name:"email",value:e.password,onChange:r}),_t.a.createElement(Ht.a.Button,{content:"Submit"})):_t.a.createElement(Ft.a,{placeholder:!0},_t.a.createElement(ln.a,{columns:2,stackable:!0,textAlign:"center"},_t.a.createElement(gn.a,{vertical:!0},"Or"),_t.a.createElement(ln.a.Row,{verticalAlign:"middle"},_t.a.createElement(ln.a.Column,null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"user circle outline"})),_t.a.createElement(Vt.a,{primary:!0,onClick:t},"Forgot Username")),_t.a.createElement(ln.a.Column,null,_t.a.createElement(Jt.a,{icon:!0},_t.a.createElement(Rt.a,{name:"lock open"})),_t.a.createElement(Vt.a,{primary:!0,onClick:n},"Forgot Password"))))))))}}]),n}(jt.Component),vo=n(1936),yo={width:"100vw",height:"102vh",backgroundImage:"url(".concat(vo,")"),backgroundSize:"cover"},So=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a;return Object(Tt.a)(this,n),(a=t.call(this,e)).handleLoginClick=function(e,t){a.props.dispatch(function(e,t){return function(){var n=Object(p.a)(u.a.mark((function n(a){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ce(e,t);case 3:return(r=n.sent).data.hasOwnProperty("access")&r.data.hasOwnProperty("refresh")?(a({type:"LOGIN_SUCCESS",username:e}),m.a.set("token",r.data.access),m.a.set("refreshToken",r.data.refresh)):(a({type:"LOGIN_FAIURE",error:r}),m.a.remove("token"),m.a.remove("refreshToken")),n.abrupt("return",Promise.resolve(!0));case 8:n.prev=8,n.t0=n.catch(0),m.a.remove("token"),m.a.remove("refreshToken"),a(E("Error trying to login.")),a({type:"LOGIN_FAIURE",error:n.t0});case 14:return n.abrupt("return",Promise.resolve(!1));case 15:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(e,t)).then((function(e){e&&a.props.dispatch(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=m.a.get("token"),e.next=4,je(n);case 4:200===(a=e.sent).status?t({type:"RECEIVE_USER",user:a.data}):(t({type:"LOGIN_FAIURE",error:a}),m.a.remove("token"),m.a.remove("refreshToken")),e.next=15;break;case 8:return e.prev=8,e.t0=e.catch(0),m.a.remove("token"),m.a.remove("refreshToken"),t(E("Error trying to login.")),t({type:"LOGIN_FAIURE",error:e.t0}),e.abrupt("return",Promise.resolve(!1));case 15:return e.abrupt("return",Promise.resolve(!0));case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()).then((function(e){e?a.props.history.push("/home"):a.handleLogout()}))}))},a.handleRecoverUsername=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e);case 3:if(200!==t.sent.status){t.next=9;break}return n(f("Please check your e-mail, ".concat(e))),t.abrupt("return",Promise.resolve(!0));case 9:n(E("Unable to recover username for given email: ".concat(e)));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n(E("Error trying to recover username with values: ".concat(t.t0.response.data.message)));case 15:return t.abrupt("return",Promise.resolve(!1));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.handleResetPassword=function(e){a.props.dispatch(function(e){return function(){var t=Object(p.a)(u.a.mark((function t(n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I(e);case 3:if(200!==t.sent.status){t.next=9;break}return n(f('Please check the e-mail associated with account "'.concat(e,'"'))),t.abrupt("return",Promise.resolve(!0));case 9:n(E("Unable to reset password for: ".concat(e)));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n(E("Error trying to reset password: ".concat(t.t0.response.data.message)));case 15:return t.abrupt("return",Promise.resolve(!1));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))},a.clear=function(){a.setState({userNameValue:"Username...",passwordValue:"Password..."})},a.handleKeyPress=function(e){13===e.charCode&&(e.preventDefault(),a.tryLogin())},a.toggleRecoveryModal=function(){a.setState({showRecoveryModal:!a.state.showRecoveryModal})},a.tryLogin=function(){a.handleLoginClick(a.state.userNameValue,a.state.passwordValue),a.clear()},a.handleLogout=function(){Promise.all([a.props.dispatch(Pe()),a.props.dispatch(Re()),a.props.dispatch({type:"CLEAR_PIPELINES"}),a.props.dispatch(He()),a.props.dispatch(Ge()),a.props.dispatch(ht()),a.props.dispatch(lt())]).then((function(){a.props.dispatch(st())}))},a.state={userNameValue:"Username...",passwordValue:"Password...",showRecoveryModal:!1},a}return Object(xt.a)(n,[{key:"render",value:function(){var e=this;return _t.a.createElement("div",{style:yo},_t.a.createElement(bo,{toggle:this.toggleRecoveryModal,visible:this.state.showRecoveryModal,handleRecoverUsername:this.handleRecoverUsername,handleResetPassword:this.handleResetPassword}),_t.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",alignContent:"center",height:"100%"}},_t.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",marginBottom:"1vh"}},_t.a.createElement("div",{style:{flex:"column",textAlign:"right",justifyContent:"center",marginLeft:"10%",height:"10%",bottomPadding:"1vh"}},_t.a.createElement(At.a,{style:{maxHeight:"100px",height:"10vh"},src:"/gremlin_128.png"})),_t.a.createElement("div",{style:{flex:"column",textAlign:"left",alignSelf:"center",alignItems:"center",alignContent:"center",justifyContent:"center",height:"auto",marginRight:"10%"}},_t.a.createElement("div",null,_t.a.createElement(Jt.a,{style:{fontSize:"3em"}},"GREMLIN",_t.a.createElement(Jt.a.Subheader,{style:{fontSize:".5em"}},"Low-Code Microservices"))))),_t.a.createElement("div",null,_t.a.createElement(Ht.a,{size:"large"},_t.a.createElement(Ft.a,{style:{width:"25vw",maxWidth:"300px"}},_t.a.createElement(Jt.a,{as:"h4",textAlign:"left"},"Please Login:"),_t.a.createElement(Ht.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username",value:this.state.userNameValue,onChange:function(t){e.setState({userNameValue:"".concat(t.target.value)})}}),_t.a.createElement(Ht.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:this.state.passwordValue,onChange:function(t){e.setState({passwordValue:"".concat(t.target.value)})}}),_t.a.createElement(Vt.a,{color:"teal",fluid:!0,size:"large",onClick:function(){return e.tryLogin()}},"Login"))),_t.a.createElement(Qn.a,null,_t.a.createElement("span",{style:{cursor:"pointer",color:"blue",textDecoration:"underline"},onClick:function(){return e.toggleRecoveryModal()}},"Forgot")," your password or username?"))),_t.a.createElement("div",{style:{zIndex:100,position:"absolute",bottom:"1vh",right:"1vw"}},_t.a.createElement(At.a,{style:{height:"6vh"},src:"/gordium_128_name_left.png"})))}}]),n}(jt.Component);var wo=Object(a.b)((function(e){return{auth:e.auth}}))(So),Co=n(138),jo=n.n(Co),_o=n(107),Oo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;return Object(Tt.a)(this,n),(e=t.call(this,{name:"select-link"})).registerAction(new ur.Action({type:ur.InputType.MOUSE_DOWN,fire:function(t){var n=e.engine.getMouseElement(t.event);n.isLocked()&&e.eject(),e.engine.getModel().clearSelection(),n.setSelected(!0)}})),e}return Object(xt.a)(n,[{key:"fireMouseMoved",value:function(e){}}]),n}(ur.AbstractDisplacementState),Do=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;return Object(Tt.a)(this,n),(e=t.call(this,{name:"diagram-states"})).childStates=[new ur.SelectingState],e.dragCanvas=new ur.DragCanvasState,e.dragNewLink=new _o.DragNewLinkState,e.dragItems=new ur.MoveItemsState,e.dragNewLink.config.allowLooseLinks=!1,e.selectLink=new Oo,e.registerAction(new ur.Action({type:ur.InputType.MOUSE_DOWN,fire:function(t){var n=e.engine.getActionEventBus().getModelForEvent(t);n?n instanceof _o.PortModel?e.transitionWithEvent(e.dragNewLink,t):n instanceof _o.LinkModel?e.transitionWithEvent(e.selectLink,t):e.transitionWithEvent(e.dragItems,t):e.transitionWithEvent(e.dragCanvas,t)}})),e}return n}(ur.State),Po=n(610),To=n(216),xo=n(133),ko=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(e){var a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(Tt.a)(this,n),(a=t.call(this,Object(i.a)({type:"link"},r))).id=e||-1,a}return n}(xo.DefaultLinkModel),Io=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.apply(this,arguments)}return Object(xt.a)(n,[{key:"createLinkModel",value:function(){return new ko}}]),n}(Co.DefaultPortModel),No=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unnamed",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(Tt.a)(this,n),(e=t.call(this,Object(i.a)(Object(i.a)({},o),{},{type:"js-custom-node"}))).id=a,e.name=r,e.addPort(new Io({in:!0,name:"in"})),e.addPort(new Io({in:!1,name:"out"})),e}return Object(xt.a)(n,[{key:"serialize",value:function(){return Object(i.a)(Object(i.a)({},Object(Po.a)(Object(To.a)(n.prototype),"serialize",this).call(this)),{},{color:this.color})}},{key:"deserialize",value:function(e,t){Object(Po.a)(Object(To.a)(n.prototype),"deserialize",this).call(this,e,t),this.color=e.color}}]),n}(Co.NodeModel),Lo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e;Object(Tt.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleRunTestJobToNode=function(t){e.props.dispatch(Ie(t))},e}return Object(xt.a)(n,[{key:"render",value:function(){var e=this,t={display:"flex",justifyContent:"center",minWidth:"150px",width:"7.5vw",margin:"0 auto"},n=this.props,a=n.results,r=n.scripts,o=n.pipelinesteps,i=n.node,l=n.application,s=n.test_job,d=l.buildMode,u=c.a.find(o.items,{id:i.id}),p=c.a.find(a.items,{pipeline_node:i.id,type:"STEP"}),h=u.script?c.a.find(r.items,{id:u.script}):null,m=jt.createElement(jt.Fragment,null);return p&&p.started&&(p.finished||p.error||(m=jt.createElement(Yt.a,{active:!0,inverted:!0},jt.createElement(qt.a,{size:"medium"},"Running...")))),o.selectedPipelineStepId===u.id&&(t.backgroundColor="#2185d0"),"THROUGH_SCRIPT"===u.type?jt.createElement("div",null,d&&s.test_job&&!s.test_job.finished?jt.createElement("div",{style:{textAlign:"right",zIndex:200,position:"absolute",top:"-10px",right:"-10px"}},jt.createElement(Vt.a,{circular:!0,size:"small",color:"green",icon:"play",onClick:function(){return e.handleRunTestJobToNode(u.id)}})):jt.createElement(jt.Fragment,null),jt.createElement("div",{style:{position:"absolute",zIndex:100,top:"-15px",width:"100%"}},jt.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},jt.createElement("div",null,jt.createElement(Co.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},jt.createElement(Rt.a,{circular:!0,inverted:!0,color:"blue",name:"arrow down"}))))),jt.createElement(sa.a,{style:t},jt.createElement(sa.a.Content,null,m,h?jt.createElement(At.a,{floated:"right",size:"mini",src:"RUN_ON_JOB"===h.type?"serial_job.png":"parallel_job.png"}):jt.createElement(Rt.a,{name:"cancel"}),jt.createElement(sa.a.Header,null,u.name," (",jt.createElement("b",null,"ID ",u.id),")"),jt.createElement(sa.a.Meta,null,"Script: ",h?h.human_name:"N/A"),jt.createElement(sa.a.Description,null,jt.createElement(Pa,{step:p})))),jt.createElement("div",{style:{position:"absolute",zIndex:100,bottom:"-15px",width:"100%"}},jt.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},jt.createElement("div",null,jt.createElement(Co.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},jt.createElement(Rt.a,{circular:!0,inverted:!0,color:"green",name:"arrow down"})))))):jt.createElement("div",null,jt.createElement("div",{style:{position:"absolute",zIndex:100,top:"-15px",width:"100%"}},jt.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},jt.createElement("div",null,jt.createElement(Co.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},jt.createElement(Rt.a,{circular:!0,inverted:!0,color:"blue",name:"arrow down"}))))),jt.createElement(sa.a,{style:t},jt.createElement(sa.a.Content,null,m,jt.createElement(At.a,{floated:"right",size:"mini",src:"start_job.png"}),jt.createElement(sa.a.Header,null,"START SCRIPT: Extracter"),jt.createElement(sa.a.Meta,null,"Script: ",h?h.human_name:"N/A"),jt.createElement(sa.a.Description,null,jt.createElement(Pa,{step:p})))),jt.createElement("div",{style:{position:"absolute",zIndex:100,bottom:"-15px",width:"100%"}},jt.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},jt.createElement("div",null,jt.createElement(Co.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},jt.createElement(Rt.a,{circular:!0,inverted:!0,color:"green",name:"arrow down"}))))))}}]),n}(jt.Component);var Ro,Ao=Object(a.b)((function(e){return{results:e.results,application:e.application,scripts:e.scripts,pipelinesteps:e.pipelinesteps,test_job:e.test_job}}))(Lo),Jo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.call(this,"js-custom-node")}return Object(xt.a)(n,[{key:"generateModel",value:function(e){return new No}},{key:"generateReactWidget",value:function(e){return jt.createElement(Ao,{engine:this.engine,node:e.model})}}]),n}(ur.AbstractReactFactory),Uo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){return Object(Tt.a)(this,n),t.call(this,"link")}return Object(xt.a)(n,[{key:"generateModel",value:function(){return new ko}}]),n}(xo.DefaultLinkFactory),Mo=function(e){Object(kt.a)(n,e);var t=Object(It.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(Tt.a)(this,n);var l=a.keyCodes||[46,8],c=Object(i.a)({ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},a.modifiers);return e=t.call(this,{type:ur.InputType.KEY_DOWN,fire:function(t){var n=t.event,a=n.keyCode,i=n.ctrlKey,d=n.shiftKey,u=n.altKey,p=n.metaKey;-1!==l.indexOf(a)&&s.isEqual({ctrlKey:i,shiftKey:d,altKey:u,metaKey:p},c)&&(s.forEach(e.engine.getModel().getSelectedEntities(),(function(e){e.isLocked()||(console.log("Custom delete",e),console.log("Type is",e.options.type),console.log(e.hasOwnProperty("sourcePort")),r&&"js-custom-node"===e.options.type&&r(e.id),o&&"link"===e.options.type&&o(e.id),e.remove())})),e.engine.repaintCanvas())}})}return n}(ur.Action),Fo=Object(r.d)(Ct,Ro,Object(r.a)(o.a)),zo=new function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(Tt.a)(this,e),this.registerNodeMoveListener=function(e){n.handleNodeMove=e},this.registerNodeSelectedListener=function(e){n.handleNodeSelect=e},this.registerNodeUnselectedListener=function(e){n.handleNodeUnselected=e},this.registerNodeDeleteListener=function(e){n.handleNodeDelete=e},this.registerLinkCreateListener=function(e){n.handleLinkCreate=e},this.registerLinkUpdateListener=function(e){n.handleLinkUpdate=e},this.registerLinkDeleteListener=function(e){n.handleLinkDelete=e},this.renderPipeline=function(e){n.clearAllValues();var t=[],a=[];if(e)t=e.nodes||[],a=e.edges||[];else if(n.store){var r=n.store.getState();t=r.pipelinesteps.items||[],a=r.edges.items||[]}t.length>0&&t.forEach((function(e){try{n.handleCreateNode(e.id,e.name,e.x_coord,e.y_coord)}catch(t){console.log("Error creating node: ",t)}})),a.length>0&&a.forEach((function(e){try{n.handleCreateLink(e.id,e.start_node,e.end_node)}catch(t){console.log("Error creating links: ",t)}})),n.engine.repaintCanvas()},this.getEngine=function(){return n.engine},this.getModel=function(){return n.engine.getModel()},this.initializeEngine=function(){n.engine=jo()({registerDefaultDeleteItemsAction:!1,registerDefaultZoomCanvasAction:!0}),n.engine.maxNumberPointsPerLink=0,n.engine.getNodeFactories().registerFactory(new Jo),n.engine.getLinkFactories().registerFactory(new Uo),n.engine.getStateMachine().pushState(new Do),n.engine.getActionEventBus().registerAction(new Mo({keyCodes:[46]},n.nodeDelete,n.linkDelete))},this.initializeModel=function(){n.model=new Co.DiagramModel,n.model.setGridSize(15),n.model.setLocked(!1),n.model.registerListener({eventDidFire:function(e){var t=e.function;"offsetUpdated"===t&&n.adjustGridOffset(e),"zoomUpdated"===t&&n.adjustGridZoom(e),"linksUpdated"===t&&n.handleLinksChanged(e)}}),n.realignGrid(),n.engine.setModel(n.model)},this.setLocked=function(e){n.model.setLocked(e),n.locked=e},this.isLocked=function(){return n.locked},this.handleLinksChanged=function(e){e.isCreated&&e.link.registerListener({eventDidFire:function(e){"targetPortChanged"===e.function&&n.linkCreate(e)}})},this.linkTargetChanged=function(e){n.handleLinkUpdate?n.handleLinkUpdate(e):console.log("No link update method provided.")},this.handleNodeSelectionChange=function(e){e.isSelected?n.handleNodeSelect?n.handleNodeSelect(e.entity.id):console.log("No node selection method provided"):n.handleNodeUnselected?n.handleNodeUnselected(e.entity.id):console.log("No node unselect method provided")},this.handleNodeMoved=function(e){n.handleNodeMove?n.handleNodeMove(e.entity):console.log("No node move method provided")},this.linkCreate=function(e){n.handleLinkCreate?n.handleLinkCreate(e):console.log("No link create method provided")},this.linkDelete=function(e){console.log("Delete link: ",e),n.handleLinkDelete?n.handleLinkDelete(e):console.log("No link delete method provided")},this.linkInjectGremlinId=function(e,t){n.getLinkFromReactDiagramId(e).id=t},this.nodeDelete=function(e){n.handleNodeDelete?n.handleNodeDelete(e):console.log("No node delete method provided")},this.repaint=function(){return n.engine.repaintCanvas()},this.realignGrid=function(){n.adjustGridOffset({offsetX:n.model.getOffsetX(),offsetY:n.model.getOffsetY()}),n.adjustGridZoom({zoom:n.model.getZoomLevel()})},this.adjustGridOffset=function(e){var t=e.offsetX,n=e.offsetY;document.body.style.setProperty("--offset-x","".concat(t,"px")),document.body.style.setProperty("--offset-y","".concat(n,"px"))},this.adjustGridZoom=function(e){var t=e.zoom,a=n.model.getOptions().gridSize;document.body.style.setProperty("--grid-size","".concat(a*t/100,"px"))},this.getNodeFromGremlinId=function(e){return n.getEngine().getModel().getNodes().find((function(t){return t.id===e}))},this.getLinkFromGremlinId=function(e){return n.getEngine().getModel().getLinks().find((function(t){return t.id===e}))},this.getLinkFromReactDiagramId=function(e){return n.getEngine().getModel().getLinks().find((function(t){return t.options.id===e}))},this.handleCreateLink=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=new ko(e),o=n.getNodeFromGremlinId(t),i=n.getNodeFromGremlinId(a);r.setSourcePort(o.getPort("out")),r.setTargetPort(i.getPort("in")),n.getEngine().getModel().addLink(r)},this.addLink=function(e,t,a){n.handleCreateLink(e,t,a),n.engine.repaintCanvas()},this.handleCreateNode=function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=new No(e,t,o);i.setPosition(a||window.innerWidth/2,r||window.innerHeight/2),i.registerListener({eventDidFire:function(e){var t=e.function;"positionChanged"===t&&n.handleNodeMoved(e),"selectionChanged"===t&&n.handleNodeSelectionChange(e)}}),n.model.addNode(i)},this.addNode=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.handleCreateNode(e,t,a),n.engine.repaintCanvas()},this.handleDeleteNode=function(e){n.getNodeFromGremlinId(e).remove(),n.engine.repaintCanvas()},this.handleDeleteLink=function(e){n.getLinkFromGremlinId(e).remove(),n.engine.repaintCanvas()},this.zoomIn=function(){n.getModel().setZoomLevel(n.getModel().getZoomLevel()+5),n.engine.repaintCanvas()},this.zoomOut=function(){n.getModel().setZoomLevel(n.getModel().getZoomLevel()-5),n.engine.repaintCanvas()},this.zoomToFit=function(){n.engine.zoomToFit()},this.clearAllValues=function(){n.clearLinks(),n.clearNodes(),n.repaint()},this.clearLinks=function(){return n.getEngine().getModel().getLinks().forEach((function(e){return e.remove()}))},this.clearNodes=function(){return n.getEngine().getModel().getNodes().forEach((function(e){return e.remove()}))},this.fireAction=function(e){return n.engine.getActionEventBus().fireAction({event:Object(i.a)(Object(i.a)({},e),{},{key:"",preventDefault:function(){},stopPropagation:function(){}})})},this.components=a,this.locked=!1,this.store=t,this.handleNodeMove=null,this.handleNodeSelect=null,this.handleNodeUnselected=null,this.handleNodeDelete=null,this.handleLinkCreate=null,this.handleLinkUpdate=null,this.handleLinkDelete=null,this.initializeEngine(),this.initializeModel()}(Fo),Bo={ADMIN:Hr,LEGAL_ENG:Hr,LAWYER:ho};console.log("Index.js"),Object(Ot.render)(_t.a.createElement(a.a,{store:Fo},_t.a.createElement(g.a,null),_t.a.createElement(Dt.a,null,_t.a.createElement(Pt.d,null,_t.a.createElement(Pt.b,{key:0,path:"/login",component:wo}),_t.a.createElement(go,{key:1,exact:!0,digraphEngine:zo,path:"/",componentOptions:Bo}),_t.a.createElement(go,{key:1,exact:!0,digraphEngine:zo,path:"/home",componentOptions:Bo})))),document.getElementById("root"))},895:function(e,t,n){e.exports=n(2026)}},[[895,1,2]]]);
//# sourceMappingURL=main.30ce9b9c.chunk.js.map